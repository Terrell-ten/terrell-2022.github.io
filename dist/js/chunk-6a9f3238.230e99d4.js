(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a9f3238"],{"19a3":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.upLoading,expression:"upLoading"}]},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,"show-file-list":!1,name:"multipartFiles","on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)},r=[],i=a("2cd9"),o={props:{imageUrl:{type:String,default:""}},data:function(){return{upLoading:!1,uploadUrl:i["b"]}},computed:{},created:function(){},methods:{handleAvatarSuccess:function(t,e){this.upLoading=!1,200===t.code&&this.$emit("uploadUrl",t.data[0])},beforeAvatarUpload:function(t){this.upLoading=!0;var e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<1;return e||(this.upLoading=!1,this.$message.error("上传头像图片只能是 JPG 格式!")),a||(this.upLoading=!1,this.$message.error("上传头像图片大小不能超过 1MB!")),e&&a}},mounted:function(){}},u=o,l=(a("d12e"),a("2877")),s=Object(l["a"])(u,n,r,!1,null,"0c933ebe",null);e["a"]=s.exports},"4fb0":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},r=[],i=(a("a9e3"),{props:{pageSize:{type:Number,default:10},total:Number,currentPage:Number},data:function(){return{}},methods:{handleSizeChange:function(t){this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}}}),o=i,u=a("2877"),l=Object(u["a"])(o,n,r,!1,null,"03d95dfa",null);e["a"]=l.exports},"5b38":function(t,e,a){},"7c58":function(t,e,a){"use strict";a.d(e,"C",(function(){return r})),a.d(e,"y",(function(){return i})),a.d(e,"R",(function(){return o})),a.d(e,"g",(function(){return u})),a.d(e,"gb",(function(){return l})),a.d(e,"D",(function(){return s})),a.d(e,"G",(function(){return c})),a.d(e,"F",(function(){return d})),a.d(e,"s",(function(){return m})),a.d(e,"N",(function(){return p})),a.d(e,"S",(function(){return f})),a.d(e,"m",(function(){return h})),a.d(e,"Z",(function(){return y})),a.d(e,"B",(function(){return b})),a.d(e,"H",(function(){return g})),a.d(e,"A",(function(){return P})),a.d(e,"L",(function(){return v})),a.d(e,"o",(function(){return _})),a.d(e,"u",(function(){return O})),a.d(e,"f",(function(){return S})),a.d(e,"n",(function(){return D})),a.d(e,"h",(function(){return j})),a.d(e,"bb",(function(){return x})),a.d(e,"z",(function(){return w})),a.d(e,"E",(function(){return T})),a.d(e,"k",(function(){return k})),a.d(e,"T",(function(){return A})),a.d(e,"I",(function(){return L})),a.d(e,"J",(function(){return I})),a.d(e,"j",(function(){return C})),a.d(e,"w",(function(){return E})),a.d(e,"v",(function(){return N})),a.d(e,"P",(function(){return U})),a.d(e,"x",(function(){return G})),a.d(e,"M",(function(){return z})),a.d(e,"l",(function(){return $})),a.d(e,"K",(function(){return B})),a.d(e,"X",(function(){return Q})),a.d(e,"e",(function(){return W})),a.d(e,"cb",(function(){return F})),a.d(e,"O",(function(){return M})),a.d(e,"db",(function(){return q})),a.d(e,"ib",(function(){return R})),a.d(e,"r",(function(){return J})),a.d(e,"Q",(function(){return V})),a.d(e,"U",(function(){return Y})),a.d(e,"Y",(function(){return X})),a.d(e,"W",(function(){return Z})),a.d(e,"V",(function(){return H})),a.d(e,"eb",(function(){return K})),a.d(e,"hb",(function(){return tt})),a.d(e,"b",(function(){return et})),a.d(e,"q",(function(){return at})),a.d(e,"fb",(function(){return nt})),a.d(e,"t",(function(){return rt})),a.d(e,"c",(function(){return it})),a.d(e,"d",(function(){return ot})),a.d(e,"i",(function(){return ut})),a.d(e,"a",(function(){return lt})),a.d(e,"p",(function(){return st})),a.d(e,"ab",(function(){return ct}));var n=a("83c3");function r(t){return Object(n["a"])({url:"/admin/purchase/plan/list/page",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/admin/purchase/plan/detail/list/page",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/admin/product/unit/getUnitsToPlan",method:"GET",params:t})}function u(t){return Object(n["a"])({url:"/admin/pack/material/conversionPrice",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/admin/purchase/plan/updatePurchasePlanUnit",method:"POST",data:t})}function s(t){return Object(n["a"])({url:"/admin/purchase/plan/getPurchaseMaterialList",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/admin/purchase/plan/merge",method:"post",data:t})}function d(t){return Object(n["a"])({url:"admin/purchase/plan/merge",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/admin/excel/operationPurchasePlanDetail",method:"GET",params:t})}function p(t){return Object(n["a"])({url:"/admin/purchase/plan/status/list",method:"GET",data:t})}function f(t){return Object(n["a"])({url:"/admin/excel/operationPurchasePlanDetail",method:"GET",params:t})}function h(t){return Object(n["a"])({url:"/admin/factory/getFactoryList",method:"get",params:t})}function y(t){return Object(n["a"])({url:"/admin/purchase/plan/insert",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/admin/purchase/plan/get",method:"GET",params:t})}function g(t){return Object(n["a"])({url:"/admin/purchase/plan/update",method:"POST",data:t})}function P(t){return Object(n["a"])({url:"/admin/purchase/plan/delete",method:"POST",data:t})}function v(t){return Object(n["a"])({url:"/admin/purchase/plan/purchaseGoodsWarehousing",method:"POST",data:t})}function _(t){return Object(n["a"])({url:"/admin/factory/purchase/plan/all/list",method:"POST",data:t})}function O(t){return Object(n["a"])({url:"/admin/factory/purchase/plan/status/list",method:"GET",params:t})}function S(t){return Object(n["a"])({url:"admin/data/execProcedure/cm_list_batchout?pageNo=0",method:"post",data:t})}function D(t){return Object(n["a"])({url:"/admin/factory/getFactoryList",method:"GET",params:t})}function j(t){return Object(n["a"])({url:"/admin/data/execProcedure/create_prodplan?pageNo=0",method:"POST",data:t})}function x(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/selectCustomerOrderList",method:"GET",params:t})}function w(t){return Object(n["a"])({url:"/productionPlan/getProductPlanstockList",method:"GET",params:t})}function T(t){return Object(n["a"])({url:"/admin/factory/purchase/plan/get",method:"GET",params:t})}function k(t){return Object(n["a"])({url:"/admin/factory/purchase/plan/confirmPurchase",method:"POST",data:t})}function A(t){return Object(n["a"])({url:"/admin/excel/prePurchasePlan",method:"GET",params:t})}function L(t){return Object(n["a"])({url:"/admin/pre/purchase/plan/all/list",method:"POST",data:t})}function I(t){return Object(n["a"])({url:"/admin/pre/purchase/plan/get",method:"GET",params:t})}function C(t){return Object(n["a"])({url:"/admin/pre/purchase/plan/confirmPurchase",method:"POST",data:t})}function E(t){return Object(n["a"])({url:"/admin/purchase/plan/getPurchaseArrangementList",method:"POST",data:t})}function N(t){return Object(n["a"])({url:"/admin/purchase/plan/getPlantmpList",method:"POST",data:t})}function U(t){return Object(n["a"])({url:"/admin/material/supplier/list",method:"GET",data:t})}function G(t){return Object(n["a"])({url:"/payment/getProdorderPaymentList",method:"GET",params:t})}function z(t){return Object(n["a"])({url:"/payment/savePurchorderPayment",method:"POST",data:t})}function $(t){return Object(n["a"])({url:"/payment/deletePurchorderPayment",method:"POST",data:t})}function B(t){return Object(n["a"])({url:"/payment/getPurchorderPayment",method:"POST",params:t})}function Q(t){return Object(n["a"])({url:"/admin/data/execProcedure/cm_list_batch?pageNo=1",method:"POST",data:t})}function W(t){return Object(n["a"])({url:"/admin/data/execProcedure/cm_list_batch?pageNo=0",method:"POST",data:t})}function F(t){return Object(n["a"])({url:"/product/selectProductList",method:"GET",params:t})}function M(t){return Object(n["a"])({url:"/admin/purchase/plan/getStatisticsList",method:"POST",data:t})}function q(t){return Object(n["a"])({url:"/admin/material/supplier/supplierList",method:"get",params:t})}function R(t){return Object(n["a"])({url:"/admin/purchase/plan/updateSupplier",method:"post",data:t})}function J(t){return Object(n["a"])({url:"/admin/purchase/plan/getMaterialPurchstockList",method:"post",data:t})}function V(t){return Object(n["a"])({url:"/admin/material/supplier/getSupplierListByProductId",method:"get",params:t})}function Y(t){return Object(n["a"])({url:"/admin/data/execProcedure/create_purchplan?pageNo=0",method:"POST",data:t})}function X(t){return Object(n["a"])({url:"/admin/purchase/plan/purchaseGoodsBatchWarehouse",method:"post",data:t})}function Z(t){return Object(n["a"])({url:"/admin/purch/detail/materialsAreStoredInBatchesTwo",method:"post",data:t})}function H(t){return Object(n["a"])({url:"/admin/purch/detail/materialsAreStoredInBatches",method:"post",data:t})}function K(t){return Object(n["a"])({url:"/admin/purchase/plan/updateDetailRemarks",method:"post",data:t})}function tt(t){return Object(n["a"])({url:"/admin/purchase/plan/updateRemarks",method:"post",data:t})}function et(t){return Object(n["a"])({url:"/admin/purchase/plan/auditPurchPlan",method:"post",data:t})}function at(t){return Object(n["a"])({url:"/admin/purchase/plan/getMaterialPurchstock",method:"get",params:t})}function nt(t){return Object(n["a"])({url:"/admin/purchase/plan/updatePurchPlanDetail",method:"post",data:t})}function rt(t){return Object(n["a"])({url:"/admin/factory/getPayeeInformation",method:"get",params:t})}function it(t){return Object(n["a"])({url:"/admin/purchase/plan/cancelPurchasePlan",method:"post",data:t})}function ot(t){return Object(n["a"])({url:"/admin/purchase/plan/cancelPurchasePlanDetail",method:"post",data:t})}function ut(t){return Object(n["a"])({url:"/admin/purchase/plan/confirmPurchase",method:"POST",data:t})}function lt(t){return Object(n["a"])({url:"/admin/data/execProcedure/采购批量操作?pageNo=0",method:"post",data:t})}function st(t){return Object(n["a"])({url:"/admin/purch/detail/getMaterialInStockRecordList",method:"get",params:t})}function ct(t){return Object(n["a"])({url:"/admin/purch/detail/saveDeliveryVoucher",method:"post",data:t})}},a195:function(t,e,a){},afbe:function(t,e,a){"use strict";a("5b38")},ba10:function(t,e,a){"use strict";a.d(e,"h",(function(){return i})),a.d(e,"M",(function(){return o})),a.d(e,"f",(function(){return u})),a.d(e,"g",(function(){return l})),a.d(e,"l",(function(){return s})),a.d(e,"D",(function(){return c})),a.d(e,"p",(function(){return d})),a.d(e,"E",(function(){return m})),a.d(e,"q",(function(){return p})),a.d(e,"z",(function(){return f})),a.d(e,"L",(function(){return h})),a.d(e,"r",(function(){return y})),a.d(e,"C",(function(){return b})),a.d(e,"N",(function(){return g})),a.d(e,"o",(function(){return P})),a.d(e,"y",(function(){return v})),a.d(e,"O",(function(){return _})),a.d(e,"v",(function(){return O})),a.d(e,"w",(function(){return S})),a.d(e,"m",(function(){return D})),a.d(e,"e",(function(){return j})),a.d(e,"H",(function(){return x})),a.d(e,"n",(function(){return w})),a.d(e,"t",(function(){return T})),a.d(e,"I",(function(){return k})),a.d(e,"s",(function(){return A})),a.d(e,"j",(function(){return L})),a.d(e,"k",(function(){return I})),a.d(e,"u",(function(){return C})),a.d(e,"K",(function(){return E})),a.d(e,"G",(function(){return N})),a.d(e,"c",(function(){return U})),a.d(e,"B",(function(){return G})),a.d(e,"J",(function(){return z})),a.d(e,"i",(function(){return $})),a.d(e,"A",(function(){return B})),a.d(e,"Z",(function(){return Q})),a.d(e,"X",(function(){return W})),a.d(e,"P",(function(){return F})),a.d(e,"b",(function(){return M})),a.d(e,"U",(function(){return q})),a.d(e,"S",(function(){return R})),a.d(e,"R",(function(){return J})),a.d(e,"T",(function(){return V})),a.d(e,"F",(function(){return Y})),a.d(e,"d",(function(){return X})),a.d(e,"a",(function(){return Z})),a.d(e,"ab",(function(){return H})),a.d(e,"Q",(function(){return K})),a.d(e,"Y",(function(){return tt})),a.d(e,"W",(function(){return et})),a.d(e,"x",(function(){return at})),a.d(e,"V",(function(){return nt}));var n=a("5530"),r=a("83c3");function i(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/getCustomerOrdersStatisticList",method:"GET",params:t})}function o(t){return Object(r["a"])({url:"/admin/excel/financeCustomerOrdersStatistic",method:"GET",params:t})}function u(t){return Object(r["a"])({url:"/admin/customer/order/getCustomer",method:"GET",params:t})}function l(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/getCustomerOrdersFinanceList",method:"GET",params:t})}function s(t){return Object(r["a"])({url:"/admin/excel/financeCustomerOrdersDetail",method:"GET",params:t})}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r["a"])({url:"/admin/data/selectByCond/I_purchase_plan_finance/find?pageNo="+e,method:"post",data:t})}function d(t){return Object(r["a"])({url:"/admin/excel/financeNormPurchase",method:"GET",params:t})}function m(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r["a"])({url:"/admin/data/selectByCond/I_purchase_plan_details_list/find?pageNo="+e,method:"post",data:t})}function p(t){return Object(r["a"])({url:"/admin/excel/financePurchaseDetailTable",method:"GET",params:t})}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r["a"])({url:"/admin/data/selectByCond/I_purchase_warehouse/find?pageNo="+e,method:"post",data:t})}function h(t){return Object(r["a"])({url:"/admin/material/supplier/list/page",method:"post",data:Object(n["a"])(Object(n["a"])({},t),{},{pageSize:100})})}function y(t){return Object(r["a"])({url:"/admin/excel/financePurchaseWarehouseDetail",method:"GET",params:t})}function b(t){return Object(r["a"])({url:"/product/getAllProductInfo",method:"GET",params:t})}function g(t){return Object(r["a"])({url:"/admin/excel/financeDeliverOutboundDetail",method:"GET",params:t})}function P(t){return Object(r["a"])({url:"/admin/excel/financeProductionStatistical",method:"GET",params:t})}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r["a"])({url:"/admin/data/selectByCond/I_purchase_warehouse_details/findPurchaseWarehouseDetails?pageNo="+e,method:"post",data:t})}function _(t){return Object(r["a"])({url:"/admin/excel/financePurchaseStorage",method:"GET",params:t})}function O(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r["a"])({url:"/admin/data/selectByCond/I_deliver_outbound/findDeliverOutboundList?pageNo="+e,method:"post",data:t})}function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r["a"])({url:"/admin/data/selectByCond/I_deliver_outbound_details_list/findDeliverOutboundDetailsList?pageNo="+e,method:"post",data:t})}function D(t){return Object(r["a"])({url:"/admin/excel/financeDeliverOutbound",method:"GET",params:t})}function j(t){return Object(r["a"])({url:"/admin/customer/order/getCustomer",method:"GET",params:t})}function x(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r["a"])({url:"/admin/data/selectByCond/I_outturn_plan_finance/findOutturnPlanList?pageNo="+e,method:"post",data:t})}function w(t){return Object(r["a"])({url:"/admin/excel/financeOutturnPlan",method:"GET",params:t})}function T(t){return Object(r["a"])({url:"/admin/excel/financeStandardLossOverflow",method:"GET",params:t})}function k(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r["a"])({url:"/admin/data/selectByCond/I_outturn_plan_list_finance/findOutturnPlanDetailsList?pageNo="+e,method:"post",data:t})}function A(t){return Object(r["a"])({url:"/admin/excel/financeStandardLossOverflowDetail",method:"GET",params:t})}function L(){return Object(r["a"])({url:"/admin/factory/getFactoryList",method:"get"})}function I(t){return Object(r["a"])({url:"/admin/factory/getFactoryList",method:"GET",params:t})}function C(t){return Object(r["a"])({url:"/orderReturn/selectProdorderReturnList",method:"get",params:t})}function E(){return Object(r["a"])({url:"/admin/material/supplier/list",method:"get"})}function N(t){return Object(r["a"])({url:"/orderReturn/selectPurchorderReturnList",method:"get",params:t})}function U(t){return Object(r["a"])({url:"/admin/financial/breakageStatisticsAnalyse",method:"post",data:t})}function G(t){return Object(r["a"])({url:"/payment/getProdorderPaymentList",method:"GET",params:t})}function z(t){return Object(r["a"])({url:"/payment/saveProdorderPayment",method:"POST",data:t})}function $(t){return Object(r["a"])({url:"/payment/deleteProdorderPayment",method:"POST",data:t})}function B(t){return Object(r["a"])({url:"/payment/getProdorderPayment",method:"POST",data:t})}function Q(t){return Object(r["a"])({url:"/payment/selectPlanPaymentList",method:"GET",params:t})}function W(t){return Object(r["a"])({url:"/payment/savePaymentInfo",method:"POST",data:t})}function F(t){return Object(r["a"])({url:"/payment/insertPlanPayment",method:"POST",data:t})}function M(t){return Object(r["a"])({url:"/payment/auditPlanPayment",method:"POST",data:t})}function q(t){return Object(r["a"])({url:"/admin/purch/pay/selectPlanPaymentList",method:"GET",params:t})}function R(t){return Object(r["a"])({url:"/admin/purch/pay/insertPlanPayment",method:"POST",data:t})}function J(t){return Object(r["a"])({url:"/admin/purch/pay/auditPlanPayment",method:"POST",data:t})}function V(t){return Object(r["a"])({url:"/admin/purch/pay/savePaymentInfo",method:"POST",data:t})}function Y(t){return Object(r["a"])({url:"/admin/purch/pay/getPurchorderPaymentList",method:"GET",params:t})}function X(t){return Object(r["a"])({url:"/admin/purch/pay/deletePurchorderPayment",method:"POST",data:t})}function Z(t){return Object(r["a"])({url:"/admin/purch/pay/updatePlanPayment",method:"POST",data:t})}function H(t){return Object(r["a"])({url:"/payment/updatePlanPayment",method:"POST",data:t})}function K(t){return Object(r["a"])({url:"/admin/material/supplier/getPayeeInformation",method:"GET",params:t})}function tt(t){return Object(r["a"])({url:"/payment/savePlanPaymentOne",method:"post",data:t})}function et(t){return Object(r["a"])({url:"/admin/purch/pay/saveOnePlanPayment",method:"post",data:t})}function at(t){return Object(r["a"])({url:"/productionPlan/getPlanDetailPaymentList",method:"GET",params:t})}function nt(t){return Object(r["a"])({url:"/payment/rejectPlanPayment",method:"post",data:t})}},d12e:function(t,e,a){"use strict";a("a195")},ef4b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingWeb,expression:"loadingWeb"}],staticClass:"main-conent main-conent-minheight",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0},model:{value:t.formQuery,callback:function(e){t.formQuery=e},expression:"formQuery"}},[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"日期从："}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",align:"right",placeholder:"开始日期","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.starDataMax}},model:{value:t.formQuery.startDate,callback:function(e){t.$set(t.formQuery,"startDate",e)},expression:"formQuery.startDate"}}),t._v(" - "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",align:"right",placeholder:"结束时间","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.endDataMin}},model:{value:t.formQuery.endDate,callback:function(e){t.$set(t.formQuery,"endDate",e)},expression:"formQuery.endDate"}})],1)]),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"状态类型："}},[a("el-select",{attrs:{placeholder:"状态类型"},on:{change:t.onSubmit},model:{value:t.formQuery.status,callback:function(e){t.$set(t.formQuery,"status",e)},expression:"formQuery.status"}},t._l(t.stateList,(function(t,e){return a("el-option",{key:e,attrs:{label:t.title,value:t.typeId}})})),1)],1),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"生产厂家："}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.formQuery.factoryId,callback:function(e){t.$set(t.formQuery,"factoryId",e)},expression:"formQuery.factoryId"}},t._l(t.FactoryNameList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.factoryName,value:t.id}})})),1)],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:t.onSubmit}},[t._v("查询")])],1)],1),a("div",[t.buttonPermissions.indexOf(10069)>=0?[102101==Number(t.paramData.status)?a("el-form-item",{staticClass:"overall"},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:function(e){return t.onBatchApply(1)}}},[t._v("批量审批")])],1):t._e()]:t._e()],2)])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],key:t.paramData.status,ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[[102100,102101].indexOf(Number(t.paramData.status))>=0?a("el-table-column",{attrs:{type:"selection",selectable:t.selectable,width:"40",align:"center"}}):t._e(),a("el-table-column",{attrs:{prop:"id",label:"标识",width:"50",align:"center"}}),a("el-table-column",{attrs:{property:"planTime",label:"订单时间",align:"center",width:102100===t.paramData.status?180:95}}),[102101,102102,102103].indexOf(Number(t.paramData.status))>=0?a("el-table-column",{attrs:{property:"requdate",label:"申请时间",align:"center",width:"95"}}):t._e(),[102101,102102,102103].indexOf(Number(t.paramData.status))>=0?a("el-table-column",{attrs:{property:"inman",label:"申请人",align:"center",width:"100"}}):t._e(),[102102,102103].indexOf(Number(t.paramData.status))>=0?a("el-table-column",{attrs:{property:"checkTime",label:"审核时间",align:"center",width:"95"}}):t._e(),[102102,102103].indexOf(Number(t.paramData.status))>=0?a("el-table-column",{attrs:{property:"checkUser",label:"审核人",align:"center",width:"100"}}):t._e(),a("el-table-column",{attrs:{property:"factoryName",label:"生产工厂",align:"center","min-width":"150"}}),a("el-table-column",{attrs:{property:"dutyofficer",label:"负责人",align:"center"}}),a("el-table-column",{attrs:{property:"amount",label:"订单金额",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"orangered"}},[t._v(t._s(e.row.amount))])]}}])}),[102100].indexOf(t.paramData.status)>=0?a("el-table-column",{attrs:{property:"preApplyAmount",label:"已申请金额",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"orangered"}},[t._v(t._s(e.row.preApplyAmount))])]}}],null,!1,3199966756)}):t._e(),[102100].indexOf(t.paramData.status)>=0?a("el-table-column",{attrs:{property:"noApplyAmount",label:"可申请金额",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"orangered"}},[t._v(t._s(e.row.noApplyAmount))])]}}],null,!1,3796585314)}):t._e(),[102101].indexOf(t.paramData.status)>=0?a("el-table-column",{attrs:{property:"preApplyAmount",label:"申请待付金额",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"orangered"}},[t._v(t._s(e.row.preApplyAmount))])]}}],null,!1,3199966756)}):t._e(),[102102,102103].indexOf(t.paramData.status)>=0?a("el-table-column",{attrs:{property:"preApplyAmount",label:"应付金额",align:"center",width:"100"}}):t._e(),[102102,102103,102100].indexOf(t.paramData.status)>=0?a("el-table-column",{attrs:{property:"paidAmount",label:"已付金额",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticStyle:{color:"orangered"}},[t._v(t._s(e.row.paidAmount))])]}}],null,!1,3517039627)}):t._e(),[102102].indexOf(t.paramData.status)>=0?a("el-table-column",{attrs:{property:"paidAmount",label:"已付百分比",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("proportion")(e.row.paidAmount/e.row.preApplyAmount))+"%")])]}}],null,!1,3029141549)}):t._e(),[102102].indexOf(t.paramData.status)>=0?a("el-table-column",{attrs:{property:"unPaidAmount",label:"剩余应付金额",align:"center"}}):t._e(),a("el-table-column",{attrs:{property:"typeName",label:"生产状态",align:"center"}}),a("el-table-column",{attrs:{property:"--",label:"生产明细",align:"center",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},nativeOn:{click:function(a){return t.onSeeDetailed(e.row)}}},[t._v("查看明细")])]}}])}),a("el-table-column",{attrs:{property:"--",label:"备注",align:"center"}}),a("el-table-column",{attrs:{property:"--",label:"操作",align:"center",width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[102100==Number(t.paramData.status)&&t.buttonPermissions.indexOf(10068)>=0?a("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return t.apy_payment(1,e.row)}}},[t._v("分批申请付款")]):t._e(),102101==Number(t.paramData.status)&&t.buttonPermissions.indexOf(10069)>=0?a("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return t.butBatchApply(e.row.id,1)}}},[t._v("审批")]):t._e(),[102102,102103].indexOf(Number(t.paramData.status))>=0?a("el-button",{staticStyle:{"margin-top":"0px"},attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return t.seePayment(e.row)}}},[t._v("支付记录")]):t._e()]}}])})],1),a("div",{staticClass:"margin-t16 text-right footer_Paging"},[a("pagination",{attrs:{"current-page":t.paramData.page,total:t.total,pageSize:t.paramData.pageSize},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"订单明细",visible:t.SeeDetailed_Visible,width:"75%"},on:{"update:visible":function(e){t.SeeDetailed_Visible=e}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.SeeDetailed}},[102101==t.paramData.status?a("div",[a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"生产工厂:"}},[a("span",[t._v(t._s(t.SeeDetailed.factoryName))])]),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"需付总金额:"}},[a("span",[t._v(t._s(t.SeeDetailed.amount))])])],1):t._e(),102102==Number(t.paramData.status)?a("el-form-item"):t._e()],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.SeeDetailedList,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"标识",align:"center"}}),a("el-table-column",{attrs:{prop:"namecode",label:"成品名称",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"specif",label:"规格",align:"center"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位",align:"center"}}),a("el-table-column",{attrs:{prop:"num",label:"生产数量",align:"center"}}),a("el-table-column",{attrs:{prop:"finishNum",label:"完成数量",align:"center"}}),a("el-table-column",{attrs:{prop:"amount",label:"金额",align:"center"}}),a("el-table-column",{attrs:{prop:"nodetype",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.nodetype))])]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.SeeDetailed_Visible=!1}}},[t._v("关闭")]),102101==t.paramData.status?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.butBatchApply(t.SeeDetailed.id,1)}}},[t._v("审批")]):t._e()],1)],1),a("el-dialog",{attrs:{title:"汇款支付记录",visible:t.SeePayment.sync,width:"75%"},on:{"update:visible":function(e){return t.$set(t.SeePayment,"sync",e)}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.SeeDetailed}},[102102===t.paramData.status&&t.buttonPermissions.indexOf(10070)>=0?a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[t.SeePayment.isAddBut?t._e():a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"0px"}},[a("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(e){return t.butPayment(t.SeeDetailed,1)}}},[t._v("添加支付")])],1)],1):t._e()]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.SeePaymentList,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"标识",align:"center",width:"60"}}),a("el-table-column",{attrs:{prop:"inman",label:"支付操作人",align:"center"}}),a("el-table-column",{attrs:{prop:"optdate",label:"支付时间",align:"center"}}),a("el-table-column",{attrs:{prop:"amount",label:"支付金额",align:"center"}}),a("el-table-column",{attrs:{prop:"namecode",label:"汇款信息",align:"center"}}),a("el-table-column",{attrs:{prop:"--",label:"汇款凭证",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.payDocumentUrl?a("el-image",{staticStyle:{width:"50px",height:"50px","object-fit":""},attrs:{fit:"contain",src:e.row.payDocumentUrl,"preview-src-list":[e.row.payDocumentUrl]}}):a("span",[t._v("-")])]}}])}),a("el-table-column",{attrs:{prop:"serviceinfo",label:"收款信息",align:"center"}}),102102===t.paramData.status?a("el-table-column",{attrs:{prop:"",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(a){return t.butPayment(e.row,3)}}},[t._v("修改")]),a("el-button",{attrs:{size:"mini",type:"danger"},nativeOn:{click:function(a){return t.deletePayment(e.row)}}},[t._v("删除")])]}}],null,!1,1299447093)}):t._e()],1),a("div",{staticClass:"margin-t16 text-right"},[a("pagination",{attrs:{"current-page":t.SeePayment.paramData.page,total:t.SeePayment.total,"page-size":t.SeePayment.paramData.pageSize},on:{handleSizeChange:t.PayhandleSizeChange,handleCurrentChange:t.PayhandleCurrentChange}})],1)],1),a("el-dialog",{attrs:{visible:t.batch_init.sync,title:t.batch_init.title,width:"20%","destroy-on-close":"",center:""},on:{"update:visible":function(e){return t.$set(t.batch_init,"sync",e)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.batch_init.sync=!1}}},[t._v(t._s(0===t.batch_init.val?"关闭":"取消"))]),t.batch_init.val>0?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.batch_init.loading,expression:"batch_init.loading"}],attrs:{type:"primary"},on:{click:t.batch_submit}},[t._v("确定")]):t._e()],1)]},proxy:!0}]),model:{value:t.batch_init.sync,callback:function(e){t.$set(t.batch_init,"sync",e)},expression:"batch_init.sync"}},[a("div",{staticStyle:{"font-size":"16px"}},[t._v(" "+t._s(t.batch_init.content)+" ")])]),a("el-dialog",{attrs:{visible:t.batch_init2.sync,title:"分批申请付款",width:"34%","destroy-on-close":"",center:""},on:{"update:visible":function(e){return t.$set(t.batch_init2,"sync",e)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.batch_init2.sync=!1}}},[t._v(t._s(0===t.batch_init2.val?"关闭":"取消"))]),t.batch_init2.val>0?a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.batch_init2.loading,expression:"batch_init2.loading"}],attrs:{type:"primary"},on:{click:function(e){return t.apy_payment(3)}}},[t._v("确定")]):t._e()],1)]},proxy:!0}])},[a("div",{staticStyle:{"font-size":"16px"}},[a("div",{staticClass:"number",staticStyle:{color:"#999","font-size":"14px"}},[a("div",{staticStyle:{"margin-bottom":"15px"}},[t._v("生产工厂："+t._s(t.batch_init2.row.factoryName))]),a("div",{staticClass:"number-txt",staticStyle:{"margin-bottom":"15px"}},[a("span",[t._v("订单总金额："+t._s(t.batch_init2.row.amount))]),a("span",[t._v("已申请金额："+t._s(t.batch_init2.row.preApplyAmount))]),a("span",[t._v("可申请金额："+t._s(t.batch_init2.row.noApplyAmount))])]),a("div",{staticClass:"number-txt",staticStyle:{"margin-bottom":"15px"}},[a("span",[t._v("已支付金额："+t._s(t.batch_init2.row.paidAmount))]),a("span",[t._v("申请未付金额："+t._s((1e4*t.batch_init2.row.preApplyAmount-1e4*t.batch_init2.row.paidAmount)/1e4))])])]),a("div",{staticClass:"input-box",staticStyle:{"margin-top":"20px"}},[a("el-form",{attrs:{"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"申请金额"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{type:"number",min:0},model:{value:t.batch_init2.param.val,callback:function(e){t.$set(t.batch_init2.param,"val",e)},expression:"batch_init2.param.val"}},[a("template",{slot:"append"},[a("el-link",{on:{click:function(e){t.batch_init2.param.val=t.batch_init2.row.noApplyAmount}}},[t._v("全部")])],1)],2)],1),a("span",{staticStyle:{color:"red","font-size":"12px"}},[t._v(t._s(t.batch_init2.param.val>t.batch_init2.row.noApplyAmount?"( 当前申请总金额已超过订单总金额 )":""))])],1)],1)])]),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.savePayment.loading,expression:"savePayment.loading"}],attrs:{visible:t.savePayment.sync,title:"添加支付",width:"850px","destroy-on-close":"",center:""},on:{"update:visible":function(e){return t.$set(t.savePayment,"sync",e)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.savePayment.sync=!1}}},[t._v(t._s("取消"))]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.savePayment.loading,expression:"savePayment.loading"}],attrs:{type:"primary"},on:{click:t.butPayment_submit}},[t._v(t._s(3===t.savePayment.type?"修改":"提交"))])],1)]},proxy:!0}]),model:{value:t.savePayment.sync,callback:function(e){t.$set(t.savePayment,"sync",e)},expression:"savePayment.sync"}},[a("div",{staticStyle:{"font-size":"16px"}},[a("el-form",{ref:"savePayment",staticClass:"demo-ruleForm",attrs:{model:t.savePayment.paramData,rules:t.savePayment.rules,"label-position":"left"}},[a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{staticStyle:{"padding-right":"50px"},attrs:{label:"订单总额:","label-width":"80px"}},[a("span",[t._v(t._s(t.SeeDetailed.amount))])]),a("el-form-item",{staticStyle:{"padding-right":"50px"},attrs:{label:"待支付金额:","label-width":"100px"}},[a("span",[t._v(t._s(t.SeeDetailed.unPaidAmount_max))])]),a("el-form-item",{attrs:{label:"已支付百分比:","label-width":t.labelWidth}},[a("span",[t._v(t._s(t._f("proportion")(t.SeeDetailed.paidAmount/t.SeeDetailed.preApplyAmount))+"%")])])],1),a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"本次支付金额:",prop:"amount","label-width":t.labelWidth}},[a("el-input",{staticStyle:{width:"220px"},attrs:{type:"number",autocomplete:"off"},model:{value:t.savePayment.paramData.amount,callback:function(e){t.$set(t.savePayment.paramData,"amount",e)},expression:"savePayment.paramData.amount"}},[a("template",{slot:"append"},[a("el-link",{on:{click:function(e){t.savePayment.paramData.amount=t.SeeDetailed.unPaidAmount_max}}},[t._v("全部")])],1)],2),a("el-input-number",{staticStyle:{display:"none"},attrs:{precision:6,min:0,autocomplete:"off"},model:{value:t.savePayment.paramData.amount,callback:function(e){t.$set(t.savePayment.paramData,"amount",e)},expression:"savePayment.paramData.amount"}}),t.savePayment.paramData.amount>0?a("span",{staticStyle:{"margin-left":"20px"}},[t._v("本次支付占总金额的 "+t._s(t._f("proportion")(t.savePayment.paramData.amount/t.SeeDetailed.amount))+"%")]):t._e()],1)],1),t.savePayment.paramData.amount>t.SeeDetailed.unPaidAmount_max?a("div",{staticStyle:{color:"red","font-size":"12px"}},[t._v("(当前支付的金额，已经超出了此次申请支付的金额)")]):t._e(),a("div",{staticStyle:{"margin-top":"10px"}}),a("el-form-item",{attrs:{label:"收款人:","label-width":t.labelWidth}},[t._v(" "+t._s(t.formBrand_extraInfo.payee)+" ")]),a("el-form-item",{attrs:{label:"收款账号","label-width":t.labelWidth}},[t._v(" "+t._s(t.formBrand_extraInfo.paymentAccount)+" ")]),a("el-form-item",{attrs:{label:"开户银行:","label-width":t.labelWidth}},[t._v(" "+t._s(t.formBrand_extraInfo.openingBank)+" ")]),a("el-form-item",{attrs:{label:"上传凭证:",prop:"payDocumentUrl","label-width":t.labelWidth}},[a("AppUploadUrl",{attrs:{imageUrl:t.savePayment.paramData.payDocumentUrl},on:{uploadUrl:t.clickUploadUrl}})],1),a("el-form-item",{attrs:{label:"备注信息:","label-width":t.labelWidth}},[a("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea",autocomplete:"off"},model:{value:t.savePayment.paramData.remarks,callback:function(e){t.$set(t.savePayment.paramData,"remarks",e)},expression:"savePayment.paramData.remarks"}})],1)],1)],1)])],1)},r=[],i=a("5530"),o=(a("b0c0"),a("d3b7"),a("159b"),a("e9c4"),a("a434"),a("7c58")),u=a("ba10"),l=a("19a3"),s=a("2f62"),c=a("4fb0"),d={components:{pagination:c["a"],AppUploadUrl:l["a"]},filters:{proportion:function(t){var e=Math.round(1e4*t)/100;return e}},data:function(){return{loadingWeb:!0,loadingTab:!1,loadingQuery:!1,tableData:[],SeeDetailed:{},SeeDetailedList:[],SeeDetailed_Visible:!1,stateList:[{title:"未付款订单",typeId:102100,id:0},{title:"申请待审",typeId:102101,id:1},{title:"审核待付",typeId:102102,id:2},{title:"完成付款",typeId:102103,id:3}],stateId:102100,productList:[],formQuery:{status:102100,payType:"",timeData:"",factoryId:"",productId:""},FactoryNameList:[],factoryList:[],paramData:{page:1,pageSize:24},total:0,factoryId:"",queryInfo:{page:1,pageSize:24},table_id_arr:[],batch_init:{sync:!1,title:"提示",content:"操作说明",ids:"",val:1,optType:0,loading:!1},batch_init2:{param:{val:0},sync:!1,title:"提示",content:"操作说明",row:{},ids:"",val:1,optType:0,loading:!1},SeePayment:{isAddBut:!1,sync:!1,title:"提示",content:"操作说明",ids:"",val:1,optType:0,loading:!1,allTate:0,total:0,paramData:{page:1,pageSize:24}},SeePaymentList:[],savePayment:{sync:!1,loading:!1,type:0,rules:{amount:[{required:!0,message:"请输入本次支付金额",trigger:"blur"}],payDocumentUrl:[{required:!1,message:"请上传支付凭证",trigger:"blur"}],payeeInfo:[{required:!0,message:"请输入收款信息",trigger:"blur"}],payerInfo:[{required:!0,message:"请输入汇款信息",trigger:"blur"}]},paramData:{amount:0,payDocumentUrl:"",payUser:"",payeeInfo:"",payerInfo:"",paymentId:0,remarks:""}},labelWidth:"110px",allTate:24,options:[],dialogExport:!1,dialogPaymentRecords:!1,PaymentRecordsList:[],formQueryInfo:{supplierId:"",timeData:""},AddPayFormRules:{namecode:[{required:!0,message:"请输入收付款方账号信息",trigger:"blur"}],amount:[{required:!0,message:"请输入付款金额",trigger:"blur"}],nodetype:[{required:!0,message:"请选择类型",trigger:"blur"}]},dialogPayAdd:!1,AddRelaId:"",manufacturerId:"",formPayAdd:{namecode:"",amount:"",nodetype:""},dialogPayEdit:!1,PayEditForm:{},PayEditSupplierName:"",editPayFormRules:{namecode:[{required:!0,message:"请输入收付款方账号信息",trigger:"blur"}],amount:[{required:!0,message:"请输入付款金额",trigger:"blur"}],nodetype:[{required:!0,message:"请选择类型",trigger:"blur"}]},formBrand_extraInfo:{payee:"",paymentAccount:"",openingBank:""},buttonPermissions:[],EditPayId:"",max_history:10,historyList:[]}},computed:Object(i["a"])({},Object(s["c"])({roles:"roles",userId:"user/userId",name:"user/name"})),created:function(){this.buttonPermissions=this.roles[0].buttonPermissions,this.provinceList=this.data,this.provinceList=this.data;var t=Object(i["a"])(Object(i["a"])({},this.paramData),{},{status:this.formQuery.status});this.paramData=t,this.selectPlanPaymentList(t),this.getFactoryName()},methods:{apy_payment:function(t,e){if(1===t)return this.batch_init2.param.val=0,this.batch_init2.row=e,void(this.batch_init2.sync=!0);if(3===t){if(0===this.batch_init2.param.val)return void this.$message.warning("申请金额不能为0");var a={optName:this.name,planId:this.batch_init2.row.id,amount:this.batch_init2.param.val};this.set_savePlanPaymentOne(a)}},set_savePlanPaymentOne:function(t){var e=this;this.batch_init2.loading=!0,Object(u["Y"])(t).then((function(t){e.batch_init2.loading=!1,200===t.code&&(e.$message.success("操作成功"),e.batch_init2.sync=!1,e.paramData.page=1,e.selectPlanPaymentList(e.paramData))}))},starDataMax:function(t){if(this.formQuery.endDate)return t.getTime()>=Date.parse(this.formQuery.endDate)},endDataMin:function(t){if(this.formQuery.startDate)return t.getTime()<=Date.parse(this.formQuery.startDate)-864e5},deletePayment:function(t){this.batch_init.content="你确定要该支付记录吗",this.batch_init.ids=t.id,this.batch_init.optType=3,this.batch_init.sync=!0},getDeleteProdorderPayment:function(){var t=this,e={id:this.batch_init.ids};this.savePayment.loading=!0,Object(u["i"])(e).then((function(e){t.savePayment.loading=!1,t.savePayment.sync=!1,200===e.code?(t.$message({type:"success",message:"删除成功"}),t.batch_init.sync=!1,t.selectPlanPaymentList(t.paramData)):t.$message({type:"error",message:e.message})}))},amount_blur:function(){this.savePayment.paramData.amount>this.SeeDetailed.unPaidAmount_max&&(this.savePayment.paramData.amount=this.SeeDetailed.unPaidAmount_max,this.$message({message:"输入的金额大于待支付金额",type:"warning"}))},batch_submit:function(){0===this.batch_init.optType?this.insertPlanPayment():1===this.batch_init.optType?this.auditPlanPayment():3===this.batch_init.optType?this.getDeleteProdorderPayment():this.$message({message:"功能开发中！",type:"warning"})},seePayment:function(t,e){this.SeePayment.isAddBut=e||!1,this.SeePayment.sync=!0,this.SeeDetailed=t,this.SeeDetailed.unPaidAmount=this.SeeDetailed.unPaidAmount||0;var a={page:1,pageSize:24,rela:t.id};this.SeePayment.paramData=a,this.getProdorderPaymentList(this.SeePayment.paramData)},getProdorderPaymentList:function(t){var e=this;this.SeePayment.loading=!0,Object(u["B"])(t).then((function(t){e.SeePayment.loading=!1,200===t.code?(e.SeePaymentList=t.data.list,e.SeePayment.allTate=t.data.total,e.SeePayment.total=t.data.total,e.SeePaymentList.forEach((function(t){var e=t.vdata;t.payDocumentUrl=e.payDocumentUrl||"",t.remarks=e.remarks||""}))):e.$message({message:t.message,type:"warning"})}))},PayhandleSizeChange:function(t){this.SeePayment.paramData.pageSize=t,this.SeePayment.paramData.page=1,this.getProdorderPaymentList(this.SeePayment.paramData)},PayhandleCurrentChange:function(t){this.SeePayment.paramData.page=t,this.getProdorderPaymentList(this.SeePayment.paramData)},butPayment:function(t,e){var a=this;if(Object(o["t"])({id:t.factoryId}).then((function(t){if(200===t.code){var e={openingBank:t.data.openingBank||"",payee:t.data.payee||"",paymentAccount:t.data.paymentAccount||""};"null"===e.openingBank&&(e.openingBank=""),"null"===e.payee&&(e.payee=""),"null"===e.paymentAccount&&(e.paymentAccount=""),a.formBrand_extraInfo=e}})),this.savePayment.type=e,this.savePayment.sync=!0,this.SeeDetailed.unPaidAmount_max=this.SeeDetailed.unPaidAmount,3===e)return this.SeeDetailed.unPaidAmount_max+=t.amount,void(this.savePayment.paramData={amount:t.amount,payDocumentUrl:t.payDocumentUrl,payUser:t.inman,inman:t.inman,payeeInfo:t.serviceinfo,payerInfo:t.namecode,id:t.id,remarks:""});this.savePayment.paramData={amount:0,payDocumentUrl:"",payUser:this.name,payeeInfo:"",payerInfo:"",paymentId:t.id,remarks:""}},butPayment_submit:function(){var t=this;this.$refs["savePayment"].validate((function(e){if(!e)return!1;if(t.savePayment.paramData.openingBank=t.formBrand_extraInfo.openingBank,t.savePayment.paramData.paymentAccount=t.formBrand_extraInfo.paymentAccount,t.savePayment.paramData.payee=t.formBrand_extraInfo.payee,1===t.savePayment.type)t.savePayment.paramData.vdata=JSON.stringify({payDocumentUrl:t.savePayment.paramData.payDocumentUrl,remarks:t.savePayment.paramData.remarks}),delete t.savePayment.paramData["payDocumentUrl"],delete t.savePayment.paramData["remarks"],t.savePaymentInfo(t.savePayment.paramData);else if(3===t.savePayment.type){var a={amount:t.savePayment.paramData.amount,id:t.savePayment.paramData.id,vdata:{payDocumentUrl:t.savePayment.paramData.payDocumentUrl,remarks:t.savePayment.paramData.remarks}};t.updatePlanPayment(a)}}))},updatePlanPayment:function(t){var e=this;t.inman=t.payUser,t.namecode=t.payeeInfo,this.savePayment.loading=!0,Object(u["ab"])(t).then((function(t){e.savePayment.loading=!1,200===t.code?(e.savePayment.sync=!1,e.$message({type:"success",message:"修改成功"}),e.selectPlanPaymentList(e.paramData)):e.$message({type:"error",message:t.message})}))},savePaymentInfo:function(t){var e=this;this.savePayment.loading=!0,Object(u["X"])(t).then((function(t){e.savePayment.loading=!1,200===t.code&&(e.option=e.$message({type:"success",message:"操作成功"}),e.savePayment.sync=!1,e.selectPlanPaymentList(e.paramData))}))},clickUploadUrl:function(t){this.savePayment.paramData.payDocumentUrl=t},getFactoryName:function(){var t=this;Object(o["n"])({}).then((function(e){200===e.code&&(t.FactoryNameList=e.data)}))},onSeeDetailed:function(t){this.SeeDetailed=t,t.planDetailList&&t.planDetailList.length>0?(this.SeeDetailedList=t.planDetailList,this.SeeDetailed_Visible=!0):this.$message({message:"该订单暂无明细！",type:"warning"})},onBatchApply:function(t){0!==this.table_id_arr.length?(this.batch_init.ids=this.table_id_arr,this.batch_init.content="你确认要对已选的"+this.table_id_arr.length+"条的数据进行申请付款吗？",1===t&&(this.batch_init.content="你确认要对已选的"+this.table_id_arr.length+"条的数据进行审批吗？"),this.batch_init.optType=t,this.batch_init.sync=!0):this.$message({message:"请选择要操作的数据！",type:"warning"})},butBatchApply:function(t,e){this.batch_init.ids=[t],this.batch_init.content="你确认要对当前数据进行申请付款吗？",1===e&&(this.batch_init.content="你确认要对当前数据进行审批吗？"),this.batch_init.optType=e,this.batch_init.sync=!0},insertPlanPayment:function(){var t=this,e={optName:this.name,planIds:this.batch_init.ids};Object(u["P"])(e).then((function(e){200===e.code?(t.$message({type:"success",message:"操作成功"}),t.batch_init.sync=!1,t.paramData.page=1,t.selectPlanPaymentList(t.paramData)):t.$message({type:"error",message:e.message})}))},auditPlanPayment:function(){var t=this,e={optName:this.name,paymentIds:this.batch_init.ids};Object(u["b"])(e).then((function(e){200===e.code?(t.$message({type:"success",message:"操作成功"}),t.batch_init.sync=!1,t.paramData.page=1,t.selectPlanPaymentList(t.paramData)):t.$message({type:"error",message:e.message})}))},handleSelectionChange:function(t){var e=this;this.table_id_arr=[];var a=[];t.length>0&&t.forEach((function(t){e.table_id_arr.push(t.id),t.isProduction&&a.push(t)}))},selectable:function(t){if(t)return!0},onSubmit:function(){var t=this.historyList,e=this.formQuery.productId,a=localStorage.getItem("data");t=a?JSON.parse(a):[],this.productList.forEach((function(a){a.id===e&&t.unshift(a)})),this.productList=this.removalDuplicate(t),localStorage.setItem("data",JSON.stringify(t));var n=this.formQuery;this.paramData.page=1;var r=Object(i["a"])({page:1,pageSize:this.paramData.pageSize},n);delete r.timeData,r.factoryId||delete r.factoryId,r.payType||delete r.payType,r.productId||delete r.productId,this.paramData=r,this.selectPlanPaymentList(r)},getTimeData:function(t){var e=new Date(t),a=e.getFullYear()+"-"+this.p(e.getMonth()+1)+"-"+this.p(e.getDate());return a},p:function(t){return t<10?"0"+t:t},dialogExportClick:function(){this.dialogExport=!1,this.$message({type:"success",message:"操作成功"})},selectPlanPaymentList:function(t){var e=this;this.loadingWeb=!0,this.loadingQuery=!0,Object(u["Z"])(t).then((function(t){if(e.loadingWeb=!1,e.loadingQuery=!1,e.loadingTab=!1,200===t.code){var a=t.data.list;if(e.tableData=a,e.allTate=t.data.total,e.total=t.data.total,e.SeePayment.sync){var n=!0;e.tableData.forEach((function(t){t.id===e.SeeDetailed.id&&(n=!1)})),n?(e.seePayment(e.SeeDetailed,!0),e.option&&e.option.close(),e.option=e.$message.success("订单支付已全部支付完成，请前往完成付款查看")):e.seePayment(e.SeeDetailed)}}else e.$message({message:t.message,type:"warning"})}))},handleSizeChange:function(t){this.paramData.pageSize=t,this.selectPlanPaymentList(this.paramData)},handleCurrentChange:function(t){this.paramData.page=t,this.selectPlanPaymentList(this.paramData)},removalDuplicate:function(t){for(var e=0;e<t.length;e++){var a=t[e];if(""!==a)for(var n=e+1;n<t.length;n++)t[e].id===t[n].id&&t.splice(e,1)}return t}},mounted:function(){}},m=d,p=(a("afbe"),a("2877")),f=Object(p["a"])(m,n,r,!1,null,"693370cf",null);e["default"]=f.exports}}]);