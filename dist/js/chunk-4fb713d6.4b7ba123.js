(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4fb713d6"],{"2d80":function(e,t,a){},"39d5":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingWeb,expression:"loadingWeb"}],staticClass:"main-conent main-conent-minheight flex-main-conent",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("div",{staticClass:"flex-box"},[a("div",{staticClass:"flex-top"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formQuery}},[a("el-form-item",{staticClass:"overall",attrs:{label:"区域："}},[a("AppRegion",{attrs:{state:101},on:{valueRegion:e.chengRegion}})],1),a("el-form-item",{staticClass:"overall",attrs:{label:"工厂名称："}},[a("el-select",{attrs:{clearable:"",placeholder:"生产工厂名称"},model:{value:e.formQuery.factoryId,callback:function(t){e.$set(e.formQuery,"factoryId",t)},expression:"formQuery.factoryId"}},e._l(e.optionsFactory,(function(e){return a("el-option",{key:e.id,attrs:{label:e.factoryName,value:e.id}})})),1)],1),a("el-form-item",{staticClass:"overall"},[a("el-button",{attrs:{type:"primary",disabled:e.loadingQuery},on:{click:e.onSubmit}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"flex-cont"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],ref:"TableData",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"",border:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"id",label:"标识",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"factoryName",label:"工厂名称",align:"center"}}),a("el-table-column",{attrs:{prop:"shopperWarehouseType",label:"类型",align:"center"}}),a("el-table-column",{attrs:{prop:"vdata",label:"所在区域",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(null!=t.row.vdata?t.row.vdata.regionname:"未填写地区")+" ")]}}])}),a("el-table-column",{attrs:{prop:"shopperWarehouseName",label:"仓库",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary"}},[e._v(" 菜单"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return e.clickEdit(t.row.id)}}},[e._v("修改")]),a("el-dropdown-item",{nativeOn:{click:function(a){return e.clickDele(t.row.id)}}},[e._v("禁用")])],1)],1)]}}])})],1)],1),a("div",{staticClass:"flex-button"},[a("div",{staticClass:"margin-t16 text-right"},[a("AppPaging",{attrs:{total:e.allTate,pageSize:e.paramData.pageSize,currentPage:e.paramData.page},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1)])]),a("el-dialog",{attrs:{title:"工厂仓库",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.formBrand}},[a("el-form-item",{attrs:{label:"工厂仓库名称:","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.formBrand.name,callback:function(t){e.$set(e.formBrand,"name",t)},expression:"formBrand.name"}})],1),"***"!==e.formBrand.contact?a("el-form-item",{attrs:{label:"联系人:","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.formBrand.contact,callback:function(t){e.$set(e.formBrand,"contact",t)},expression:"formBrand.contact"}})],1):e._e(),"***"!==e.formBrand.phone?a("el-form-item",{attrs:{label:"联系人电话:","label-width":e.formLabelWidth}},[a("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.formBrand.phone,callback:function(t){e.$set(e.formBrand,"phone",t)},expression:"formBrand.phone"}})],1):e._e()],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:e.loadingFactory},on:{click:e.addFactory}},[e._v(e._s(e.editState?"修 改":"添 加"))])],1)],1)],1)},i=[],n=a("5530"),r=(a("b64b"),a("d3b7"),a("159b"),a("b0c0"),a("3ca3"),a("ddb0"),a("2b3d"),a("9861"),a("2a02")),l=a("2cd9"),s=a("4795"),c=a("2f62"),d=a("210b7"),u=a("775f"),m=a("2f88"),f={components:{AppPaging:m["a"],AppRegion:u["a"]},data:function(){return{scrollTop:0,scrollLeft:0,uploadUrl:l["b"],loadingWeb:!0,loadingQuery:!1,svalue1:"",svalue2:"",info:{isTrue:!1,isShow:!0},data:d,form:{province:"",city:"",region:"",street:""},formQuery:{factoryName:"",factoryId:"",phone:""},provinceList:[],optionsFactory:[],cityList:[],regionList:[],streetList:[],tableData:[],loadingTab:!1,allTate:20,currentPage:1,paramData:{page:1,pageSize:24},dialogFormVisible:!1,loadingFactory:!1,formBrand:{name:"",contact:"",phone:""},editId:"",formLabelWidth:"120px",imageUrl:"",editState:0,chengRegionObje:{}}},computed:Object(n["a"])({},Object(c["c"])({})),created:function(){this.provinceList=this.data,this.onSubmit(),this.getFactoryLists()},methods:{getFactoryLists:function(){var e=this;Object(r["g"])().then((function(t){200===t.code?e.optionsFactory=t.data:e.$message({message:t.message,type:"warning"})}))},getFactor:function(e){var t=this;this.loadingQuery=!0,Object(r["j"])(e).then((function(e){t.loadingQuery=!1,t.loadingWeb=!1,200===e.code?(t.loadingTab=!1,t.allTate=e.data.total,t.tableData=e.data.list,t.currentPage=e.data.pageNum):t.$message({message:e.message,type:"warning"})}))},handleSizeChange:function(e){this.paramData.pageSize=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.paramData.page=e,this.getFactor(this.paramData)},chengRegion:function(e){var t=e;this.chengRegionObje=t},onSubmit:function(){var e=this.chengRegionObje,t=Object.keys(e).length,a=Object(n["a"])(Object(n["a"])({},this.formQuery),{},{pageSize:this.paramData.pageSize,page:1});t&&(a.provinceId=e.provinceId||"",a.cityId=e.cityId||"",a.countyId=e.regionId||"",a.streetId=e.streetId||""),Object.keys(a).forEach((function(e){var t=a[e];""===t&&delete a[e]})),this.paramData=a,this.getFactor(a)},clickDele:function(e){var t=this,a={idList:[e]};this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.deleteWarehousDetail(a,e)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},deleteWarehousDetail:function(e,t){var a=this;Object(r["b"])(e).then((function(e){if(a.loadingQuery=!1,a.dialogFormVisible=!1,200===e.code){var o=a.tableData;Object(s["a"])(o,t),a.$message({message:"禁用成功",type:"success"})}else a.$message({message:e.message,type:"warning"})}))},clickEdit:function(e){this.dialogFormVisible=!0,this.editId=e,this.getWarehousDetail(e),this.editState=1},getWarehousDetail:function(e){var t=this,a={id:e};Object(r["i"])(a).then((function(e){t.loadingFactory=!1,200===e.code?t.formBrand=e.data:408!==e.code&&406!==e.code||(t.dialogFormVisible=!1)}))},addFactory:function(){this.loadingFactory=!0;var e=this.formBrand,t=Object(n["a"])({id:this.editId},e);this.updateWarehous(t)},updateWarehous:function(e){var t=this;Object(r["p"])(e).then((function(a){if(t.loadingQuery=!1,t.dialogFormVisible=!1,200===a.code){for(var o=t.tableData,i=0;i<o.length;i++)o[i].id===e.id&&(o[i].name=e.contact,o[i].phone=e.phone,o[i].contact=e.name);t.$message({message:"成功修改！",type:"success"})}else t.$message({message:a.message,type:"warning"})}))},purchase:function(){},address:function(){},handleAvatarSuccess:function(e,t){this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}},mounted:function(){},name:"Ucmanagement-factory-Warehouse",activated:function(){var e=this;setTimeout((function(){e.$refs.TableData.bodyWrapper.scrollTop=e.scrollTop,e.$refs.TableData.bodyWrapper.scrollLeft=e.scrollLeft}),60)},beforeRouteLeave:function(e,t,a){this.scrollTop=this.$refs.TableData.bodyWrapper.scrollTop,this.scrollLeft=this.$refs.TableData.bodyWrapper.scrollLeft,a()}},p=f,g=(a("dd82"),a("2877")),h=Object(g["a"])(p,o,i,!1,null,"50969304",null);t["default"]=h.exports},dd82:function(e,t,a){"use strict";a("2d80")}}]);