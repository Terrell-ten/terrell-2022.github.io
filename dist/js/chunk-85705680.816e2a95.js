(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85705680"],{"04d1":function(t,e,a){var n=a("342f"),r=n.match(/firefox\/(\d+)/i);t.exports=!!r&&+r[1]},"062d":function(t,e,a){"use strict";a.d(e,"z",(function(){return o})),a.d(e,"b",(function(){return s})),a.d(e,"I",(function(){return u})),a.d(e,"F",(function(){return c})),a.d(e,"n",(function(){return l})),a.d(e,"m",(function(){return d})),a.d(e,"o",(function(){return m})),a.d(e,"u",(function(){return h})),a.d(e,"C",(function(){return p})),a.d(e,"x",(function(){return f})),a.d(e,"y",(function(){return b})),a.d(e,"E",(function(){return g})),a.d(e,"k",(function(){return y})),a.d(e,"g",(function(){return S})),a.d(e,"l",(function(){return v})),a.d(e,"j",(function(){return w})),a.d(e,"G",(function(){return _})),a.d(e,"w",(function(){return D})),a.d(e,"K",(function(){return x})),a.d(e,"s",(function(){return k})),a.d(e,"L",(function(){return I})),a.d(e,"J",(function(){return O})),a.d(e,"H",(function(){return C})),a.d(e,"B",(function(){return j})),a.d(e,"d",(function(){return T})),a.d(e,"f",(function(){return R})),a.d(e,"A",(function(){return N})),a.d(e,"e",(function(){return $})),a.d(e,"p",(function(){return P})),a.d(e,"D",(function(){return E})),a.d(e,"r",(function(){return A})),a.d(e,"q",(function(){return M})),a.d(e,"t",(function(){return L})),a.d(e,"v",(function(){return B})),a.d(e,"h",(function(){return Q})),a.d(e,"i",(function(){return z})),a.d(e,"c",(function(){return F})),a.d(e,"a",(function(){return G}));var n=a("83c3"),r=a("4328"),i=a.n(r);function o(t){return Object(n["a"])({url:"/product/selectProductList",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/admin/data/selectByCond/I_packmaterial?pageNo=0",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/product/selectProductInventory",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/product/getReturnConfiguration",method:"get",params:t})}function l(){return Object(n["a"])({url:"/admin/factory/getFactoryList",method:"get"})}function d(t){return Object(n["a"])({url:"/admin/factory/getFactoryIdAndName",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/admin/factory/getFactoryByPrincipal",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/admin/purchase/temp/getProductMaterial",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/admin/purchase/temp/materialsOutbound",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/product/saveProduct",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/product/updateProduct",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/product/saveReturnConfiguration",method:"POST",data:t})}function y(t){return Object(n["a"])({url:"/product/deleteProductUnit",method:"post",data:i.a.stringify(t)})}function S(t){return Object(n["a"])({url:"/admin/shopper/warehouse/getWarehouseIdAndname",method:"get",params:t})}function v(t){return Object(n["a"])({url:"/product/deleteProductWdata",method:"post",data:i.a.stringify(t)})}function w(t){return Object(n["a"])({url:"/product/copyProductToNewFactory",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/product/selectProductInfo",method:"get",params:t})}function D(t){return Object(n["a"])({url:"/admin/data/execProcedure/getgood_inventory?pageNo=0",method:"post",data:t})}function x(t){return Object(n["a"])({url:"/admin/data/execProcedure/st_stock_procdct?pageNo=0",method:"post",data:t})}function k(t){return Object(n["a"])({url:"/product/isUpdate",method:"get",params:t})}function I(t){return Object(n["a"])({url:"/product/updeteProductInventory",method:"post",data:t})}function O(t){return Object(n["a"])({url:"/product/updateMaterialInventory",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/admin/data/execProcedure/st_stock_packmaterial?pageNo=0",method:"post",data:t})}function j(t){return Object(n["a"])({url:"/product/isUpdateMaterialInventory",method:"get",params:t})}function T(t){return Object(n["a"])({url:"/admin/data/selectByCond/I_product_wdata?pageNo=0",method:"post",data:t})}function R(t,e){return Object(n["a"])({url:"/admin/data/updateById/I_product_wdata?dataId="+e,method:"post",data:t})}function N(t){return Object(n["a"])({url:"/product/isUpdateMaterialInventory",method:"GET",params:t})}function $(t){return Object(n["a"])({url:"/admin/data/insert/I_product_wdata",method:"post",data:t})}function P(t){return Object(n["a"])({url:"/productionPlan/getFactoryPurchasePlanDetailList",method:"get",params:t})}function E(t){return Object(n["a"])({url:"/admin/factory/purchase/plan/purchaseStatistics",method:"get",params:t})}function A(t){return Object(n["a"])({url:"/goodsWarehouse/getInventoryList",method:"get",params:t})}function M(t){return Object(n["a"])({url:"/goodsWarehouse/getInWarehouse",method:"get",params:t})}function L(t){return Object(n["a"])({url:"/goodsOutbound/getOntWarehouse",method:"get",params:t})}function B(t){return Object(n["a"])({url:"/admin/hxhouse/gethxhouseList",method:"get",params:t})}function Q(t){return Object(n["a"])({url:"/goodsWarehouse/amendmentCurrentInventory",method:"post",data:t})}function z(t){return Object(n["a"])({url:"/admin/hxhouse/amendmentHxCurrentInventory",method:"post",data:t})}function F(t){var e={getColumns:[{nameCode:"id"},{nameCode:"data",vdata:{DISPNAME:"sku"}},{nameCode:"namecode"},{nameCode:"specification",vdata:{DISPNAME:"specif"}},{nameCode:"unit"}],Condition:[{nameCode:"nodetype",data:t.nodetype},{nameCode:"namecode",nodetype:"LIKE",data:"%"+t.namecode+"%"}]};return Object(n["a"])({url:"/admin/data/selectByCond/I_product?pageNo=0",method:"post",data:e})}function G(t){return Object(n["a"])({url:"/admin/data/execProcedure/Confirm_favtory_purchase?pageNo=0",method:"post",data:t})}},"0b42a":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return s})),a.d(e,"c",(function(){return u})),a.d(e,"b",(function(){return c}));var n=a("83c3");function r(t){return Object(n["a"])({url:"/admin/guestinfo/addressList",method:"GET",params:t})}function i(t){return Object(n["a"])({url:"/admin/service/user/getServiceUserList",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/admin/service/user/insertServiceUser",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/admin/service/user/updateServiceUserArea",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/admin/service/user/getServiceUserAreaList",method:"get",params:t})}function c(t){return Object(n["a"])({url:"/admin/service/user/deleteServiceUserArea",method:"post",params:t})}},"139d":function(t,e,a){"use strict";a("bc6f")},"211c":function(t,e,a){},"3adb":function(t,e,a){},"3f49":function(t,e,a){},4761:function(t,e,a){},"4e82":function(t,e,a){"use strict";var n=a("23e7"),r=a("e330"),i=a("59ed"),o=a("7b0b"),s=a("07fa"),u=a("577e"),c=a("d039"),l=a("addb"),d=a("a640"),m=a("04d1"),h=a("d998"),p=a("2d00"),f=a("512ce"),b=[],g=r(b.sort),y=r(b.push),S=c((function(){b.sort(void 0)})),v=c((function(){b.sort(null)})),w=d("sort"),_=!c((function(){if(p)return p<70;if(!(m&&m>3)){if(h)return!0;if(f)return f<603;var t,e,a,n,r="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(n=0;n<47;n++)b.push({k:e+n,v:a})}for(b.sort((function(t,e){return e.v-t.v})),n=0;n<b.length;n++)e=b[n].k.charAt(0),r.charAt(r.length-1)!==e&&(r+=e);return"DGBEFHACIJK"!==r}})),D=S||!v||!w||!_,x=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:u(e)>u(a)?1:-1}};n({target:"Array",proto:!0,forced:D},{sort:function(t){void 0!==t&&i(t);var e=o(this);if(_)return void 0===t?g(e):g(e,t);var a,n,r=[],u=s(e);for(n=0;n<u;n++)n in e&&y(r,e[n]);l(r,x(t)),a=r.length,n=0;while(n<a)e[n]=r[n++];while(n<u)delete e[n++];return e}})},"512ce":function(t,e,a){var n=a("342f"),r=n.match(/AppleWebKit\/(\d+)\./);t.exports=!!r&&+r[1]},"775d":function(t,e,a){"use strict";a("211c")},abff:function(t,e,a){"use strict";a("3adb")},b1a3:function(t,e,a){"use strict";a("4761")},bc6f:function(t,e,a){},c6ec:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-conent main-conent-minheight flex-main-conent"},[a("div",{staticClass:"flex-box"},[a("div",{staticClass:"flex-top"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0},model:{value:t.formQuery,callback:function(e){t.formQuery=e},expression:"formQuery"}},[a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"日期从："}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",align:"right",placeholder:"开始日期","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.starDataMax}},model:{value:t.formQuery.startDate,callback:function(e){t.$set(t.formQuery,"startDate",e)},expression:"formQuery.startDate"}}),t._v(" - "),a("el-date-picker",{staticStyle:{width:"130px"},attrs:{type:"date",align:"right",placeholder:"结束时间","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.endDataMin}},model:{value:t.formQuery.endDate,callback:function(e){t.$set(t.formQuery,"endDate",e)},expression:"formQuery.endDate"}})],1)]),a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"状态："}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},on:{change:function(e){return t.onSubmit()}},model:{value:t.formQuery.status,callback:function(e){t.$set(t.formQuery,"status",e)},expression:"formQuery.status"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),a("el-option",{attrs:{label:"待发货",value:"100506"}}),a("el-option",{attrs:{label:"待收货",value:"100516"}}),a("el-option",{attrs:{label:"全部发货",value:"100517"}}),a("el-option",{attrs:{label:"全部退货",value:"100508"}})],1)],1),a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"审核状态："}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",clearable:""},on:{change:function(e){return t.onSubmit()}},model:{value:t.formQuery.auditStatus,callback:function(e){t.$set(t.formQuery,"auditStatus",e)},expression:"formQuery.auditStatus"}},[a("el-option",{attrs:{label:"全部",value:""}}),a("el-option",{attrs:{label:"未审核",value:"102501"}}),a("el-option",{attrs:{label:"已审核",value:"102502"}})],1)],1),a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"排序字段"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{"collapse-tags":"",multiple:"",placeholder:"请选择"},model:{value:t.formQuery.sort,callback:function(e){t.$set(t.formQuery,"sort",e)},expression:"formQuery.sort"}},t._l(t.options1,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"查找字段："}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择"},model:{value:t.formQuery.type,callback:function(e){t.$set(t.formQuery,"type",e)},expression:"formQuery.type"}},t._l(t.ziduanlist,(function(t){return a("el-option",{key:t.id,attrs:{label:t.value,value:t.id}})})),1),a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:""},model:{value:t.formQuery.content,callback:function(e){t.$set(t.formQuery,"content",e)},expression:"formQuery.content"}})],1),a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"商品名称："}},[a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:""},model:{value:t.formQuery.productName,callback:function(e){t.$set(t.formQuery,"productName",e)},expression:"formQuery.productName"}})],1),t.userRoles_type?a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"收货区域筛选："}},[a("AppRegion",{ref:"child",attrs:{state:101,liWidth:"120px"},on:{valueRegion:t.chengRegion2}})],1):t.userRoles_type2?a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"负责收货区:"}},[a("AppRegiongMy",{ref:"child",attrs:{state:101,userId:t.userId,liWidth:"120px"},on:{valueRegion:t.chengRegion2}})],1):t._e(),a("el-form-item",{staticStyle:{"margin-right":"20px"},attrs:{label:"原订单号"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{clearable:""},model:{value:t.formQuery.orderCode,callback:function(e){t.$set(t.formQuery,"orderCode",e)},expression:"formQuery.orderCode"}})],1),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"primary",disabled:t.isSubmit},on:{click:t.onSubmit}},[t._v("查询")]),a("el-form-item",{staticStyle:{"margin-right":"0px"},attrs:{label:""}},[a("el-button",{staticStyle:{"margin-right":"20px","margin-left":"0"},attrs:{type:"primary"},on:{click:t.outBoundBySelected2}},[t._v("批量锁单")]),a("el-button",{staticStyle:{"margin-right":"20px","margin-left":"0"},attrs:{type:"primary"},on:{click:t.OutboundShipments2}},[t._v("合并发货")]),a("el-button",{staticStyle:{"margin-right":"20px","margin-left":"0"},attrs:{type:"primary"},on:{click:t.set_daochu_param}},[t._v("导出EXCEL")])],1)],1)],1),a("div",{staticClass:"flex-cont"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],ref:"TableData",staticClass:"tableData-box",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"100%","highlight-current-row":"","tooltip-effect":"dark","row-class-name":t.rowClassNmae},on:{"selection-change":t.handleSelectionChange,select:t.Table_Select}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center",fixed:"left"}}),a("el-table-column",{attrs:{property:"id",label:"标识",width:"50",align:"center"}}),"development"===t.nodeEnv?[a("el-table-column",{attrs:{property:"sourceOrderCode",label:"原订单号",align:"center","min-width":"250"}}),a("el-table-column",{attrs:{property:"-",label:"订单商品信息",align:"center","min-width":"540"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"table-div",staticStyle:{"text-align":"left",padding:"0 5px"}},[a("div",{staticClass:"div-fl table-div-demo ",staticStyle:{"justify-content":"flex-start"}},[a("span",{staticClass:"title"},[t._v("商品名称：")]),a("el-tooltip",{attrs:{content:e.row.namecode,placement:"top",effect:"light"}},[a("el-button",{staticClass:"namecode cont-name",attrs:{type:"text"}},[t._v(t._s(e.row.namecode))])],1)],1),a("div",{staticClass:"div-fl",staticStyle:{"align-items":"flex-start"}},[a("div",{staticClass:"table-div-demo",staticStyle:{"flex-shrink":"0"}},[a("span",{staticClass:"title"},[t._v("SKU：")]),a("span",{staticClass:"cont"},[t._v(t._s(e.row.sku))])]),a("div",{staticClass:"table-div-demo",staticStyle:{margin:"0 5px"}},[a("span",{staticClass:"title"},[t._v("规格：")]),a("span",{staticClass:"cont"},[t._v(t._s(e.row.specif))])]),a("div",{staticClass:"table-div-demo",staticStyle:{"flex-shrink":"0"}},[a("span",{staticClass:"title"},[t._v("单位：")]),a("span",{staticClass:"cont"},[t._v(t._s(e.row.unit1))])])]),a("div",{staticClass:"div-fl"},[a("div",{staticClass:"table-div-demo"},[a("span",{staticClass:"title"},[t._v("单价：")]),a("span",{staticClass:"cont"},[t._v(t._s(e.row.scalprice))])]),a("div",{staticClass:"table-div-demo"},[a("span",{staticClass:"title"},[t._v("金额：")]),a("span",{staticClass:"cont",staticStyle:{color:"red"}},[t._v("￥"+t._s(e.row.AmountNum))])]),a("div",{staticClass:"table-div-demo"},[a("span",{staticClass:"title"},[t._v("拼车费：")]),a("span",{staticClass:"cont"},[t._v(t._s(e.row.carpool))])]),a("div",{staticClass:"table-div-demo"},[a("span",{staticClass:"title"},[t._v("运费：")]),a("span",{staticClass:"cont"},[t._v(t._s(e.row.freight))])])])])]}}],null,!1,1349929571)}),a("el-table-column",{attrs:{property:"inventoryNum",label:"库存数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"scalnum",label:"订单数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"outnum",label:"锁单数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"sendnum",label:"已发数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"deliverNum",label:"供应链已发货数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"backnum",label:"退货数量",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",[t._v(t._s(e.row.backnum))])])]}}],null,!1,3726803063)})]:t._e(),"development"!=t.nodeEnv?[a("el-table-column",{attrs:{property:"sourceOrderCode",label:"原订单号",align:"center","min-width":"250"}}),a("el-table-column",{attrs:{property:"sku",label:"SKU",align:"center","min-width":"200"}}),a("el-table-column",{attrs:{property:"namecode",label:" 商品名称",align:"center",width:"200","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"specif",label:"规格",align:"center",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"inventoryNum",label:"库存数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"unit1",label:"单位",align:"center",width:"70"}}),a("el-table-column",{attrs:{property:"scalnum",label:"订单数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"outnum",label:"锁单数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"sendnum",label:"已发数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"deliverNum",label:"供应链已发货数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"backnum",label:"退货数量",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",[t._v(t._s(e.row.backnum))])])]}}],null,!1,3726803063)}),a("el-table-column",{attrs:{property:"scalprice",label:"单价",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"AmountNum",label:"金额",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"carpool",label:"拼车费",align:"center",width:"70"}}),a("el-table-column",{attrs:{property:"freight",label:"运费",align:"center",width:"70"}})]:t._e(),a("el-table-column",{attrs:{property:"customerName",label:"客户名称",align:"center",width:"120"}}),a("el-table-column",{attrs:{property:"typeName",label:"状态",align:"center"}}),a("el-table-column",{attrs:{property:"consignee",label:"收货人",align:"center",width:"120"}}),a("el-table-column",{attrs:{property:"consigneeMobile",label:"收货人手机号码",align:"center",width:"120"}}),a("el-table-column",{attrs:{property:"receiveArea",label:"收货省份",align:"center",width:"180"}}),a("el-table-column",{attrs:{property:"address2",label:"收货地址",align:"center",width:"240","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"optdate",label:"订单时间",align:"center",width:"200"}}),a("el-table-column",{attrs:{property:"auditStatus",label:"审核状态",align:"center",width:"95"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",[t._v(t._s({102501:"未审核",102502:"已审核"}[e.row.auditStatus]))])])]}}])}),a("el-table-column",{attrs:{property:"remark_remark",label:"订单备注",align:"center",width:"150"}}),a("el-table-column",{attrs:{property:"lastdate",label:"最迟交货期",align:"center","min-width":"95"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"260",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[102502===e.row.auditStatus?a("div",[a("el-button",{attrs:{type:"primary",disabled:0==e.row.isOut},nativeOn:{click:function(a){return t.outBoundBySelected(e.row,2)}}},[t._v("锁单")]),a("el-button",{attrs:{disabled:0==e.row.isSend,type:"primary"},nativeOn:{click:function(a){return t.OutboundShipments(e.row)}}},[t._v("发货")]),a("el-dropdown",{staticStyle:{"margin-left":"10px"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[t._v(" 其他"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{disabled:e.row.isGoosd,type:"primary"},nativeOn:{click:function(a){return t.clickModifyItem(e.row)}}},[t._v("修改商品")]),a("el-dropdown-item",{attrs:{disabled:e.row.outnum<=e.row.sendnum||e.row.outnum<=0,type:"primary"},nativeOn:{click:function(a){return t.Return_stock(e.row)}}},[t._v("解除锁单")])],1)],1)],1):t._e()]}}])})],2)],1),a("div",{staticClass:"flex-button"},[a("div",{staticClass:"margin-t16 text-right"},[a("AppPaging",{attrs:{total:t.allTate,pageSize:t.paramData.pageSize,currentPage:t.paramData.page},on:{handleCurrentChange:t.clickCurrentChange,handleSizeChange:t.clickSizeChange}})],1)])]),a("el-dialog",{staticStyle:{"margin-top":"15vh"},attrs:{title:"导出提示",visible:t.dialogExport,width:"30%"},on:{"update:visible":function(e){t.dialogExport=e}}},[a("span",[t._v(t._s("请在浏览器的“下载”中查看"))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){t.dialogExport=!1}}},[t._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"锁单发货详情",visible:t.dialogTableVisible,width:"70%"},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.GuestInfoRow,border:""}},[a("el-table-column",{attrs:{property:"customerName",label:"客户名称",width:"100"}}),a("el-table-column",{attrs:{property:"namecode",label:"商品名称","min-width":"200"}}),a("el-table-column",{attrs:{property:"specif",label:"规格",width:"150"}}),a("el-table-column",{attrs:{property:"unit",label:"单位",width:"60"}}),a("el-table-column",{attrs:{property:"inventoryNum",label:"库存",width:"80"}}),a("el-table-column",{attrs:{property:"outnum",label:"已锁单数",width:"80"}}),a("el-table-column",{attrs:{property:"scalnum",label:"订单数量",width:"80"}}),a("el-table-column",{attrs:{property:"sendnum",label:"已发数量",width:"80"}}),a("el-table-column",{attrs:{label:"本次发货数量",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{staticStyle:{display:"none"},attrs:{min:0},model:{value:e.row.noSendnum,callback:function(a){t.$set(e.row,"noSendnum",a)},expression:"scope.row.noSendnum"}}),a("el-input",{attrs:{type:"number",min:0},model:{value:e.row.noSendnum,callback:function(a){t.$set(e.row,"noSendnum",a)},expression:"scope.row.noSendnum"}}),e.row.noSendnum>e.row.Max_num?a("span",{staticStyle:{color:"red"}},[t._v("(超出本次可输入最大值)")]):a("span",[t._v("(最大可输入："+t._s(e.row.Max_num)+")")])]}}])}),a("el-table-column",{attrs:{property:"",label:"收货人信息","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.address.consignee)+" "+t._s(e.row.address.consigneeMobile)+" "+t._s(e.row.address.address)+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.reset_id!=e.$index?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.reset(e)}}},[t._v("设为当前地址")]):a("p",[t._v("当前收货地址")])]}}])})],1),a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"20px"},attrs:{inline:!1,"label-position":"right","label-width":"100px"},model:{value:t.currentRow2,callback:function(e){t.currentRow2=e},expression:"currentRow2"}},[a("el-row",{staticStyle:{"margin-bottom":"5px"},attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{staticStyle:{"margin-right":"30px",width:"100%"},attrs:{label:"收货人："}},[a("el-input",{attrs:{placeholder:""},model:{value:t.currentRow2.consignee,callback:function(e){t.$set(t.currentRow2,"consignee",e)},expression:"currentRow2.consignee"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"收货人电话：","label-width":"100px"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{readonly:"readonly",placeholder:""},model:{value:t.currentRow2.consigneePhone,callback:function(e){t.$set(t.currentRow2,"consigneePhone",e)},expression:"currentRow2.consigneePhone"}})],1)],1),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"详细收货地址：","label-width":"120px"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:""},model:{value:t.currentRow2.address,callback:function(e){t.$set(t.currentRow2,"address",e)},expression:"currentRow2.address"}})],1)],1)],1),a("div",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"承运公司："}},[a("LogisticsSearch",{ref:"LogisticsSearch",attrs:{value:t.currentRow2length},on:{change:t.output_logistics}})],1)],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.click_logistics()}}},[t._v(t._s((t.currentRow2length,"选择承运公司")))])],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.fahuobianpai}},[t._v("确认发货编排")]),a("el-button",{on:{click:function(e){t.dialogTableVisible=!1}}},[t._v("取 消")])],1)],1),a("div",[a("ChoiceLogistics",{ref:"ChoiceLogistics",attrs:{logisticsSync:t.logistics.sync},on:{output_logistics:t.output_logistics}})],1),a("el-dialog",{attrs:{title:"锁单",visible:t.ShuntData.sync,width:"60%","destroy-on-close":""},on:{"update:visible":function(e){return t.$set(t.ShuntData,"sync",e)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("div",{staticStyle:{"text-align":"center"}},[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.ShuntData.sync=!1}}},[t._v("取消返回")]),a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.ShipmentForm.loading,expression:"ShipmentForm.loading"}],attrs:{type:"primary",disabled:t.ShuntData.load},on:{click:function(e){return t.shunDataSubmit(2)}}},[t._v("确认锁单")])],1)])]},proxy:!0}])},[a("div",{staticStyle:{"font-size":"16px"}},[a("el-form",[a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"60%",margin:"0","margin-right":"15px"}},[a("span",{},[t._v("商品名称：")]),t._v(t._s(t.ShuntData.row.namecode))]),a("p",{staticStyle:{width:"30%",margin:"0"}},[a("span",{},[t._v("规格：")]),t._v(t._s(t.ShuntData.row.specif))]),a("p",{staticStyle:{width:"30%",margin:"0"}},[a("span",{},[t._v("单位：")]),t._v(t._s(t.ShuntData.row.unit1))])]),a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("p",[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"仓库名称：","label-width":"90px"}},[a("el-select",{staticStyle:{width:"90%"},attrs:{placeholder:"请选择"},on:{change:t.ShunDataSyncOne},model:{value:t.ShuntData.factory.warehouseIdName,callback:function(e){t.$set(t.ShuntData.factory,"warehouseIdName",e)},expression:"ShuntData.factory.warehouseIdName"}},t._l(t.ShipmentForm.list,(function(t){return a("el-option",{key:t.warehouseId,attrs:{label:t.warehouseName,value:t.warehouseId,disabled:!!t.isNoFactory}})})),1)],1)],1),a("p",{staticStyle:{width:"260px","margin-left":"20px"}},[a("span",{},[t._v("库存数：")]),t._v(t._s(t.ShuntData.row.inventoryNum))]),a("p",{staticStyle:{width:"260px"}},[a("span",{},[t._v("本次待锁单数：")]),t._v(t._s(t.ShuntData.row.noOutcount))]),a("p",{staticStyle:{width:"260px"},style:{color:t.ShuntData.num>t.ShuntData.row.noOutcount?"red":"#000"}},[a("span",{},[t._v("实际锁单数：")]),t._v(t._s(t.ShuntData.num||0))])])])],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.ShuntData.load,expression:"ShuntData.load"}],ref:"ShuntDataTable",staticStyle:{},attrs:{data:t.ShuntData.list,stripe:"",border:""},on:{"selection-change":t.ShuntSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{property:"optdate",label:"入库时间","min-width":"140"}}),a("el-table-column",{attrs:{property:"producedDate",label:"生产日期","min-width":"140"}}),a("el-table-column",{attrs:{property:"unit",label:"单位"}}),a("el-table-column",{attrs:{property:"inventory",label:"库存数"}}),a("el-table-column",{attrs:{property:"--",label:"本次锁单数",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{key:e.row.id,staticStyle:{width:"100%"},attrs:{type:"number",disabled:e.row.isSlection,"controls-position":"right"},on:{input:t.countNum},model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}}),a("el-input-number",{staticStyle:{display:"none"},attrs:{min:0,max:e.row.Maxnum},model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}}),e.row.num>e.row.inventory&&!e.row.isSlection?a("span",{staticStyle:{"font-size":"12px",color:"red"}},[t._v("本次锁单数大于库存数")]):t._e()]}}])})],1)],1)]),a("HandleModifyItem",{ref:"HandleModifyItem",attrs:{rowData:t.ModifyItemData},on:{ToUpDate:t.ToUpDate}}),a("ReturnStock",{ref:"ReturnStock",attrs:{rowData2:t.returnStockrow},on:{ToUpDate:t.ToUpDate}}),a("CustomerReturns",{ref:"CustomerReturns",attrs:{rowData2:t.returnStockrow},on:{ToUpDate:t.ToUpDate}}),a("LossReporting",{ref:"LossReporting",attrs:{rowData2:t.returnStockrow},on:{ToUpDate:t.ToUpDate}})],1)},r=[],i=a("5530"),o=(a("d81d"),a("c740"),a("d3b7"),a("159b"),a("25f0"),a("b64b"),a("4e82"),a("7db0"),a("e9c4"),a("a434"),a("2f62")),s=a("da87"),u=a("eab5"),c=a("95a0"),l=a("970d"),d=a("0b42a"),m=a("3f39"),h=a("c814"),p=a("645b"),f=a("9dce"),b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ModifyItem"},[a("el-dialog",{attrs:{visible:t.sync,title:"修改发货订单商品",width:"75%","destroy-on-close":""},on:{"update:visible":function(e){t.sync=e},open:t.init},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.sync=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitSuppler}},[t._v("确认")])],1)]},proxy:!0}])},[a("div",{staticClass:"p_demo",staticStyle:{"font-size":"16px"}},[a("div",[a("p",[a("span",{},[t._v("商品名称：")]),t._v(t._s(t.rowData.namecode))])]),a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"30%"}},[a("span",{},[t._v("SKU：")]),t._v(t._s(t.rowData.sku))]),a("p",{staticStyle:{width:"25%"}},[a("span",{},[t._v("规格：")]),t._v(t._s(t.rowData.specif))]),a("p",{staticStyle:{width:"15%"}},[a("span",{},[t._v("订单数量：")]),t._v(t._s(t.rowData.scalnum))]),a("p",{staticStyle:{width:"15%"}},[a("span",{},[t._v("销售单价：")]),t._v(t._s(t.rowData.scalprice))]),a("p",{staticStyle:{width:"10%"}},[a("span",{},[t._v("单位：")]),t._v(t._s(t.rowData.unit1))])]),a("el-form",{staticClass:"demo-form-inline",staticStyle:{"margin-top":"25px"},attrs:{"label-width":"100px","label-position":"left"}},[a("el-form-item",{staticStyle:{width:"350px",display:"inline-block","margin-right":"25px"},attrs:{label:"商品名称:","label-width":"76px"}},[a("el-input",{attrs:{clearable:""},model:{value:t.formQuery.productName,callback:function(e){t.$set(t.formQuery,"productName",e)},expression:"formQuery.productName"}})],1),a("el-form-item",{staticStyle:{width:"300px",display:"inline-block","margin-right":"25px"},attrs:{label:"sku","label-width":"40px"}},[a("el-input",{attrs:{clearable:""},model:{value:t.formQuery.skuCode,callback:function(e){t.$set(t.formQuery,"skuCode",e)},expression:"formQuery.skuCode"}})],1),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 查询")])],1)],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],ref:"supplerTable",staticStyle:{},attrs:{data:t.tableData,stripe:"",border:"","max-height":"360"}},[a("el-table-column",{attrs:{type:"index",label:"",width:"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{key:e.$index,attrs:{label:e.$index},on:{change:t.supplerRadio},model:{value:t.radioIdex,callback:function(e){t.radioIdex=e},expression:"radioIdex"}},[t._v(" "+t._s(" ")+" ")])]}}])}),a("el-table-column",{attrs:{property:"name",label:"商品名称","show-overflow-tooltip":!0,"min-width":"200px"}}),a("el-table-column",{attrs:{property:"skuCode",label:"sku",width:"200px"}}),a("el-table-column",{attrs:{property:"specification",label:"规格","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"num_C",label:"库存数量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.productUnits[e.row.unitIndex].num)+" ")]}}])}),a("el-table-column",{attrs:{property:"factoryName",label:"工厂","show-overflow-tooltip":!0}})],1),a("div",{staticClass:"margin-t16 text-right",staticStyle:{display:"block"}},[a("AppPaging",{attrs:{layout:"prev, pager, next",total:t.total,currentPage:t.paramData.page,pageSize:t.paramData.pageSize},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.clickCurrentChange}})],1)],1)])],1)},g=[],y=(a("a9e3"),a("2f88")),S={components:{AppPaging:y["a"]},props:{rowData:{type:Object||Array,default:{}}},data:function(){return{total:0,radioIdex:"",formQuery:{productName:"",skuCode:""},loadingTab:!1,paramData:{page:1,pageSize:24},sync:!1,tableData:[],supplerData:{}}},created:function(){},methods:{supplerRadio:function(t){},submitSuppler:function(){var t=this;if(""!==this.radioIdex){var e=this.tableData[this.radioIdex],a={orderDetailId:this.rowData.id,newProductId:e.id};Object(c["w"])(a).then((function(e){200===e.code&&(t.$message.success(e.message),t.$emit("ToUpDate"),t.sync=!1)}))}else this.$message.error("请选择要修改的商品！")},handleSizeChange:function(t){this.paramData.pageSize=t,this.clickCurrentChange(1)},clickCurrentChange:function(t){this.paramData.page=t,this.getTabel(this.paramData)},onSubmit:function(){var t=Object(i["a"])(Object(i["a"])({},this.paramData),this.formQuery);Object.keys(t).forEach((function(e){var a=t[e];""===a&&delete t[e]})),this.getTabel(t)},getTabel:function(t){var e=this;this.paramData=t,this.loadingTab=!0,Object(c["q"])(t).then((function(t){e.loadingTab=!1,200===t.code&&(t.data.list.length||e.$message.error("没有查找到对应商品！"),e.total=t.data.total,t.data.list.forEach((function(t){for(var a in t.unitIndex=0,t.productUnits)if(t.productUnits[a].namecode===e.rowData.unit1){t.unitIndex=Number(a);break}})),e.tableData=t.data.list)}))},init:function(){this.paramData.productId=this.rowData.data,this.paramData.unit=this.rowData.unit1,this.radioIdex="",this.onSubmit()}}},v=S,w=(a("abff"),a("2877")),_=Object(w["a"])(v,b,g,!1,null,null,null),D=_.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"returnStock suit-box"},[a("el-dialog",{attrs:{visible:t.sync,title:"解除锁单",width:"60%","destroy-on-close":""},on:{"update:visible":function(e){t.sync=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.sync=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitSuppler}},[t._v("确认")])],1)]},proxy:!0}])},[t.rowData?a("div",{staticClass:"p_demo",staticStyle:{"font-size":"16px","margin-bottom":"15px"}},[a("div",[a("p",[a("span",{},[t._v("商品名称：")]),t._v(t._s(t.rowData.namecode))])]),a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"30%"}},[a("span",{},[t._v("SKU：")]),t._v(t._s(t.rowData.sku))]),a("p",{staticStyle:{width:"25%"}},[a("span",{},[t._v("规格：")]),t._v(t._s(t.rowData.specif))]),a("p",{staticStyle:{width:"15%"}},[a("span",{},[t._v("订单数量：")]),t._v(t._s(t.rowData.scalnum))]),a("p",{staticStyle:{width:"10%"}},[a("span",{},[t._v("单位：")]),t._v(t._s(t.rowData.unit1))])]),a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"18%"}},[a("span",{},[t._v("锁单数量：")]),t._v(t._s(t.rowData.outnum))]),a("p",{staticStyle:{width:"18%"}},[a("span",{},[t._v("发货数量：")]),t._v(t._s(t.rowData.sendnum))]),a("p",{staticStyle:{width:"18%"}},[a("span",{},[t._v("退货数量：")]),t._v(t._s(t.rowData.backnum))]),a("p",{staticStyle:{width:"20%"}},[a("span",{},[t._v("出库未发货数量：")]),t._v(t._s(t.num_2))]),a("p",{style:t.num>t.num_2?"width: 20%;color:red;":"width: 20%;"},[a("span",{},[t._v("当前退回库存合计：")]),t._v(t._s(t.num))])])]):t._e(),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],ref:"supplerTable",staticStyle:{},attrs:{data:t.tableData,stripe:"",border:"","max-height":"360"},on:{"selection-change":t.ShuntSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.shipmentSelec}}),a("el-table-column",{attrs:{property:"warehouseName",label:"仓库名称"}}),a("el-table-column",{attrs:{property:"num",label:"锁单数量",width:"100px"}}),a("el-table-column",{attrs:{property:"backcount",label:"已解锁数",width:"100px"}}),a("el-table-column",{attrs:{property:"outCount",label:"已发货数",width:"100px"}}),a("el-table-column",{attrs:{property:"optdate",label:"锁单时间",align:"center",width:"160px"}}),a("el-table-column",{attrs:{property:"producedDate",label:"生产日期",align:"center"}}),a("el-table-column",{attrs:{property:"maxNum",label:"可解锁数量"}}),a("el-table-column",{attrs:{property:"unit_C",label:"解锁数量",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{key:e.row.id,class:{numberRed:!e.row.isSlection&&t.num>t.num_2},staticStyle:{width:"100%"},attrs:{type:"number",disabled:e.row.isSlection,"controls-position":"right"},on:{input:function(e){return t.countNum()}},model:{value:e.row.num2,callback:function(a){t.$set(e.row,"num2",a)},expression:"scope.row.num2"}}),a("el-input-number",{staticStyle:{display:"none"},attrs:{max:e.row.maxNum,min:0},model:{value:e.row.num2,callback:function(a){t.$set(e.row,"num2",a)},expression:"scope.row.num2"}}),e.row.num2>e.row.num&&!e.row.isSlection?a("span",{staticStyle:{"font-size":"12px",color:"red"}},[t._v("本次退回库存数不能大于锁单数")]):t._e()]}}])})],1)],1)])],1)},k=[],I={components:{},props:{rowData2:{type:Object||Array,default:{}}},data:function(){return{rowData:{namecode:"",sku:"",specif:"",scalnum:"",scalprice:"",unit1:"",outnum:"",sendnum:"",backnum:"",num2:0,num:0},total:0,num:0,num_2:0,radioIdex:"",formQuery:{productName:"",skuCode:""},loadingTab:!1,paramData:{page:1,pageSize:24},sync:!1,tableData:[],supplerData:{},ShuntSelecArr:[],ShuntSelecId:[]}},created:function(){},computed:Object(i["a"])({},Object(o["c"])({roles:"roles",userId:"user/userId",name:"user/name"})),methods:{shipmentSelec:function(t){return t.num>t.backcount},init:function(t){var e=t;this.num_2=(1e4*e.outnum-1e4*e.sendnum)/1e4,this.rowData=e,this.getTabel()},getTabel:function(){var t=this;Object(c["j"])({orderDetailId:this.rowData.id}).then((function(e){200===e.code&&(t.tableData=[],e.data.forEach((function(e){e.num2=e.noBackNum,e.num2=e.num2>t.num_2?t.num_2:e.num2,e.isSlection=!0,e.maxNum=e.noBackNum})),t.tableData=e.data,t.sync=!0)}))},ShuntSelectionChange:function(t){var e=this;this.ShuntSelecArr=t||[],this.ShuntSelecId=[],this.num=0,this.tableData.forEach((function(t){t.isSlection=!0})),this.ShuntSelecArr.forEach((function(t){e.ShuntSelecId.push(t.id),t.isSlection=!1})),this.countNum()},submitSuppler:function(){var t=this;if(this.ShuntSelecId.length<=0)this.$message.error("请选择要操作的数据");else{var e=[];for(var a in this.ShuntSelecArr){var n=this.ShuntSelecArr[a];if(0===n.num2){e.push("填写数量不能为0");break}}if(e.length)this.$message.error(e.toString());else{var r=[],i=0;this.ShuntSelecArr.forEach((function(e){i=Math.round(t.count_price2(e.num2,t.rowData.unitbit)),e.num2===e.maxNum&&(i=e.standardNum),r.push(e.id+"-"+i)}));var o={I_ids:r.toString(),I_optuser:this.userId,I_sId:this.rowData.id,I_inType:100704};this.num>this.num_2?this.$confirm("输入的值总和比出库未发货的数量还大，无法退回库存","警告",{confirmButtonText:"确定",type:"warning",showCancelButton:!1}).then((function(){})).catch((function(){})):this.set_Return_stock_api(o)}}},count_price2:function(t,e){return t<=0||0===e?0:1===e?t:e>0?Math.ceil(t*e*1e4)/1e4:Math.ceil(t/e*1e4)/1e4*-1},set_Return_stock_api:function(t){var e=this;Object(c["d"])(t).then((function(t){200===t.code&&(t.data[0].flag>0?(t.data[0].flag>=e.ShuntSelecArr.length?e.$message.success("操作成功"):e.$message.success(t.data[0].result),e.sync=!1,e.$emit("ToUpDate")):e.$message.success(t.data[0].result))}))},countNum:function(){var t=this,e=0,a=0;this.tableData.length&&this.tableData.forEach((function(n){if(!n.isSlection){var r=Math.round(t.count_price2(n.num2,t.rowData.unitbit));n.num2===n.maxNum&&(r=n.standardNum),a=(1e5*a+1e5*r)/1e5,e=(1e5*e+1e5*n.num2)/1e5}})),this.num=e,e>this.num_2&&(this.num=this.count_price(a,this.rowData.unitbit))},supplerRadio:function(t){},handleSizeChange:function(t){this.paramData.pageSize=t,this.clickCurrentChange(1)},clickCurrentChange:function(t){this.paramData.page=t,this.getTabel(this.paramData)},onSubmit:function(){var t=Object(i["a"])(Object(i["a"])({},this.paramData),this.formQuery);Object.keys(t).forEach((function(e){var a=t[e];""===a&&delete t[e]})),this.getTabel(t)}}},O=I,C=(a("139d"),Object(w["a"])(O,x,k,!1,null,"41d6ce26",null)),j=C.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customerReturns suit-box"},[a("el-dialog",{attrs:{visible:t.sync,title:"退货申请",width:"60%","destroy-on-close":""},on:{"update:visible":function(e){t.sync=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.sync=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitSuppler}},[t._v("确认申请")])],1)]},proxy:!0}])},[t.rowData?a("div",{staticClass:"p_demo",staticStyle:{"font-size":"16px","margin-bottom":"15px"}},[a("div",[a("p",[a("span",{},[t._v("商品名称：")]),t._v(t._s(t.rowData.namecode))])]),a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"30%"}},[a("span",{},[t._v("SKU：")]),t._v(t._s(t.rowData.sku))]),a("p",{staticStyle:{width:"25%"}},[a("span",{},[t._v("规格：")]),t._v(t._s(t.rowData.specif))]),a("p",{staticStyle:{width:"15%"}},[a("span",{},[t._v("订单数量：")]),t._v(t._s(t.rowData.scalnum))]),a("p",{staticStyle:{width:"10%"}},[a("span",{},[t._v("单位：")]),t._v(t._s(t.rowData.unit1))])]),a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"18%"}},[a("span",{},[t._v("锁单数量：")]),t._v(t._s(t.rowData.outnum))]),a("p",{staticStyle:{width:"18%"}},[a("span",{},[t._v("发货数量：")]),t._v(t._s(t.rowData.sendnum))]),a("p",{staticStyle:{width:"20%"}},[a("span",{},[t._v("可申请退货数：")]),t._v(t._s(t.num_3))])])]):t._e(),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],ref:"supplerTable",staticStyle:{},attrs:{data:t.tableData,stripe:"",border:"","max-height":"360"},on:{"selection-change":t.ShuntSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.shipmentSelec}}),a("el-table-column",{attrs:{property:"warehouseName",label:"仓库名称"}}),a("el-table-column",{attrs:{property:"num",label:"锁单数量",width:"100px"}}),a("el-table-column",{attrs:{property:"backcount",label:"已退数量",width:"100px"}}),a("el-table-column",{attrs:{property:"optdate",label:"锁单时间",align:"center",width:"160px"}}),a("el-table-column",{attrs:{property:"producedDate",label:"生产日期",align:"center"}}),a("el-table-column",{attrs:{property:"maxNum",label:"可退数量"}}),a("el-table-column",{attrs:{property:"unit_C",label:"退货数量",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{key:e.row.id,class:{numberRed:!e.row.isSlection&&t.num>t.num_3},staticStyle:{width:"100%"},attrs:{type:"number",disabled:e.row.isSlection,"controls-position":"right"},on:{input:function(e){return t.countNum()}},model:{value:e.row.num2,callback:function(a){t.$set(e.row,"num2",a)},expression:"scope.row.num2"}}),a("el-input-number",{staticStyle:{display:"none"},attrs:{min:0},model:{value:e.row.num2,callback:function(a){t.$set(e.row,"num2",a)},expression:"scope.row.num2"}}),e.row.num2>e.row.maxNum&&!e.row.isSlection?a("span",{staticStyle:{"font-size":"12px",color:"red"}},[t._v("输入值大于可退数量")]):t._e()]}}])})],1),a("p",{staticStyle:{"margin-top":"15px"}},[t._v("退货数合计："+t._s(t.num)+" "),t.num>t.num_3?a("span",{staticStyle:{color:"red"}},[t._v(" ( 合计退货数量大于可退货总数 ) ")]):t._e()])],1)])],1)},R=[],N={components:{},props:{rowData2:{type:Object||Array,default:{}}},data:function(){return{changeRadioId:"",rowData:{namecode:"",sku:"",specif:"",scalnum:"",scalprice:"",unit1:"",outnum:"",sendnum:"",backnum:"",num2:0,num:0},total:0,num:0,num_2:0,num_3:0,radioIdex:"",formQuery:{productName:"",skuCode:""},loadingTab:!1,paramData:{page:1,pageSize:24},sync:!1,tableData:[],supplerData:{},ShuntSelecArr:[],ShuntSelecId:[]}},created:function(){},computed:Object(i["a"])({},Object(o["c"])({roles:"roles",userId:"user/userId",name:"user/name"})),methods:{shipmentSelec:function(t){return t.num>t.backcount},init:function(t){var e=t;this.num=0,this.changeRadioId="",this.num_2=(1e4*e.outnum-1e4*e.sendnum)/1e4,this.num_3=e.backnum,this.rowData=e,this.getTabel()},getTabel:function(){var t=this;Object(c["j"])({orderDetailId:this.rowData.id}).then((function(e){200===e.code&&(t.tableData=[],e.data.forEach((function(e){e.num2=(1e4*e.num-1e4*e.backcount)/1e4,e.num2=e.num2>t.num_3?t.num_3:e.num2,e.isSlection=!0,e.maxNum=(1e4*e.num-1e4*e.backcount)/1e4})),t.tableData=e.data,t.sync=!0)}))},changeRadio:function(t){var e=this;this.tableData.forEach((function(a){a.isSlection=!0,a.id===t&&(a.isSlection=!1,e.ShuntSelecArr=a||[],e.ShuntSelecId=[a.id])}))},ShuntSelectionChange:function(t){var e=this;this.ShuntSelecArr=t||[],this.ShuntSelecId=[],this.num=0,this.tableData.forEach((function(t){t.isSlection=!0})),this.ShuntSelecArr.forEach((function(t){e.ShuntSelecId.push(t.id),t.isSlection=!1})),this.countNum()},submitSuppler:function(){var t=this;if(this.ShuntSelecId.length<=0)this.$message.error("请选择要操作的数据");else{var e=[];for(var a in this.ShuntSelecArr){var n=this.ShuntSelecArr[a];if(0===n.num2){e.push("填写数量不能为0");break}if(n.num2>n.maxNum){e.push("检查到有退货数大于可退货数");break}}if(this.num>this.num_3&&e.push("合计退货数量大于可退货总数"),e.length)this.$message.error(e.toString());else{var r=[],i=0;this.ShuntSelecArr.forEach((function(e){i=Math.round(t.count_price2(e.num2,t.rowData.unitbit)),e.num2===e.maxNum&&(i=e.standardNum),r.push(e.id+"-"+i)}));var o={I_ids:r.toString(),I_optuser:this.userId,I_sId:this.rowData.id,I_inType:103502};this.num>this.num_3?this.$confirm("输入的值总和比客户退货数量还大，无法申请退货退回","警告",{confirmButtonText:"确定",type:"warning",showCancelButton:!1}).then((function(){})).catch((function(){})):this.set_Return_stock_api(o)}}},count_price2:function(t,e){return t<=0||0===e?0:1===e?t:e>0?Math.ceil(t*e*1e4)/1e4:Math.ceil(t/e*1e4)/1e4*-1},set_Return_stock_api:function(t){var e=this;Object(c["d"])(t).then((function(t){200===t.code&&(t.data[0].flag>0?(t.data[0].flag>=e.ShuntSelecArr.length?e.$message.success("操作成功"):e.$message.warning(t.data[0].result),e.sync=!1,e.$emit("ToUpDate")):e.$message.warning(t.data[0].result))}))},countNum:function(){var t=this,e=0,a=0;this.tableData.length&&this.tableData.forEach((function(n){if(!n.isSlection){var r=Math.round(t.count_price2(n.num2,t.rowData.unitbit));n.num2===n.maxNum&&(r=n.standardNum),a=(1e5*a+1e5*r)/1e5,e=(1e5*e+1e5*n.num2)/1e5}})),this.num=e,e>this.num_3&&(this.num=this.count_price(a,this.rowData.unitbit))},supplerRadio:function(t){},handleSizeChange:function(t){this.paramData.pageSize=t,this.clickCurrentChange(1)},clickCurrentChange:function(t){this.paramData.page=t,this.getTabel(this.paramData)},onSubmit:function(){var t=Object(i["a"])(Object(i["a"])({},this.paramData),this.formQuery);Object.keys(t).forEach((function(e){var a=t[e];""===a&&delete t[e]})),this.getTabel(t)}}},$=N,P=(a("f7a5"),Object(w["a"])($,T,R,!1,null,"d2477212",null)),E=P.exports,A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customerReturns suit-box"},[a("el-dialog",{attrs:{visible:t.sync,title:"发货添加报损单",width:"50%","destroy-on-close":""},on:{"update:visible":function(e){t.sync=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",[a("span",{staticStyle:{color:"#999","font-size":"14px"}},[t._v("备注说明：")]),a("el-input",{staticStyle:{width:"420px"},attrs:{placeholder:"请输入报损的原因"},model:{value:t.value_s,callback:function(e){t.value_s=e},expression:"value_s"}})],1),a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.sync=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitSuppler}},[t._v("添 加 报 损")])],1)])]},proxy:!0}])},[t.rowData?a("div",{staticClass:"p_demo",staticStyle:{"font-size":"16px","margin-bottom":"15px"}},[a("div",[a("p",[a("span",{},[t._v("商品名称：")]),t._v(t._s(t.rowData.namecode))])]),a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"30%"}},[a("span",{},[t._v("SKU：")]),t._v(t._s(t.rowData.sku))]),a("p",{staticStyle:{width:"25%"}},[a("span",{},[t._v("规格：")]),t._v(t._s(t.rowData.specif))]),a("p",{staticStyle:{width:"15%"}},[a("span",{},[t._v("订单数量：")]),t._v(t._s(t.rowData.scalnum))]),a("p",{staticStyle:{width:"10%"}},[a("span",{},[t._v("单位：")]),t._v(t._s(t.rowData.unit1))])]),a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"18%"}},[a("span",{},[t._v("锁单数量：")]),t._v(t._s(t.rowData.outnum))]),a("p",{staticStyle:{width:"18%"}},[a("span",{},[t._v("发货数量：")]),t._v(t._s(t.rowData.sendnum))]),a("p",{staticStyle:{width:"18%"}},[a("span",{},[t._v("质量问题退回数：")]),t._v(t._s(t.rowData.lbacknum))])])]):t._e(),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],ref:"supplerTable",staticStyle:{},attrs:{data:t.tableData,stripe:"",border:"","max-height":"360"},on:{"selection-change":t.ShuntSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.shipmentSelec}}),a("el-table-column",{attrs:{property:"warehouseName",label:"仓库名称"}}),a("el-table-column",{attrs:{property:"num",label:"锁单数量",width:"100px"}}),a("el-table-column",{attrs:{property:"optdate",label:"锁单时间",align:"center",width:"160px"}}),a("el-table-column",{attrs:{property:"producedDate",label:"生产日期",align:"center"}}),a("el-table-column",{attrs:{property:"unit_C",label:"退货数量",width:"220px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{key:e.row.id,class:{numberRed:!e.row.isSlection&&e.row.num2>e.row.maxNum},staticStyle:{width:"100%"},attrs:{type:"number",disabled:e.row.isSlection,"controls-position":"right"},on:{input:function(e){return t.countNum()}},model:{value:e.row.num2,callback:function(a){t.$set(e.row,"num2",a)},expression:"scope.row.num2"}}),a("el-input-number",{staticStyle:{display:"none"},attrs:{min:0},model:{value:e.row.num2,callback:function(a){t.$set(e.row,"num2",a)},expression:"scope.row.num2"}}),e.row.num2>e.row.maxNum&&!e.row.isSlection?a("span",{staticStyle:{"font-size":"12px",color:"red"}},[t._v("报损数超过当前锁单数量")]):t._e()]}}])})],1)],1)])],1)},M=[],L={components:{},props:{rowData2:{type:Object||Array,default:{}}},data:function(){return{value_s:"",changeRadioId:"",rowData:{namecode:"",sku:"",specif:"",scalnum:"",scalprice:"",unit1:"",outnum:"",sendnum:"",backnum:"",num2:0,num:0},total:0,num:0,num_2:0,num_3:0,radioIdex:"",formQuery:{productName:"",skuCode:""},loadingTab:!1,paramData:{page:1,pageSize:24},sync:!1,tableData:[],supplerData:{},ShuntSelecArr:[],ShuntSelecId:[]}},created:function(){},computed:Object(i["a"])({},Object(o["c"])({roles:"roles",userId:"user/userId",name:"user/name"})),methods:{shipmentSelec:function(t){return t.num>t.backcount},init:function(t){var e=t;this.num=0,this.changeRadioId="",this.value_s="",this.num_2=(1e4*e.outnum-1e4*e.sendnum)/1e4,this.num_3=e.lbacknum,this.rowData=e,this.getTabel()},getTabel:function(){var t=this;Object(c["j"])({orderDetailId:this.rowData.id}).then((function(e){200===e.code&&(t.tableData=[],e.data.forEach((function(t){t.num2=0,t.isSlection=!0,t.maxNum=t.num})),t.tableData=e.data,t.sync=!0)}))},changeRadio:function(t){var e=this;this.tableData.forEach((function(a){a.isSlection=!0,a.id===t&&(a.isSlection=!1,e.ShuntSelecArr=a||[],e.ShuntSelecId=[a.id])}))},ShuntSelectionChange:function(t){var e=this;this.ShuntSelecArr=t||[],this.ShuntSelecId=[],this.num=0,this.tableData.forEach((function(t){t.isSlection=!0})),this.ShuntSelecArr.forEach((function(t){e.ShuntSelecId.push(t.id),t.isSlection=!1})),this.countNum()},submitSuppler:function(){var t=this;if(this.ShuntSelecId.length<=0)this.$message.error("请选择要操作的数据");else{var e=[];for(var a in this.ShuntSelecArr){var n=this.ShuntSelecArr[a];if(0===n.num2){e.push("填写数量不能为0");break}if(n.num2>n.maxNum){e.push("报损数超过当前锁单数量");break}}if(e.length)this.$message.error(e.toString());else{var r=[],i=0;this.ShuntSelecArr.forEach((function(e){i=Math.round(t.count_price2(e.num2,t.rowData.unitbit)),e.num2===e.maxNum&&(i=e.standardNum),r.push(e.sourceid+"-"+i)}));var o={I_ids:r.toString(),I_optuser:this.userId,I_sId:this.value_s,I_outType:102001};this.num>this.num_3?this.$confirm("输入的报损数比质量问题退回的数量还大","警告",{confirmButtonText:"确定",type:"warning",showCancelButton:!1}).then((function(){})).catch((function(){})):this.set_Return_stock_Reporting(o)}}},count_price2:function(t,e){return t<=0||0===e?0:1===e?t:e>0?Math.ceil(t*e*1e4)/1e4:Math.ceil(t/e*1e4)/1e4*-1},set_Return_stock_Reporting:function(t){var e=this;Object(c["c"])(t).then((function(t){200===t.code&&(t.data[0].flag>0?(t.data[0].flag>=e.ShuntSelecArr.length?e.$message.success("操作成功"):e.$message.warning(t.data[0].result),e.sync=!1,e.$emit("ToUpDate")):e.$message.warning(t.data[0].result),t.flag||e.$message.warning(t.message))}))},countNum:function(){var t=this,e=0,a=0;this.tableData.length&&this.tableData.forEach((function(n){if(!n.isSlection){var r=Math.round(t.count_price2(n.num2,t.rowData.unitbit));n.num2===n.maxNum&&(r=n.standardNum),a=(1e5*a+1e5*r)/1e5,e=(1e5*e+1e5*n.num2)/1e5}})),this.num=e,e>this.num_3&&(this.num=this.count_price(a,this.rowData.unitbit))},supplerRadio:function(t){},handleSizeChange:function(t){this.paramData.pageSize=t,this.clickCurrentChange(1)},clickCurrentChange:function(t){this.paramData.page=t,this.getTabel(this.paramData)},onSubmit:function(){var t=Object(i["a"])(Object(i["a"])({},this.paramData),this.formQuery);Object.keys(t).forEach((function(e){var a=t[e];""===a&&delete t[e]})),this.getTabel(t)}}},B=L,Q=(a("b1a3"),Object(w["a"])(B,A,M,!1,null,"34c249c3",null)),z=Q.exports,F=a("062d"),G={components:{AppPaging:y["a"],LossReporting:z,ReturnStock:j,CustomerReturns:E,LogisticsSearch:p["a"],ChoiceLogistics:f["a"],HandleModifyItem:D,AppRegiongMy:h["a"],AppRegion:m["a"]},data:function(){return{nodeEnv:"production",scrollTop:0,scrollLeft:0,factoryId_arr:[1],chengRegionObje:{},chengRegionObje2:{},paramData:{page:1,pageSize:24},tableData:[],formQuery:{customerName:"",value2:"",productName:"",status:"100506",auditStatus:"",skuCode:"",sort:[],type:1,content:""},batchList:[],chenckeList:[],dialogExport:!1,msgobox:null,chengRegionObje6:{},returnStockrow:{},WarehousingData:{sync:!1,row:{},load:!1,num:0},ShuntData:{sync:!1,row:{},goods:{},factory:{},list:[],seleId:[],load:!1,num:0},ShuntSelecId:[],ShuntSelecArr:[],factoryData:[],ModifyItemData:{},userAreaList:[],AreaId:"",isSubmit:!1,chenckeCheckout:[],tableData9_data:[],tableData9_index:"",currentRow3:[],up_currentRow3:[],logistics:{sync:!1,No_id:""},ziduanlist:[{id:1,value:"SKU"},{id:2,value:"客户名称"},{id:3,value:"手机号码"},{id:5,value:"收货人"},{id:6,value:"收货人手机号码"}],options1:[{value:"t1.sourceid",label:"原订单号"},{value:"t.optdate",label:"订单日期"},{value:"t1.namecode",label:"客户名称"},{value:"t4.rela",label:"发货区域"},{value:"t.data",label:"商品"}],infotitle:"未选中收货人",businessArea:"",chengRegionObje4:{},userlist:[],currentRow2length:"",allTate2:24,currentPage2:1,GuestInfoRow9:[],tableData9:[],input:"",sendnumNow:"",GuestInfoRow:[],location:[],options:[],loadingTab:!1,optionsGoods:[],allTate:24,currentPage:1,allTate3:0,currentPage3:1,outerVisible:!1,ExportHints:"",idList:[],dialogPromptDelivery:!1,DeliveryForm:{outnum:""},optionsName:[],outcount:"",DeliveryList:[],DeliveryInput:!1,dialogDelivery:!1,max_history:10,historyList:[],dialogTableVisible:!1,gridData:[],currentRow2:[],Express:{formQuery:{},paramData:{page:1,pageSize:24}},ShipmentForm:{radio:0,sync:!1,title:"锁单",dataID:{},row:{},list:[],loading:!1,formQuery:{},paramData:{},tableSelection:[],indexNO_arr:[]},buttonPermissions:[],reset_id:0}},computed:Object(i["a"])({},Object(o["c"])({roles:"roles",userId:"user/userId",name:"user/name"})),created:function(){var t=this.roles[0].buttonPermissions;this.buttonPermissions=this.roles[0].buttonPermissions,this.userRoles_type=!1,this.userRoles_type2=!1,t.indexOf(10035)>=0&&(this.userRoles_type=!0),t.indexOf(10042)>=0&&(this.userRoles_type2=!0),this.provinceList=this.data,this.userRoles_type?this.onSubmit():this.getTables_isuser(),this.getFactory()},methods:{set_daochu_param:function(){var t=this,e=this.$createElement;if(this.chenckeList.length){var a=this.chenckeList.map((function(t){return t.id})),n={orderDetailIds:a};this.$msgbox({title:"请选择导出的类型",message:e("div",{style:"text-align: center;"},[e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(){return t.set_daochu(n)}}},["只导出选择的"]),e("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(){return t.set_daochu(t.paramData)}}},["按当前查询条件导出"])]),showConfirmButton:!1,showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(t){}))}else this.$msgbox({title:"提示",message:"你确定要根据当前条件导出所有数据吗？",showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(e){t.set_daochu(t.paramData)})).catch((function(){}))},set_daochu:function(t){var e=this;this.$msgbox.close(),t.page&&(t.page=1),t.pageSize&&(t.pageSize=this.allTate),this.ExcelLoad=!0,Object(s["d"])("/admin/excel/exportOutboundShipments",t).then((function(t){e.ExcelLoad=!1,e.ObtainExcel(t,"发货出库列表 "),e.dialogExport=!0}))},rowClassNmae:function(t){var e=t.row;if(this.chenckeList.findIndex((function(t){return e.id===t.id}))>=0)return"selecCss"},getTables_isuser:function(){this.formQuery.userId=this.userId,this.onSubmit()},loss_Reporting:function(t){this.returnStockrow=t,this.$refs["LossReporting"].init(t)},Customer_Returns:function(t){this.returnStockrow=t,this.$refs["CustomerReturns"].init(t)},starDataMax:function(t){if(this.formQuery.endDate)return t.getTime()>=Date.parse(this.formQuery.endDate)},endDataMin:function(t){if(this.formQuery.startDate)return t.getTime()<=Date.parse(this.formQuery.startDate)-864e5},count_price:function(t,e){return t<=0||0===e?0:1===e?t:e>0?Math.ceil(t/e*1e4)/1e4:Math.ceil(t*e*1e4)/1e4*-1},count_price2:function(t,e){return t<=0||0===e?0:1===e?t:e>0?Math.ceil(t*e*1e4)/1e4:Math.ceil(t/e*1e4)/1e4*-1},Return_stock:function(t){this.returnStockrow=t,this.$refs["ReturnStock"].init(t)},kafizhon:function(){return this.$confirm("功能开发中...","提示",{confirmButtonText:"确定"}).then((function(){})),!1},shunDataSubmit:function(){var t=this;if(this.ShuntSelecArr.length<=0)this.$message.error("请选择要修改的数据");else{var e="",a=[];if(this.ShuntSelecArr.forEach((function(n){n.num<=0&&(e="填写锁单数不能为0");var r=Math.round(t.count_price2(n.num,t.ShipmentForm.row.unitbit)),i=n.id+"-"+r;a.push(i)})),this.ShuntData.num>this.ShuntData.row.noOutcount&&(e="锁单总数不能大于待锁单数"),""===e){a=a.toString();var n={I_ids:a,I_optuser:this.userId,I_sId:this.ShipmentForm.row.id,I_outType:100902};this.get_m3_goods_warehouse_list(n)}else this.$message.error(e)}},get_warehousesAreOutOfstock:function(t,e){var a=this,n={};for(var r in this.ShipmentForm.list){var i=this.ShipmentForm.list[r];if(i.warehouseId===this.ShuntData.factory.warehouseId){n=i;break}}var o={id:this.ShuntData.row.id,factoryId:n.factoryId};this.loadingWeb=!0,Object(c["z"])(o).then((function(e){200===e.code&&(a.loadingWeb=!1,a.$message({message:"操作成功",type:"success"}),1===t&&(a.ToUpDate(),a.ShuntData.row.inventoryNum=n.inventory,a.ShuntData.row.data=n.productId,a.ShuntData.row.warehouseId=n.warehouseId,a.ShunDataSync()))}))},get_m3_goods_warehouse_list:function(t){var e=this;Object(c["u"])(t).then((function(t){200===t.code&&(t.data[0].flag>0?(t.data[0].flag>=e.ShuntSelecArr.length?e.$message.success("操作成功"):e.$message.success(t.data[0].result),e.ShuntData.sync=!1,e.ToUpDate()):e.$message.success(t.data[0].result))}))},submitShipment_v2:function(t){this.ShipmentForm.tableSelection.length<=0||!t?this.$message.error("请选择要锁单的仓库"):(this.ShuntData.row=this.ShipmentForm.row,this.ShuntData.factory={factoryName:t.factoryName,factoryId:t.factoryId,warehouseId:t.warehouseId},this.ShunDataSync())},ShunDataSyncOne:function(t){var e=this;this.ShuntData.factory.warehouseId=t,this.$confirm("选择其他仓库，订单将更换为其他仓库锁单，是否继续？","提示",{confirmButtonText:"确定"}).then((function(){e.get_warehousesAreOutOfstock(1)})).catch((function(){e.ShuntData.factory.warehouseId=e.ShuntData.row.warehouseId,e.ShuntData.factory.warehouseIdName=e.ShuntData.row.warehouseIdName}))},ShunDataSync:function(){var t=this;this.ShuntData.sync=!0,this.ShuntData.load=!0,this.ShuntData.num=0;var e={orderId:this.ShuntData.row.id,productId:this.ShuntData.row.data,warehouseId:this.ShuntData.factory.warehouseId};Object(c["k"])(e).then((function(e){if(200===e.code){t.ShuntData.load=!1;var a=t.ShuntData.row.noOutcount,n=[];e.data.forEach((function(t,e){t.Maxnum=1/0,t.num=0,t.isSlection=!0,a>0&&(t.num=a>t.inventory?t.inventory:a,a=(1e4*a-1e4*t.num)/1e4,n.push(e))})),t.ShuntData.list=e.data;var r=t;t.ShuntData.list.length>0&&setTimeout((function(){n.forEach((function(t){r.$refs.ShuntDataTable.toggleRowSelection(r.ShuntData.list[t])}))}),120)}})),this.ShipmentForm.sync=!1},clickSelseciton:function(t){this.$refs.ShuntDataTable.toggleRowSelection(t)},countNum:function(){var t=0;this.ShuntData.list.length&&this.ShuntData.list.forEach((function(e){e.isSlection||(t=(1e4*t+1e4*e.num)/1e4)})),this.ShuntData.num=t},ShuntSelectionChange:function(t){var e=this;this.ShuntSelecArr=t||[],this.ShuntSelecId=[],this.ShuntData.num=0,this.ShuntData.list.forEach((function(t){t.isSlection=!0})),this.ShuntSelecArr.forEach((function(t){e.ShuntSelecId.push(t.id),t.isSlection=!1})),this.countNum()},outBoundBySelected:function(t,e){var a=this;this.ShipmentForm.row=t,this.ShipmentForm.radio=-1,this.ShipmentForm.tableSelection=[],this.ShipmentForm.indexNO_arr=[];var n=this.factoryId_arr;t.isSwitchWarehouse||n.push(t.factoryid);t.sku;var r={orderDetailId:t.id,skuCode:t.sku,productId:t.data,unitBit:t.unitbit};this.ShipmentForm.list=[],Object(c["t"])(r).then((function(r){if(200===r.code){var o=[];if(r.data.forEach((function(e){e&&(e.isNoFactory=e.isSwitchWarehouse||!1,t.isSwitchWarehouse||n.indexOf(e.factoryId)<0&&(e.isNoFactory=!0),o.push(e))})),r.data[0]||(o=[]),o.length>0){var s=0;o.forEach((function(e){e.storeid=e.storeid||e.warehouseId,e.storename=e.storename||e.warehouseName,e.stock=e.stock||e.inventory||0,e.minstock=e.minstock||e.minInventory||0,e.prodnum=e.prodnum||e.inProductionNum||0,e.factoryId=e.factoryId||e.storeid,e.factoryname=e.factoryname||e.factoryName,e.indexNO=s;var n=0;n=e.stock,e.num=n>0?n:0,e.Maxnum=e.stock,e.Maxnum=e.Maxnum>0?e.Maxnum:0,a.ShipmentForm.row.noOutcount<e.Maxnum&&(e.Maxnum=a.ShipmentForm.row.noOutcount),e.num>e.Maxnum&&(e.num=e.Maxnum),t.isSwitchWarehouse||e.factoryId===t.factoryid&&e.Maxnum>0&&(a.ShipmentForm.radio=s),s++}))}a.ShipmentForm.list=o,a.changeRadio(a.ShipmentForm.radio);var u=o.findIndex((function(e){return t.warehouseId===e.warehouseId}));2===e&&(a.ShuntData.row=Object(i["a"])(Object(i["a"])({},t),{},{warehouseIdName:u>=0?t.warehouseId:""}),a.ShuntData.factory={factoryName:t.factoryName,factoryId:t.factoryid,warehouseId:t.warehouseId,warehouseIdName:u>=0?t.warehouseId:""},a.ShipmentForm.list.length<=0&&(a.ShuntData.factory.warehouseId=""),a.ShunDataSync())}}));var o=!1;if(o)return Object(u["c"])(),void Object(c["t"])()},submitShipment:function(){var t=this,e=this.ShipmentForm.tableSelection||[],a=!1,n="请选择要操作的数据";if(e.length<=0&&(a=!0,n="请选择要操作的数据"),e.forEach((function(t){t.num<=0&&(a=!0,n="检查到有锁单数量为0")})),a)this.$message({message:n,type:"error"});else{var r=e[0],i={productId:r.productId||this.ShipmentForm.row.data,skuCode:this.ShipmentForm.row.sku,warehouseId:r.storeid,factoryId:r.factoryId,id:this.ShipmentForm.row.id,outNum:r.num};Object(c["A"])(i).then((function(e){200===e.code&&(t.loadingWeb=!1,t.ShipmentForm.sync=!1,t.$message({message:"操作成功",type:"success"}),t.paramData.page=1,t.getTables(t.paramData))}))}},getFactory:function(){var t=this,e=[];Object(F["o"])().then((function(a){t.factoryData=a.data,a.data.forEach((function(t){1===t.data&&e.push(t.id)})),t.factoryId_arr=e}))},ToUpDate:function(){this.getTables(this.paramData)},clickModifyItem:function(t){this.ModifyItemData=t,this.$refs["HandleModifyItem"].sync=!0},chengRegion2:function(t){var e=t;this.chengRegionObje2=e},chengRegion3:function(t){this.chengRegionObje2.provinceId="",this.chengRegionObje2.cityId="",this.chengRegionObje2.countyId="",this.formQuery.areaId=t||"",this.onSubmit()},fahuobianpai:function(){var t=this;null==this.currentRow3&&(this.currentRow3={length:0});var e={consigneeDTO:{},deliverGoodsList:[],logisticsId:this.currentRow3.id,optId:this.userId,receivingArea:this.GuestInfoRow[this.reset_id].receiveAreaId};e.consigneeDTO={address:this.currentRow2.address,consigneeMobile:this.currentRow2.consigneePhone,consigneeName:this.currentRow2.consignee,customerMobile:this.GuestInfoRow[this.reset_id].phone,customerName:this.GuestInfoRow[this.reset_id].customerName};for(var a=!1,n=[],r=0;r<this.GuestInfoRow.length;r++){var i=this.GuestInfoRow[r];i.noSendnum>i.Max_num&&n.indexOf("检查到输入发货数量大于需发货数量")<0&&(n.push("检查到输入发货数量大于需发货数量"),a=!0);var o={consigneeDTO:{address:i.address.address,consigneeMobile:i.address.consigneeMobile,consigneeName:i.address.consignee,customerMobile:i.phone,customerName:i.customerName},orderDetailsId:i.id,outcount:i.noSendnum,warehouseId:i.warehouseId};e.deliverGoodsList.push(o)}a?this.$message.warning(n.toString()):Object(c["g"])(e).then((function(e){200===e.code?(t.$message({message:e.data,type:"success",duration:6e3}),t.currentRow2length="",t.dialogTableVisible=!1,t.getTables(t.paramData)):t.$message({message:e.message,type:"warning"})}))},logisticsChange:function(t){},output_logistics:function(t,e){this.logistics.sync=!1,2!==e&&(this.currentRow3=t,this.currentRow2length=this.currentRow3.namecode,this.tableData9_data=[this.currentRow3],this.$refs["LogisticsSearch"].init_value(t.namecode))},remove_logistics:function(){this.currentRow3={},this.currentRow2length="",this.tableData9_data=[]},click_logistics:function(){this.logistics.sync=!0,this.tableData9_index="",this.$refs["ChoiceLogistics"].init_carrierInfoList2()},changeRadio:function(t){var e=[this.ShipmentForm.list[t]];this.ShipmentForm.tableSelection=e;var a=[t];this.ShipmentForm.indexNO_arr=a},shipmentSelec:function(t){return t.Maxnum>0&&(t.factoryid===this.ShipmentForm.row.factoryid||1===this.ShipmentForm.row.factoryid)},ShipmentFormChange:function(t){this.ShipmentForm.tableSelection=t;var e=[];t.forEach((function(t){e.push(t.indexNO)})),this.ShipmentForm.indexNO_arr=e},outBoundBySelected2:function(){var t=this;if(this.chenckeList.length<=0)this.$message.error("请选择要操作的数据！");else{this.chenckeCheckout=[];var e=[],a=[];this.chenckeList.forEach((function(n){n.isOut&&n.inventoryNum>0&&(t.chenckeCheckout.push(n),e.push(n.id)),a.push(n.id)})),this.chenckeCheckout.length<=0?this.$message.error("勾选的数据并没有可以锁单的！"):this.$confirm("你确定要对已选的数据进行锁单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n={I_outType:100902,I_optType:2,I_ids:e.toString(),I_optuser:t.userId+""};Object(u["A"])(n).then((function(e){if(200===e.code){var n=e.message;e.data[0]&&(n=e.data[0].result||n),t.Lock_an_deliver(n,a),t.getTables(t.paramData)}}))}))}},Lock_an_deliver:function(t,e){var a=this,n=e.length;this.$confirm(t+";是否继续发货？","提示",{confirmButtonText:"继续发货",cancelButtonText:"取消",type:"warning"}).then((function(){var t={status:a.paramData.status,auditStatus:a.paramData.auditStatus,orderDetailIds:e,pageSize:n,page:1};Object(c["a"])(t,{orderDetailIds:e}).then((function(t){if(200===t.code){var e=t.data.list;a.Deliver_Edit(e,2)}}))})).catch((function(){a.getTables(a.paramData)}))},selectUserList:function(){var t=this;Object(l["j"])().then((function(e){200===e.code&&(t.userlist=e.data)}))},handleCurrentChange2:function(t){this.currentRow2=t,this.infotitle="当前选中收货人："+t.consignee,this.currentRow2.consigneeMobile=t.namecode,this.GuestInfoRow.forEach((function(t){t.unitbit=0}))},getother:function(){var t=this,e={page:1,pageSize:24,cityId:this.chengRegionObje6.cityId,provinceId:this.chengRegionObje6.provinceId,countyId:this.chengRegionObje6.regionId};Object(d["a"])(e).then((function(e){200===e.code?(t.loadingTab=!1,t.allTate2=e.data.total,t.currentPage2=e.data.pageNum,t.GuestInfoRow9=e.data.list):t.$message({message:e.message,type:"warning"})}))},onSubmit3:function(){var t=this,e={page:1,pageSize:24,cityId:this.chengRegionObje6.cityId,provinceId:this.chengRegionObje6.provinceId,countyId:this.chengRegionObje6.regionId};Object(d["a"])(e).then((function(e){200===e.code?(t.loadingTab=!1,t.allTate2=e.data.total,t.currentPage2=e.data.pageNum,t.GuestInfoRow9=e.data.list):t.$message({message:e.message,type:"warning"})}))},chengRegion:function(t){var e=t;this.chengRegionObje=e},chengRegion6:function(t){var e=t;this.chengRegionObje6=e},search:function(t){t.length>=2?this.getAllProductInfo(t):this.optionsGoods=[]},searchCle:function(t){t||(this.optionsGoods=[])},getAllProductInfo:function(t){var e=this,a={nodeType:100303,productName:t};Object(s["f"])(a).then((function(t){200===t.code?e.optionsGoods=t.data:e.$message({message:t.message,type:"warning"})}))},getCustomer:function(){var t=this;Object(u["g"])().then((function(e){200===e.code?t.optionsName=e.data:t.$message({message:e.message,type:"warning"})}))},getTables:function(t){var e=this,a=t;Object.keys(a).forEach((function(t){var e=a[t];""===e&&delete a[t]})),a.content||delete a["type"],this.paramData=a,Object(c["a"])(a).then((function(t){if(e.loadingWeb=!1,e.loadingQuery=!1,e.loadingTab=!1,200===t.code){var a=t.data.list.map((function(t){return t.Max_num=t.noSendnum,t.consignee=t.address.consignee||"",t.address2=t.address.address||"",t.consigneeMobile=t.address.consigneeMobile||"",t.address.consigneePhone=t.consigneePhone||"",t.nodeTypeBoolean="100517"===t.nodetype||"100501"===t.nodetype||"100502"===t.nodetype||"100503"===t.nodetype?1:2,t.isGoosd=!0,0===t.outnum&&t.inventoryNum<t.scalnum&&(t.isGoosd=!1),t.lbacknum=t.lbacknum||0,t.afterSaleBackNum=t.afterSaleBackNum||0,t.afterSaleBackNum_lbacknum=0,t.afterSaleBackNum_lbacknum=(1e4*t.afterSaleBackNum-1e4*t.lbacknum)/1e4||0,t.AmountNum=e.accMul(t.scalprice,t.scalnum),t.remark=t.remark||{},t.remark_remark=t.remark.remark||"",t}));e.tableData=a,e.allTate=t.data.total,e.currentPage=t.data.pageNum}}))},onSubmit:function(){var t=this.formQuery,e=this.chengRegionObje,a=this.chengRegionObje2,n=Object(i["a"])(Object(i["a"])({},t),{},{page:1,pageSize:this.paramData.pageSize,customerProvinceId:a.provinceId,customerCityId:a.cityId,customerCountyId:a.countyId,factoryProvinceId:e.provinceId,factoryCityId:e.cityId,factoryCountyId:e.countyId}),r="";t.sort.forEach((function(t){r+=t+","})),r=r.substring(0,r.length-1),n.sort=r,this.getTables(n)},Table_Select:function(t,e){var a=t.find((function(t){return t.id===e.id}));a&&a.inventoryNum<=0&&a.isOut&&this.$message.warning({message:"检查到库存为0，需要批量锁单请先更换其他仓库",duration:4e3})},handleSelectionChange:function(t){this.chenckeList=t,this.batchList=t},checkSelectable:function(t){return!0},OutboundShipments2:function(){this.chenckeList.length<=0?this.$message.error("请选择要操作的数据！"):this.Deliver_Edit(this.chenckeList,1)},Deliver_Edit:function(t,e){var a=[];if(t.forEach((function(t){t.isSend&&a.push(t)})),a.length<=0){var n=2===e?"发现异常，无法发货":"勾选的数据并没有可以发货的！";this.$message.error(n)}else this.DeliveryInit(),this.GuestInfoRow=a,this.GuestInfoRow.forEach((function(t){t.unitbit=0})),this.GuestInfoRow[0].unitbit=1,this.currentRow2=this.GuestInfoRow[0].address},reset:function(t){var e=t.row;this.reset_id=t.$index,this.GuestInfoRow.forEach((function(t){t.unitbit=0})),e.unitbit=1,this.currentRow2=e.address},OutboundShipments:function(t){this.DeliveryInit(),this.currentRow2=JSON.parse(JSON.stringify(t.address)),this.GuestInfoRow.push(t)},DeliveryInit:function(){this.reset_id=0,this.GuestInfoRow=[],this.dialogTableVisible=!0,this.currentRow2length="",this.tableData9_data=[],this.currentRow3=[],this.$refs["LogisticsSearch"]&&this.$refs["LogisticsSearch"].removeData()},dialogExportClick:function(){this.dialogExport=!1,this.$message({type:"success",message:"操作成功"})},clickSizeChange2:function(t){this.paramData.pageSize=t,this.clickCurrentChange2(1)},clickCurrentChange2:function(t){var e=this,a={page:t,pageSize:24,cityId:this.chengRegionObje6.cityId,provinceId:this.chengRegionObje6.provinceId,countyId:this.chengRegionObje6.countyId};Object(d["a"])(a).then((function(t){200===t.code?(e.loadingTab=!1,e.allTate2=t.data.total,e.currentPage2=t.data.pageNum,e.GuestInfoRow9=t.data.list):e.$message({message:t.message,type:"warning"})}))},clickSizeChange:function(t){this.paramData.pageSize=t,this.clickCurrentChange(1)},clickCurrentChange:function(t){this.paramData.page=t,this.getTables(this.paramData)},removalDuplicate:function(t){for(var e=0;e<t.length;e++){var a=t[e];if(""!==a)for(var n=e+1;n<t.length;n++)t[e].id===t[n].id&&t.splice(e,1)}return t},clicktop:function(){this.$refs.TableData.bodyWrapper.scrollTop=this.tableTop}},mounted:function(){},name:"CustomerManagement-handle",activated:function(){var t=this;setTimeout((function(){t.$refs.TableData.bodyWrapper.scrollTop=t.scrollTop,t.$refs.TableData.bodyWrapper.scrollLeft=t.scrollLeft}),60)},beforeRouteLeave:function(t,e,a){this.scrollTop=this.$refs.TableData.bodyWrapper.scrollTop,this.scrollLeft=this.$refs.TableData.bodyWrapper.scrollLeft,a()}},U=G,W=(a("775d"),Object(w["a"])(U,n,r,!1,null,"3442d4c8",null));e["default"]=W.exports},d998:function(t,e,a){var n=a("342f");t.exports=/MSIE|Trident/.test(n)},eab5:function(t,e,a){"use strict";a.d(e,"h",(function(){return r})),a.d(e,"i",(function(){return i})),a.d(e,"f",(function(){return o})),a.d(e,"e",(function(){return s})),a.d(e,"m",(function(){return u})),a.d(e,"w",(function(){return c})),a.d(e,"j",(function(){return l})),a.d(e,"r",(function(){return d})),a.d(e,"q",(function(){return m})),a.d(e,"s",(function(){return h})),a.d(e,"o",(function(){return p})),a.d(e,"t",(function(){return f})),a.d(e,"v",(function(){return b})),a.d(e,"u",(function(){return g})),a.d(e,"l",(function(){return y})),a.d(e,"k",(function(){return S})),a.d(e,"g",(function(){return v})),a.d(e,"H",(function(){return w})),a.d(e,"E",(function(){return _})),a.d(e,"G",(function(){return D})),a.d(e,"F",(function(){return x})),a.d(e,"z",(function(){return k})),a.d(e,"C",(function(){return I})),a.d(e,"B",(function(){return O})),a.d(e,"n",(function(){return C})),a.d(e,"p",(function(){return j})),a.d(e,"b",(function(){return T})),a.d(e,"a",(function(){return R})),a.d(e,"c",(function(){return N})),a.d(e,"y",(function(){return $})),a.d(e,"x",(function(){return P})),a.d(e,"D",(function(){return E})),a.d(e,"I",(function(){return A})),a.d(e,"d",(function(){return M})),a.d(e,"A",(function(){return L}));var n=a("83c3");function r(t){return Object(n["a"])({url:"/admin/customer/order/list/page",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/admin/data/selectByCond/I_customer_order_list/find?pageNo=0",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/admin/customer/order/getPurchasePlanListByOrderId",method:"GET",params:t})}function s(t){return Object(n["a"])({url:"/admin/customer/order/getProductionPlanListByOrderId",method:"GET",params:t})}function u(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/list/page",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/admin/factory/getWarehouseListToOutbound",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/getCustomerOrderDetailStatusList",method:"get",data:t})}function d(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/getProductStockByOrderDetailId",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/getPurchasePlanListByAssociateId",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/getProductionPlanListByAssociateId",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/getGoodsOutboundListByAssociateId",method:"get",params:t})}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(n["a"])({url:"/admin/data/execProcedure/co_list_batch?pageNo="+e,method:"post",data:t})}function b(t){return Object(n["a"])({url:"/productionPlan/merge",method:"POST",data:t})}function g(t){return Object(n["a"])({url:"/productionPlan/insert",method:"POST",data:t})}function y(t){return Object(n["a"])({url:"/admin/excel/operationCustomerOrders",method:"GET",params:t})}function S(t){return Object(n["a"])({url:"/admin/excel/operationCustomerOrderDetailSchedule",method:"GET",params:t})}function v(t){return Object(n["a"])({url:"/admin/customer/order/getCustomer",method:"get",data:t})}function w(t){return Object(n["a"])({url:"/admin/customer/order/updateRemarks",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/updateRemarks",method:"post",data:t})}function D(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/updateOrderLastDeliveryDate",method:"post",data:t})}function x(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/updateOrderDetailLastDeliveryDate",method:"post",data:t})}function k(t){return Object(n["a"])({url:"/admin/data/execProcedure/co_list_batchout?pageNo=0",method:"POST",data:t})}function I(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/pendingOrderOutOfWarehouse",method:"POST",data:t})}function O(t){return Object(n["a"])({url:"/admin/data/execProcedure/co_list_batch?pageNo=0",method:"POST",data:t})}function C(t){return Object(n["a"])({url:"/admin/factory/getFactoryAndWarehouseList",method:"GET",params:t})}function j(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/getOrderDetailsList",method:"POST",data:t})}function T(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/dispatchStatistics",method:"POST",data:t})}function R(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/assignedFactory",method:"POST",data:t})}function N(t){return Object(n["a"])({url:"/admin/data/execProcedure/find_prodout?pageNo=0",method:"POST",data:t})}function $(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/orderBendingGoodsById",method:"POST",params:t})}function P(t){return Object(n["a"])({url:"/admin/customer/detail/schedule/orderBendingGoods",method:"POST",data:t})}function E(t){return Object(n["a"])({url:"/product/productBengingFactory",method:"POST",data:t})}function A(t){return Object(n["a"])({url:"/admin/data/execProcedure/waitprod_callin?pageNo=0",method:"POST",data:t})}function M(t){return Object(n["a"])({url:"/admin/factory/getAllFactoryInfo",method:"GET",params:t})}function L(t){return Object(n["a"])({url:"/admin/data/execProcedure/客户订单发货前批量锁单?pageNo=0",method:"POST",data:t})}},f7a5:function(t,e,a){"use strict";a("3f49")}}]);