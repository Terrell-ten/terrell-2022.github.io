(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48f9d3af"],{"04d1":function(t,e,a){var s=a("342f"),i=s.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"2f88":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.pageSizesArr||t.pageSizesArrInit,"page-size":t.pageSize,layout:t.layout,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},i=[],n=(a("a9e3"),a("ac1f"),a("1276"),{props:{pageSize:{type:Number,default:10},pageSizesArr:{type:Array,default:null},layout:{type:String,default:"total,sizes,prev, pager, next"},total:Number,currentPage:Number},data:function(){return{pageSizesArrInit:[24,100,200,500,1e3]}},mounted:function(){var t=location.href.split("/")[2];"192.168.1.145:8080"===t&&(this.pageSizesArrInit=[2,24,100,200,500,1e3])},methods:{handleSizeChange:function(t){this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}}}),o=n,l=a("2877"),r=Object(l["a"])(o,s,i,!1,null,"79dfe774",null);e["a"]=r.exports},"4e82":function(t,e,a){"use strict";var s=a("23e7"),i=a("e330"),n=a("59ed"),o=a("7b0b"),l=a("07fa"),r=a("577e"),c=a("d039"),u=a("addb"),m=a("a640"),p=a("04d1"),d=a("d998"),f=a("2d00"),h=a("512ce"),b=[],v=i(b.sort),g=i(b.push),y=c((function(){b.sort(void 0)})),w=c((function(){b.sort(null)})),S=m("sort"),T=!c((function(){if(f)return f<70;if(!(p&&p>3)){if(d)return!0;if(h)return h<603;var t,e,a,s,i="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:a=3;break;case 68:case 71:a=4;break;default:a=2}for(s=0;s<47;s++)b.push({k:e+s,v:a})}for(b.sort((function(t,e){return e.v-t.v})),s=0;s<b.length;s++)e=b[s].k.charAt(0),i.charAt(i.length-1)!==e&&(i+=e);return"DGBEFHACIJK"!==i}})),C=y||!w||!S||!T,x=function(t){return function(e,a){return void 0===a?-1:void 0===e?1:void 0!==t?+t(e,a)||0:r(e)>r(a)?1:-1}};s({target:"Array",proto:!0,forced:C},{sort:function(t){void 0!==t&&n(t);var e=o(this);if(T)return void 0===t?v(e):v(e,t);var a,s,i=[],r=l(e);for(s=0;s<r;s++)s in e&&g(i,e[s]);u(i,x(t)),a=i.length,s=0;while(s<a)e[s]=i[s++];while(s<r)delete e[s++];return e}})},"512ce":function(t,e,a){var s=a("342f"),i=s.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},d998:function(t,e,a){var s=a("342f");t.exports=/MSIE|Trident/.test(s)},db6d:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-conent main-conent-minheight flex-main-conent"},[a("div",{staticClass:"flex-box"},[a("div",{staticClass:"flex-top"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-form",{attrs:{"label-width":"100px"}},[1==t.num?a("span",[t._v("当前为顶级分类")]):a("span",[t._v("父类路径名称："+t._s(t.className))]),a("el-row",{staticClass:"flex-wrap-wrap",staticStyle:{"margin-bottom":"10px"},attrs:{type:"flex",justify:"end"}}),a("el-row",{staticClass:"flex-wrap-wrap",attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"排序号："}},[a("el-input",{staticStyle:{width:"50%"},attrs:{clearable:""},model:{value:t.numberValue,callback:function(e){t.numberValue=e},expression:"numberValue"}})],1)],1),a("el-col",{attrs:{xs:24,sm:24,md:12,lg:6,xl:6}},[a("el-form-item",{attrs:{label:"分类名称："}},[a("el-input",{staticStyle:{width:"50%"},attrs:{clearable:""},model:{value:t.classValue,callback:function(e){t.classValue=e},expression:"classValue"}})],1)],1),a("el-col",{staticClass:"text-left",attrs:{xs:24,sm:24,md:12,lg:12,xl:12}},[a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("查询")]),1==t.num?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("添加顶级分类")]):t._e(),1!=t.num?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.add()}}},[t._v("添加同级分类")]):t._e(),1!=t.num?a("el-button",{attrs:{type:"primary"},on:{click:t.go}},[t._v("返回父级")]):t._e(),1!=t.num?a("el-button",{attrs:{type:"primary"},on:{click:t.goOut}},[t._v("返回顶级")]):t._e()],1)],1)],1),a("el-row")],1)]),a("div",{staticClass:"flex-cont"},[a("el-table",{ref:"TableData",staticStyle:{width:"100%"},attrs:{data:t.publicList,stripe:"",border:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"id",label:"标识",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"namecode",label:"分类名称",align:"center"}}),a("el-table-column",{attrs:{label:"类别",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:"100101"===e.row.nodetype,expression:"scope.row.nodetype==='100101'"}]},[t._v("一级类")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"100102"===e.row.nodetype,expression:"scope.row.nodetype==='100102'"}]},[t._v("二级类")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"100103"===e.row.nodetype,expression:"scope.row.nodetype==='100103'"}]},[t._v("三级类")])]}}])}),a("el-table-column",{attrs:{label:"父类",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["100101"===e.row.nodetype?a("span"):a("span",[t._v(t._s(t.className))])]}}])}),a("el-table-column",{attrs:{prop:"sort",label:"顺序号",align:"center",width:"80"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",["100103"!==e.row.nodetype&&null==e.row.vdata?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.intoChild(e.row)}}},[t._v("管理子类")]):a("el-button",{attrs:{type:"info"}},[t._v("管理子类")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.edit(e.row)}}},[t._v("修改")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.delData(e.row.id)}}},[t._v(" 删 除")])],1)]}}])})],1)],1),a("div",{staticClass:"flex-button"},[a("div",{staticClass:"margin-t16 text-right"},[a("AppPaging",{attrs:{total:t.allTate,pageSize:t.paramData.pageSize,currentPage:t.paramData.page},on:{handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}})],1)])]),1==t.num?a("el-dialog",{attrs:{title:t.isShow?"添加分类":"修改分类",visible:t.isTrue,width:"40%"},on:{"update:visible":function(e){t.isTrue=e},close:function(e){return t.hide()}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"顺序号"}},[a("el-input",{staticStyle:{width:"30%"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{label:"当前分类名称"}},[a("el-input",{staticStyle:{width:"30%"},model:{value:t.form.namecode,callback:function(e){t.$set(t.form,"namecode",e)},expression:"form.namecode"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==t.isShow?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.classgoodAdd(t.form)}}},[t._v("保 存")]):a("el-button",{attrs:{type:"primary"},on:{click:t.preservation}},[t._v("保 存")]),a("el-button",{on:{click:function(e){return t.hide()}}},[t._v("取 消")])],1)],1):a("el-dialog",{attrs:{title:t.isShow?"添加分类":"修改分类",visible:t.isTrue,width:"40%"},on:{"update:visible":function(e){t.isTrue=e},close:function(e){return t.hide()}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"顺序号"}},[a("el-input",{staticStyle:{width:"30%"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("el-form-item",{attrs:{label:"当前分类名称"}},[a("el-input",{staticStyle:{width:"30%"},model:{value:t.form.namecode,callback:function(e){t.$set(t.form,"namecode",e)},expression:"form.namecode"}})],1),a("el-form-item",{attrs:{label:"可选规格参数",prop:"name"}},[a("el-button",{staticStyle:{"margin-right":"50px"},attrs:{type:"primary"},on:{click:t.addClassGood}},[t._v("添加公共规格参数")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{label:"规格标题",prop:"specifTitel",align:"center"}}),a("el-table-column",{attrs:{label:"参数标题",prop:"parmentsTitel",align:"center"}}),a("el-table-column",{attrs:{label:"单位标题",prop:"unitsTitel",align:"center"}}),a("el-table-column",{attrs:{label:"说明",prop:"conent",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.del(e.row)}}},[t._v("删除")])],1)]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==t.isShow?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.classgoodAdd(t.form)}}},[t._v("保 存")]):a("el-button",{attrs:{type:"primary"},on:{click:t.preservation}},[t._v("编 辑")]),a("el-button",{on:{click:function(e){return t.hide()}}},[t._v("取 消")])],1)],1),a("el-dialog",{attrs:{title:"添加",visible:t.isClassShow,width:"40%"},on:{"update:visible":function(e){t.isClassShow=e},close:function(e){return t.Chose()}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.classform,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"请选择："}},[a("el-select",{model:{value:t.classType,callback:function(e){t.classType=e},expression:"classType"}},[a("el-option",{attrs:{label:"规格",value:"1"}}),a("el-option",{attrs:{label:"参数",value:"2"}}),a("el-option",{attrs:{label:"单位",value:"3"}})],1)],1),"1"===t.classType?a("el-form-item",{attrs:{label:"规格标题："}},[a("el-input",{staticStyle:{width:"50%"},model:{value:t.classform.specifTitel,callback:function(e){t.$set(t.classform,"specifTitel",e)},expression:"classform.specifTitel"}})],1):t._e(),"2"===t.classType?a("el-form-item",{attrs:{label:"参数标题："}},[a("el-input",{staticStyle:{width:"50%"},model:{value:t.classform.parmentsTitel,callback:function(e){t.$set(t.classform,"parmentsTitel",e)},expression:"classform.parmentsTitel"}})],1):t._e(),"3"===t.classType?a("el-form-item",{attrs:{label:"单位标题："}},[a("el-input",{staticStyle:{width:"50%"},model:{value:t.classform.unitsTitel,callback:function(e){t.$set(t.classform,"unitsTitel",e)},expression:"classform.unitsTitel"}})],1):t._e(),a("el-form-item",{attrs:{label:"说明："}},[a("el-input",{staticStyle:{width:"50%"},model:{value:t.classform.conent,callback:function(e){t.$set(t.classform,"conent",e)},expression:"classform.conent"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.isClassShow,expression:"isClassShow == true"}],attrs:{type:"primary"},on:{click:t.classGoodAdd}},[t._v("保存确定")]),a("el-button",{on:{click:function(e){return t.Chose()}}},[t._v("取消返回")])],1)],1),a("el-dialog",{attrs:{title:"查看",visible:t.isSeeClass,width:"40%"},on:{"update:visible":function(e){t.isSeeClass=e},close:t.closeSee}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.seeData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"序号",width:"80",align:"center"}}),a("el-table-column",{attrs:{label:"属性名称",prop:"titel",align:"center"}}),a("el-table-column",{attrs:{label:"类别",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{directives:[{name:"show",rawName:"v-show",value:"specif"==e.row.namecode,expression:"scope.row.namecode=='specif'"}]},[t._v("规格类型")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"parments"==e.row.namecode,expression:"scope.row.namecode=='parments'"}]},[t._v("参数类型")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"units"==e.row.namecode,expression:"scope.row.namecode=='units'"}]},[t._v("单位类型")])]}}])}),a("el-table-column",{attrs:{label:"规格属性",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticStyle:{cursor:"pointer"}},[t._v(t._s(e.row.conent))])]}}])})],1)],1)],1)},i=[],n=a("5530"),o=(a("d3b7"),a("159b"),a("b64b"),a("a434"),a("4e82"),a("a9e3"),a("e9c4"),a("8c14")),l=a("373f"),r=a("2f88"),c={components:{AppPaging:r["a"]},data:function(){return{scrollTop:0,scrollLeft:0,publicList:[],classValue:"",numberValue:"",total:0,allTate:0,size:20,current:1,className:"",num:1,page:1,obj:{},isShow:!1,isTrue:!1,form:{namecode:"",sort:""},present:"",id:"",rela:0,isClassShow:!1,tableData:[],classform:{specifTitel:"",parmentsTitel:"",unitsTitel:"",conent:""},classGoodsform:{titel:"",conent:"",iseditor:!1},classType:"",specif:[],parments:[],units:[],isEditClass:!1,normsData:[],rowForm:{},seeData:[],isSeeClass:!1,selectData:[],superiorName:"",nodetype:"",Collector:{},formQuery:{listByAsc:1,namecode:"",nodeType:"",rela:"0",sort:""},rela_arr:[],paramData:{pageSize:24,page:1}}},mounted:function(){this.onSubmit()},methods:{getTable:function(t){var e=this;this.paramData=t,Object(o["d"])(t).then((function(t){var a=t.data.records;e.publicList=a,e.total=t.data.total,e.allTate=t.data.total,e.size=t.data.size,e.current=t.data.current}))},ToUpDate:function(){this.getTable(this.paramData)},onSubmit:function(){this.obj={listByAsc:1,namecode:this.classValue,sort:this.numberValue,rela:this.rela};var t=Object(n["a"])({pageSize:this.paramData.pageSize,page:1},this.obj);Object.keys(t).forEach((function(e){var a=t[e];""===a&&delete t[e]})),this.getTable(t)},getList:function(){this.num>1?this.obj={listByAsc:1,rela:this.rela}:this.obj={listByAsc:1,rela:0},this.getTable(this.paramData)},go:function(){this.num--,this.id=this.Collector["rela"+this.num]||0,this.form.nodetype=1===this.num?"100101":2===this.num?"100102":"100103";var t=this.rela_arr.pop();this.paramData.rela=t,this.formQuery.rela=t,this.rela=t,this.classValue="",this.numberValue="",this.className=this.superiorName,this.onSubmit()},intoChild:function(t){this.rela_arr.push(this.paramData.rela),this.className=t.namecode,this.id=t.id,this.rela=t.id,1===this.num&&(this.superiorName=t.namecode),this.nodetype=t.nodetype,this.num++,this.Collector["rela"+this.num]=t.id,this.classValue="",this.numberValue="",this.onSubmit()},closeSee:function(){this.isSeeClass=!1,this.seeData=[]},handleSizeChange:function(t){this.paramData.pageSize=t,this.handleCurrentChange(1)},handleCurrentChange:function(t){this.paramData.page=t,this.getTable(this.paramData)},addClassGood:function(){this.isClassShow=!0},classGoodAdd:function(){this.tableData.push(Object(n["a"])(Object(n["a"])({},this.classform),{},{type:this.classType})),this.Chose()},Chose:function(){this.isClassShow=!1,this.classType="",this.classform={specifTitel:"",parmentsTitel:"",unitsTitel:"",conent:""}},del:function(t){this.tableData.splice(this.tableData.indexOf(t),1)},hide:function(){this.form={nodetype:"",namecode:"",sort:""},this.tableData=[],this.isTrue=!1},delData:function(t){var e=this;if(1===this.num){var a=[t];this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])({idList:a}).then((function(t){200===t.code?(Object(l["a"])(t.message),e.getList()):Object(l["b"])(t.message)}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}else{var s=[t];this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])({idList:s}).then((function(t){200===t.code&&(Object(l["a"])(t.message),e.paramData.page=1,e.ToUpDate())}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}},add:function(){var t=this;this.isTrue=!0,this.isShow=!0,Object(o["d"])({page:1,listByAsc:0}).then((function(e){t.form.sort=e.data.records[0].sort,t.form.sort++}))},increaseClass:function(){var t={specif:[],parments:[],units:[]};this.tableData.forEach((function(e){1===Number(e.type)&&t.specif.push({title:e.specifTitel,conent:e.conent}),2===Number(e.type)&&t.parments.push({title:e.parmentsTitel,conent:e.conent}),3===Number(e.type)&&t.units.push({title:e.unitsTitel,conent:e.conent})})),this.form.vdata=JSON.stringify(t),this.set_classificationAdd(this.form)},set_classificationAdd:function(t){var e=this;Object(o["a"])(t).then((function(t){200===t.code&&(Object(l["a"])(t.message),e.hide(),e.paramData.page=1,e.ToUpDate())}))},classgoodAdd:function(){var t=this;1===this.num?(this.form.rela=null,this.form.nodetype="100101",Object(o["a"])(this.form).then((function(e){200===e.code?(Object(l["a"])(e.message),t.hide(),t.paramData.page=1,t.ToUpDate()):Object(l["b"])(e.message)}))):2===this.num?(this.form.nodetype="100102",this.form.rela=this.id,"[]"===JSON.stringify(this.tableData)?Object(o["a"])(this.form).then((function(e){200===e.code?(Object(l["a"])(e.message),t.hide(),t.paramData.page=1,t.ToUpDate()):Object(l["b"])(e.message)})):this.increaseClass()):(this.form.nodetype="100103",this.form.rela=this.id,this.increaseClass())},preservation:function(){var t=this;this.num,Object(o["c"])(this.form).then((function(e){200===e.code?(Object(l["a"])(e.message),t.hide(),t.ToUpDate()):Object(l["b"])(e.message)}))},edit:function(t){if(this.isTrue=!0,this.isShow=!1,1!==this.num&&t.vdata)JSON.parse(t.vdata);this.form.namecode=t.namecode,this.form.sort=t.sort,this.form.nodetype=t.nodeType,this.form.id=t.id,this.form.vdata=t.vdata,this.form.data=t.data},intoPulic:function(t){var e=this;this.rowForm=t,this.isSeeClass=!0;var a=function(a){JSON.parse(t.vdata)[a].forEach((function(t){t.namecode=a,e.seeData.push(t)}))};for(var s in JSON.parse(t.vdata))a(s);this.seeData.forEach((function(t){t.id=e.seeData.indexOf(t)+1}))},goOut:function(){this.rela=0,this.num=1,this.onSubmit()}},name:"Ucmanagement-classificationmanagement-classificationmanagement",activated:function(){var t=this;setTimeout((function(){t.$refs.TableData.bodyWrapper.scrollTop=t.scrollTop,t.$refs.TableData.bodyWrapper.scrollLeft=t.scrollLeft}),60)},beforeRouteLeave:function(t,e,a){this.scrollTop=this.$refs.TableData.bodyWrapper.scrollTop,this.scrollLeft=this.$refs.TableData.bodyWrapper.scrollLeft,a()}},u=c,m=a("2877"),p=Object(m["a"])(u,s,i,!1,null,null,null);e["default"]=p.exports}}]);