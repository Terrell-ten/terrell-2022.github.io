(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37f21f57"],{"15d9":function(e,t,a){},"4fb0":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[1,2,5,10],"page-size":e.pageSize,layout:"prev, pager, next",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},l=[],o=(a("a9e3"),{props:{pageSize:{type:Number,default:10},total:Number,currentPage:Number},data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("handleSizeChange",e)},handleCurrentChange:function(e){this.$emit("handleCurrentChange",e)}}}),n=o,i=a("2877"),s=Object(i["a"])(n,r,l,!1,null,"03d95dfa",null);t["a"]=s.exports},"55d9":function(e,t,a){"use strict";a("15d9")},abf1:function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return n})),a.d(t,"d",(function(){return i})),a.d(t,"c",(function(){return s})),a.d(t,"f",(function(){return c}));var r=a("83c3");function l(e){return Object(r["a"])({url:"/operational/selectOperationalRecordList",method:"get",params:e})}function o(e){return Object(r["a"])({url:"/admin/excel/operationInventoryTaking",method:"GET",params:e})}function n(e){return Object(r["a"])({url:"/admin/goodsClass/getGoodsClassList",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/product/selectProductList",method:"get",params:e})}function s(e){return Object(r["a"])({url:"/operational/selectOperationalList",method:"get",params:e})}function c(e){return Object(r["a"])({url:"/admin/excel/operationStatistic",method:"GET",params:e})}},d055:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-conent main-conent-minheight"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formQuery}},[a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"日期从："}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.formQuery.timeData,callback:function(t){e.$set(e.formQuery,"timeData",t)},expression:"formQuery.timeData"}})],1)]),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"档案名称："}},[a("el-input",{model:{value:e.formQuery.recordName,callback:function(t){e.$set(e.formQuery,"recordName",t)},expression:"formQuery.recordName"}})],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:e.loadingQuery},on:{click:e.onSubmit}},[e._v("查询")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],ref:"multipleTable",staticStyle:{width:"98%"},attrs:{data:e.tableData,border:"",stripe:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"标识",width:"50",align:"center"}}),a("el-table-column",{attrs:{property:"namecode",label:"档案名称",align:"center"}}),a("el-table-column",{attrs:{property:"begindate",label:"开始日期",align:"center"}}),a("el-table-column",{attrs:{property:"enddate",label:" 结束日期",align:"center"}}),a("el-table-column",{attrs:{property:"totalSalesAmount",label:"客户订单销售总金额（元）",align:"center"}}),a("el-table-column",{attrs:{property:"totalPurchaseAmount",label:"包装采购总金额（元）",align:"center"}}),a("el-table-column",{attrs:{property:"totalCostAmount",label:"生产成本总金额（元）",align:"center"}}),a("el-table-column",{attrs:{property:"totalWastageAmount",label:"损耗金额（元）",align:"center"}}),a("el-table-column",{attrs:{property:"totalInventoryAmount",label:"存货总金额（元）",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{size:"small"}},[a("el-button",{attrs:{type:"primary"}},[e._v(" 菜单"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return e.clickDetail(t.row.id)}}},[e._v("盘存明细")])],1)],1)]}}])})],1),a("div",{staticClass:"margin-t16 text-right"},[a("pagination",{attrs:{"current-page":e.paramData.page,total:e.total,pageSize:e.paramData.pageSize},on:{handleSizeChange:e.handleSizeChange,handleCurrentChange:e.handleCurrentChange}})],1),a("el-dialog",{attrs:{title:"盘存明细",width:"88%",visible:e.innerVisibleGoods},on:{"update:visible":function(t){e.innerVisibleGoods=t}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formQueryDetails}},[a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"日期从："}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:e.formQueryDetails.timeData,callback:function(t){e.$set(e.formQueryDetails,"timeData",t)},expression:"formQueryDetails.timeData"}},[e._v("> ")])],1)]),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"物品名称："}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择","filter-method":e.search,clearable:""},on:{change:e.searchCle},model:{value:e.formQueryDetails.productId,callback:function(t){e.$set(e.formQueryDetails,"productId",t)},expression:"formQueryDetails.productId"}},e._l(e.optionsGoods,(function(e){return a("el-option",{key:e.id,attrs:{label:e.namecode,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"物品分类："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.formQueryDetails.productClassId,callback:function(t){e.$set(e.formQueryDetails,"productClassId",t)},expression:"formQueryDetails.productClassId"}},e._l(e.classData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.namecode,value:e.id}})})),1)],1),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"状态："}},[a("el-select",{attrs:{clearable:"",placeholder:"状态"},model:{value:e.formQueryDetails.objType,callback:function(t){e.$set(e.formQueryDetails,"objType",t)},expression:"formQueryDetails.objType"}},[a("el-option",{attrs:{label:"采购入库",value:"100701"}}),a("el-option",{attrs:{label:"生产入库",value:"100702"}}),a("el-option",{attrs:{label:"调拨入库",value:"100703"}}),a("el-option",{attrs:{label:"退货入库",value:"100704"}}),a("el-option",{attrs:{label:"报溢入库",value:"100705"}}),a("el-option",{attrs:{label:"往期残留",value:"100706"}}),a("el-option",{attrs:{label:"赠送入库",value:"100707"}}),a("el-option",{attrs:{label:"物料退回",value:"100708"}}),a("el-option",{attrs:{label:"工厂采购入库",value:"100709"}}),a("el-option",{attrs:{label:"领料出库",value:"100901"}}),a("el-option",{attrs:{label:"发货出库",value:"100902"}}),a("el-option",{attrs:{label:"调拨出库",value:"100903"}}),a("el-option",{attrs:{label:"报损出库",value:"100904"}}),a("el-option",{attrs:{label:"赔偿出库",value:"100905"}}),a("el-option",{attrs:{label:"工厂采购出库",value:"100909"}})],1)],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:e.loadingQuery},on:{click:e.onSubmitInventory}},[e._v("查询")])],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:e.loadingQuery},on:{click:e.clickExport}},[e._v("导出到EXCEL文件")])],1)],1),a("el-table",{attrs:{data:e.gridData,height:"460",stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"标识",width:"50",align:"center"}}),a("el-table-column",{attrs:{property:"skuCode",label:"查询码",align:"center",width:"200"}}),a("el-table-column",{attrs:{property:"optDate",label:"盘点日期时间",align:"center",width:"95"}}),a("el-table-column",{attrs:{property:"productName",label:"物品名称",align:"center",width:"280","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"specification",label:"规格",align:"center"}}),a("el-table-column",{attrs:{property:"unit",label:"单位",align:"center"}}),a("el-table-column",{attrs:{property:"count",label:"数量",align:"center"}}),a("el-table-column",{attrs:{property:"price",label:"单价（元）",align:"center"}}),a("el-table-column",{attrs:{property:"address",label:"金额（元）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.price*t.row.count).toFixed(2)))])]}}])}),a("el-table-column",{attrs:{property:"taxRate",label:"税率（%）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(Number(100*t.row.taxRate).toFixed(2))+" %")])]}}])}),a("el-table-column",{attrs:{property:"address",label:"税额（元）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.price*t.row.count*t.row.taxRate).toFixed(2)))])]}}])}),a("el-table-column",{attrs:{property:"address",label:"价税金额（元）",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.price*t.row.count+t.row.price*t.row.count*t.row.taxRate).toFixed(2)))])]}}])}),a("el-table-column",{attrs:{property:"vdata",label:"备注",align:"center"}}),a("el-table-column",{attrs:{property:"objtype",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(" "+e._s("1000051"==t.row.objtype?"上期结存":"1000052"==t.row.objtype?"本期结存":"100701"==t.row.objtype?"采购入库":"100702"==t.row.objtype?"生产入库":"100703"==t.row.objtype?"调拨入库":"100704"==t.row.objtype?"退货入库":"100705"==t.row.objtype?"报溢入库":"100706"==t.row.objtype?"往期残留":"100707"==t.row.objtype?"赠送入库":"100708"==t.row.objtype?"物料退回":"100709"==t.row.objtype?"工厂采购入库":"100901"==t.row.objtype?"领料出库":"100902"==t.row.objtype?"发货出库":"100903"==t.row.objtype?"调拨出库":"100904"==t.row.objtype?"报损出库":"100905"==t.row.objtype?"赔偿出库":"100909"==t.row.objtype?"工厂采购出库":"状态出错")+" ")])]}}])})],1),a("div",{staticClass:"margin-t16 text-right"},[a("pagination",{attrs:{"current-page":e.paramData.page,total:e.Total,pageSize:e.paramData.pageSize},on:{handleSizeChange:e.DetailshandleSizeChange,handleCurrentChange:e.DetailshandleCurrentChange}})],1)],1),a("el-dialog",{staticStyle:{"margin-top":"15vh"},attrs:{title:"导出提示",visible:e.dialogExport,width:"30%"},on:{"update:visible":function(t){e.dialogExport=t}}},[a("span",[e._v(e._s(e.ExportHints))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:e.dialogExportClick}},[e._v("确 定")])],1)])],1)},l=[],o=a("5530"),n=(a("ac1f"),a("1276"),a("2f62")),i=a("abf1"),s=a("4fb0"),c=a("da87"),d={components:{pagination:s["a"]},data:function(){return{loadingTab:!1,loadingQuery:!1,allTate:100,paramData:{page:1,pageSize:24},total:0,tableData:[],formQuery:{timeData:"",recordName:""},formQueryDetails:{timeData:"",factoryName:"",productId:"",productClassId:"",objType:""},queryInfo:{page:1,pageSize:24},Total:0,innerVisibleGoods:!1,gridData:[],optionsGoods:[],classData:[],dialogExport:!1,ExportHints:""}},computed:Object(o["a"])({},Object(n["c"])({})),created:function(){var e=this.changeData();this.formQuery.timeData=e,this.provinceList=this.data;var t=Object(o["a"])(Object(o["a"])({},this.paramData),{},{startTime:e[0],endTime:e[1]});this.getInventoryRecordList(t)},methods:{search:function(e){e.length>=2?this.getAllProductInfo(e):this.optionsGoods=[]},searchCle:function(e){e||(this.optionsGoods=[])},getAllProductInfo:function(e){var t=this,a={nodeType:100303,productName:e};Object(c["f"])(a).then((function(e){200===e.code?t.optionsGoods=e.data:t.$message({message:e.message,type:"warning"})}))},getInventoryRecordList:function(e){var t=this;Object(i["b"])(e).then((function(e){if(t.loadingWeb=!1,t.loadingQuery=!1,200===e.code){var a=e.data.list;t.loadingTab=!1,t.allTate=e.data.total,t.total=e.data.total,t.tableData=a}else t.$message({message:e.message,type:"warning"})}))},onSubmit:function(){var e=this.formQuery;e.timeData?e.timeData.length&&(e.startTime=e.timeData[0],e.endTime=e.timeData[1]):(delete e.startTime,delete e.endTime);var t=Object(o["a"])({page:1,pageSize:24},this.formQuery);this.paramData={page:1,pageSize:24},delete t.timeData,t.recordName||delete t.recordName,this.getInventoryRecordList(t)},clickTransfers:function(){this.$message({message:"正在开发中",type:"warning"})},handleSizeChange:function(e){this.paramData.pageSize=e,this.getCustomerOrder(this.paramData)},handleCurrentChange:function(e){this.paramData.page=e;var t=Object(o["a"])({page:this.paramData.page,pageSize:24},this.formQuery);delete t.timeData,t.recordName||delete t.recordName,this.getInventoryRecordList(t)},handleSelectionChange:function(e){this.batchList=e,this.multipleSelection=e},clickDetail:function(e){this.innerVisibleGoods=!0;var t=this.changeData();this.formQueryDetails.timeData=t,this.provinceList=this.data;var a={startTime:t[0],endTime:t[1],id:e};this.getSelectOperationalList(a)},onSubmitInventory:function(){var e=this.formQueryDetails;e.timeData?e.timeData.length&&(e.startTime=e.timeData[0],e.endTime=e.timeData[1]):(delete e.startTime,delete e.endTime);var t=Object(o["a"])({page:1,pageSize:24},e);this.queryInfo={page:1,pageSize:24},delete t.timeData,t.factoryName||delete t.factoryName,t.productId||delete t.productId,t.productClassId||delete t.productClassId,t.objType||delete t.objType,this.getSelectOperationalList(t)},DetailshandleSizeChange:function(e){this.queryInfo.pageSize=e,this.getSelectOperationalList(this.queryInfo)},DetailshandleCurrentChange:function(e){this.queryInfo.page=e;var t=Object(o["a"])({page:this.queryInfo.page,pageSize:24},this.formQueryDetails);delete t.timeData,t.factoryName||delete t.factoryName,t.productId||delete t.productId,t.productClassId||delete t.productClassId,t.objType||delete t.objType,this.getSelectOperationalList(t)},getSelectOperationalList:function(e){var t=this;Object(i["c"])(e).then((function(e){t.loadingWeb=!1,t.loadingQuery=!1,200===e.code?(t.gridData=e.data.list,t.Total=e.data.total):t.$message({message:e.message,type:"warning"})}))},clickExport:function(){var e=this,t=this.formQueryDetails;t.timeData?t.timeData.length&&(t.startTime=t.timeData[0].split(" ")[0],t.endTime=t.timeData[1].split(" ")[0],this.formQueryDetails.paramStr="开始时间："+t.startTime+",结束时间："+t.endTime):(delete t.startTime,delete t.endTime);var a=Object(o["a"])({},t);delete a.timeData,a.factoryName||delete a.factoryName,a.productId||delete a.productId,a.productClassId||delete a.productClassId,a.objType||delete a.objType,t.timeData?Object(i["e"])(a).then((function(t){200===t.code?(e.ExportHints=t.data,e.dialogExport=!0):e.dialogExport=!1})):this.$message({type:"warning",message:"请选择导出的时间跨度 ^_^"})},dialogExportClick:function(){this.dialogExport=!1,this.$message({type:"success",message:"操作成功"})},clickStatistical:function(){this.$message({message:"正在开发中",type:"warning"})}},mounted:function(){var e=this;Object(i["a"])().then((function(t){200===t.code&&(e.classData=t.data.records)})),Object(i["d"])().then((function(t){200===t.code&&(e.goodsData=t.data.list)}))}},p=d,u=(a("55d9"),a("2877")),m=Object(u["a"])(p,r,l,!1,null,"1ca29170",null);t["default"]=m.exports}}]);