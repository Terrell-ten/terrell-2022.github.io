(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b7fe729"],{"0211":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"e",(function(){return o})),a.d(e,"f",(function(){return s})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return u}));var n=a("83c3");function r(t){return Object(n["a"])({url:"/inventory/selectInventoryRecordList",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/inventory/selectInventoryList",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/inventory/selectInventoryList",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/admin/shopper/warehouse/list/page",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/admin/excel/factoryInventoryTaking",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/admin/excel/factoryStatistic",method:"get",params:t})}},"062d":function(t,e,a){"use strict";a.d(e,"z",(function(){return o})),a.d(e,"b",(function(){return s})),a.d(e,"I",(function(){return l})),a.d(e,"F",(function(){return u})),a.d(e,"n",(function(){return c})),a.d(e,"m",(function(){return d})),a.d(e,"o",(function(){return m})),a.d(e,"u",(function(){return p})),a.d(e,"C",(function(){return h})),a.d(e,"x",(function(){return f})),a.d(e,"y",(function(){return b})),a.d(e,"E",(function(){return g})),a.d(e,"k",(function(){return v})),a.d(e,"g",(function(){return y})),a.d(e,"l",(function(){return _})),a.d(e,"j",(function(){return w})),a.d(e,"G",(function(){return D})),a.d(e,"w",(function(){return x})),a.d(e,"K",(function(){return k})),a.d(e,"s",(function(){return C})),a.d(e,"L",(function(){return I})),a.d(e,"J",(function(){return V})),a.d(e,"H",(function(){return N})),a.d(e,"B",(function(){return S})),a.d(e,"d",(function(){return L})),a.d(e,"f",(function(){return O})),a.d(e,"A",(function(){return j})),a.d(e,"e",(function(){return P})),a.d(e,"p",(function(){return M})),a.d(e,"D",(function(){return U})),a.d(e,"r",(function(){return F})),a.d(e,"q",(function(){return A})),a.d(e,"t",(function(){return T})),a.d(e,"v",(function(){return $})),a.d(e,"h",(function(){return z})),a.d(e,"i",(function(){return E})),a.d(e,"c",(function(){return G})),a.d(e,"a",(function(){return B}));var n=a("83c3"),r=a("4328"),i=a.n(r);function o(t){return Object(n["a"])({url:"/product/selectProductList",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/admin/data/selectByCond/I_packmaterial?pageNo=0",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/product/selectProductInventory",method:"get",params:t})}function u(t){return Object(n["a"])({url:"/product/getReturnConfiguration",method:"get",params:t})}function c(){return Object(n["a"])({url:"/admin/factory/getFactoryList",method:"get"})}function d(t){return Object(n["a"])({url:"/admin/factory/getFactoryIdAndName",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/admin/factory/getFactoryByPrincipal",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/admin/purchase/temp/getProductMaterial",method:"get",params:t})}function h(t){return Object(n["a"])({url:"/admin/purchase/temp/materialsOutbound",method:"post",data:t})}function f(t){return Object(n["a"])({url:"/product/saveProduct",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/product/updateProduct",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/product/saveReturnConfiguration",method:"POST",data:t})}function v(t){return Object(n["a"])({url:"/product/deleteProductUnit",method:"post",data:i.a.stringify(t)})}function y(t){return Object(n["a"])({url:"/admin/shopper/warehouse/getWarehouseIdAndname",method:"get",params:t})}function _(t){return Object(n["a"])({url:"/product/deleteProductWdata",method:"post",data:i.a.stringify(t)})}function w(t){return Object(n["a"])({url:"/product/copyProductToNewFactory",method:"post",data:t})}function D(t){return Object(n["a"])({url:"/product/selectProductInfo",method:"get",params:t})}function x(t){return Object(n["a"])({url:"/admin/data/execProcedure/getgood_inventory?pageNo=0",method:"post",data:t})}function k(t){return Object(n["a"])({url:"/admin/data/execProcedure/st_stock_procdct?pageNo=0",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/product/isUpdate",method:"get",params:t})}function I(t){return Object(n["a"])({url:"/product/updeteProductInventory",method:"post",data:t})}function V(t){return Object(n["a"])({url:"/product/updateMaterialInventory",method:"post",data:t})}function N(t){return Object(n["a"])({url:"/admin/data/execProcedure/st_stock_packmaterial?pageNo=0",method:"post",data:t})}function S(t){return Object(n["a"])({url:"/product/isUpdateMaterialInventory",method:"get",params:t})}function L(t){return Object(n["a"])({url:"/admin/data/selectByCond/I_product_wdata?pageNo=0",method:"post",data:t})}function O(t,e){return Object(n["a"])({url:"/admin/data/updateById/I_product_wdata?dataId="+e,method:"post",data:t})}function j(t){return Object(n["a"])({url:"/product/isUpdateMaterialInventory",method:"GET",params:t})}function P(t){return Object(n["a"])({url:"/admin/data/insert/I_product_wdata",method:"post",data:t})}function M(t){return Object(n["a"])({url:"/productionPlan/getFactoryPurchasePlanDetailList",method:"get",params:t})}function U(t){return Object(n["a"])({url:"/admin/factory/purchase/plan/purchaseStatistics",method:"get",params:t})}function F(t){return Object(n["a"])({url:"/goodsWarehouse/getInventoryList",method:"get",params:t})}function A(t){return Object(n["a"])({url:"/goodsWarehouse/getInWarehouse",method:"get",params:t})}function T(t){return Object(n["a"])({url:"/goodsOutbound/getOntWarehouse",method:"get",params:t})}function $(t){return Object(n["a"])({url:"/admin/hxhouse/gethxhouseList",method:"get",params:t})}function z(t){return Object(n["a"])({url:"/goodsWarehouse/amendmentCurrentInventory",method:"post",data:t})}function E(t){return Object(n["a"])({url:"/admin/hxhouse/amendmentHxCurrentInventory",method:"post",data:t})}function G(t){var e={getColumns:[{nameCode:"id"},{nameCode:"data",vdata:{DISPNAME:"sku"}},{nameCode:"namecode"},{nameCode:"specification",vdata:{DISPNAME:"specif"}},{nameCode:"unit"}],Condition:[{nameCode:"nodetype",data:t.nodetype},{nameCode:"namecode",nodetype:"LIKE",data:"%"+t.namecode+"%"}]};return Object(n["a"])({url:"/admin/data/selectByCond/I_product?pageNo=0",method:"post",data:e})}function B(t){return Object(n["a"])({url:"/admin/data/execProcedure/Confirm_favtory_purchase?pageNo=0",method:"post",data:t})}},"2f88":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.pageSizesArr||t.pageSizesArrInit,"page-size":t.pageSize,layout:t.layout,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},r=[],i=(a("a9e3"),a("ac1f"),a("1276"),{props:{pageSize:{type:Number,default:10},pageSizesArr:{type:Array,default:null},layout:{type:String,default:"total,sizes,prev, pager, next"},total:Number,currentPage:Number},data:function(){return{pageSizesArrInit:[24,100,200,500,1e3]}},mounted:function(){var t=location.href.split("/")[2];"192.168.1.145:8080"===t&&(this.pageSizesArrInit=[2,24,100,200,500,1e3])},methods:{handleSizeChange:function(t){this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}}}),o=i,s=a("2877"),l=Object(s["a"])(o,n,r,!1,null,"79dfe774",null);e["a"]=l.exports},"322b":function(t,e,a){"use strict";a("f917")},"4cfe":function(t,e,a){},7943:function(t,e,a){},"82d2":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return r}));a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("c607"),a("2c3e"),a("25f0");Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t};(new Date).Format("yyyy-MM-dd HH:mm:ss");var n=(new Date).Format("yyyy-MM-dd"),r=[{L:"30%",V:.3},{L:"31%",V:.31},{L:"32%",V:.32},{L:"33%",V:.33},{L:"34%",V:.34},{L:"35%",V:.35},{L:"36%",V:.36},{L:"37%",V:.37},{L:"38%",V:.38},{L:"39%",V:.39},{L:"40%",V:.4},{L:"41%",V:.41},{L:"42%",V:.42},{L:"43%",V:.43},{L:"44%",V:.44},{L:"45%",V:.45},{L:"46%",V:.46},{L:"47%",V:.47},{L:"48%",V:.48},{L:"49%",V:.49},{L:"50%",V:.5},{L:"51%",V:.51},{L:"52%",V:.52},{L:"53%",V:.53},{L:"54%",V:.54},{L:"55%",V:.55},{L:"56%",V:.56},{L:"57%",V:.57},{L:"58%",V:.58},{L:"59%",V:.59},{L:"60%",V:.6},{L:"61%",V:.61},{L:"62%",V:.62},{L:"63%",V:.63},{L:"64%",V:.64},{L:"65%",V:.65},{L:"66%",V:.66},{L:"67%",V:.67},{L:"68%",V:.68},{L:"69%",V:.69},{L:"70%",V:.7},{L:"71%",V:.71},{L:"72%",V:.72},{L:"73%",V:.73},{L:"74%",V:.74},{L:"75%",V:.75},{L:"76%",V:.76},{L:"77%",V:.77},{L:"78%",V:.78},{L:"79%",V:.79},{L:"80%",V:.8},{L:"81%",V:.81},{L:"82%",V:.82},{L:"83%",V:.83},{L:"84%",V:.84},{L:"85%",V:.85},{L:"86%",V:.86},{L:"87%",V:.87},{L:"88%",V:.88},{L:"89%",V:.89},{L:"90%",V:.9},{L:"91%",V:.91},{L:"92%",V:.92},{L:"93%",V:.93},{L:"94%",V:.94},{L:"95%",V:.95},{L:"96%",V:.96},{L:"97%",V:.97},{L:"98%",V:.98},{L:"99%",V:.99},{L:"100%",V:1}];r.reverse()},"93bc":function(t,e,a){"use strict";a("4cfe")},a8e1:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ManyUploadUrl"},[a("div",{staticClass:"img-ul"},[t._l(t.imageurlArr,(function(e,n){return a("div",{key:n,staticClass:"img_li"},[a("el-image",{staticClass:"image_box",attrs:{src:e,"preview-src-list":t.imageurlArr,fit:"contain",lazy:!0}}),a("el-link",{staticClass:"pzImg_x",attrs:{type:"primary"},on:{click:function(e){return t.imgUrl_init(n)}}},[a("i",{staticClass:"el-icon-circle-close"})])],1)})),t.imageurlArr.length<t.NumMax?a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,multiple:!0,"list-type":t.list_type,name:"multipartFiles","file-list":t.fileList,limit:t.NumMax,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-exceed":t.limitExceed,"on-success":t.handleAvatarSuccess,"show-file-list":!1,"before-upload":t.beforeAvatarUpload}},["text"===t.list_type?a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1):t._e()],2),a("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},r=[],i=(a("a9e3"),a("d3b7"),a("159b"),a("a434"),a("b0c0"),a("99af"),a("2cd9")),o={props:{imgIndex:{type:Number,default:0},NumMax:{type:Number,default:3},setfileList:{type:Array,default:[]},width_max:{type:String,default:"148"},list_type:{type:String,default:"picture-card"}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,logourl:!1,imageUrl:"",uploadUrl:i["b"],fileList:[],fileList2:[],imageurlArr:[]}},created:function(){this.file_list_init(this.setfileList||[])},methods:{file_list_init:function(t){var e=this;this.fileList=[],this.imageurlArr=[],t&&t.forEach((function(t){e.fileList.push({name:t,url:t,response:{data:t}})}))},limitExceed:function(){this.$message.error("当前最多只能上传"+this.NumMax+"张图片")},imgUrl_init:function(t){this.imageurlArr.splice(t,1)},handleRemove:function(t,e){var a=this;this.imageurlArr=[],e.forEach((function(t){a.imageurlArr.push(t.response.data[0])})),this.$emit("change",this.imageurlArr,1,this.imgIndex)},handlePictureCardPreview:function(t,e){this.dialogImageUrl=t.url,this.dialogVisible=!0},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2,n=t.name.indexOf(",");return n>=0?(this.$message.error("检查到文件名包含了，号"),!1):(e||this.$message.error("上传图片只能是 JPG 或 PNG格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),e&&a)},getCaption:function(t){var e=t.lastIndexOf(".");return t=t.substring(e+1,t.length),t},getName:function(){for(var t="",e=0;e<4;e++)t+=Math.floor(10*Math.random());return t=(new Date).getTime()+t,t},handleAvatarSuccess:function(t){this.imageurlArr=this.imageurlArr.concat(t.data),this.$emit("change",this.imageurlArr,1,this.imgIndex)}}},s=o,l=(a("b653"),a("2877")),u=Object(l["a"])(s,n,r,!1,null,null,null);e["a"]=u.exports},b653:function(t,e,a){"use strict";a("c163")},bc23:function(t,e,a){"use strict";a("7943")},be9d:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return i})),a.d(e,"f",(function(){return o})),a.d(e,"g",(function(){return s})),a.d(e,"e",(function(){return l})),a.d(e,"a",(function(){return u})),a.d(e,"d",(function(){return c}));var n=a("83c3");function r(t){return Object(n["a"])({url:"/productionPlan/selectProductionPlanList",method:"get",params:t})}function i(t){return Object(n["a"])({url:"/productionPlan/selectProductionPlanListPcList",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/productionPlan/saveProductionPlanListPc",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/admin/shopper/warehouse/get",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/outturnPlan/saveOutturnPlan",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/productionPlan/batchFinishPlan",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/productionPlan/saveDeliveryVoucher",method:"post",data:t})}},c163:function(t,e,a){},c487:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-conent main-conent-minheight flex-main-conent"},[a("div",{staticClass:"flex-box"},[a("div",{staticClass:"flex-top"},[a("el-form",{attrs:{"label-width":"140px"}},[a("el-row",{staticStyle:{"margin-bottom":"0"},attrs:{gutter:40}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"当前工厂为："}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.factoryValue,callback:function(e){t.factoryValue=e},expression:"factoryValue"}},t._l(t.factoryData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.factoryName,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"日期从："}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"46%"},attrs:{type:"date",align:"right",placeholder:"开始日期","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.starDataMax}},model:{value:t.formQuery.startTime,callback:function(e){t.$set(t.formQuery,"startTime",e)},expression:"formQuery.startTime"}}),t._v(" - "),a("el-date-picker",{staticStyle:{width:"46%"},attrs:{type:"date",align:"right",placeholder:"结束时间","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.endDataMin}},model:{value:t.formQuery.endTime,callback:function(e){t.$set(t.formQuery,"endTime",e)},expression:"formQuery.endTime"}})],1)])],1),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{type:"primary",size:"medium",disabled:t.loadingTab},on:{click:function(e){return t.findList()}}},[t._v("查询")])],1)],1),a("el-row",{staticStyle:{"margin-bottom":"0"},attrs:{gutter:40}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"商品名称：","label-width":"140px"}},[a("el-select",{attrs:{clearable:"","filter-method":t.otherFilter,filterable:"",placeholder:"请选择"},on:{focus:t.obtain,change:t.selectValue},model:{value:t.goodsValue,callback:function(e){t.goodsValue=e},expression:"goodsValue"}},t._l(t.goodsData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.namecode,value:t.id}})})),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{staticStyle:{width:"75%"},attrs:{placeholder:"状态"},on:{change:function(e){return t.findList()}},model:{value:t.stateValue,callback:function(e){t.stateValue=e},expression:"stateValue"}},[a("el-option",{attrs:{label:"入库中",value:"100605"}}),a("el-option",{attrs:{label:"完成入库",value:"100606"}})],1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"SKU"}},[a("el-input",{attrs:{clearable:""},model:{value:t.skuValue,callback:function(e){t.skuValue=e},expression:"skuValue"}})],1)],1)],1)],1)],1),a("div",{staticClass:"flex-cont"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"id",label:"标识",width:"50",align:"center"}}),a("el-table-column",{attrs:{label:"生产订单号",prop:"planCode",align:"center"}}),a("el-table-column",{attrs:{prop:"optdate",label:"下单日期",width:"100",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"产品名称",prop:"namecode",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"specif",label:"规格",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"SKU",prop:"skuCode",align:"center"}}),a("el-table-column",{attrs:{prop:"unit",label:"单位",align:"center",width:"50"}}),a("el-table-column",{attrs:{prop:"num",label:"计划生产数量",align:"center",width:"110"}}),a("el-table-column",{attrs:{prop:"finishNum",label:"生产入库数",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"--",label:"待入库数",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.num-e.row.finishNum>0?e.row.num-e.row.finishNum:0))]}}])}),a("el-table-column",{attrs:{prop:"paidAmount",label:"已付款金额",align:"center",width:"100"}}),a("el-table-column",{attrs:{label:"总金额(元)",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.totalPrice)+" ")]}}])}),a("el-table-column",{attrs:{prop:"lastdate",label:"计划交货期",align:"center",width:"120","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[100603==e.row.nodetype?a("span",[t._v("材料准备")]):t._e(),100604==e.row.nodetype?a("span",[t._v("开始投产")]):t._e(),100605==e.row.nodetype?a("span",[t._v("批次入库")]):t._e(),100606==e.row.nodetype?a("span",[t._v("完成入库")]):t._e()])]}}])}),a("el-table-column",{attrs:{prop:"purchaseOutNum",label:"材料种类",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.purchaseOutNum>0?a("div",[a("el-button",{staticStyle:{"margin-left":"5px"},attrs:{plain:"",type:"primary"},on:{click:function(a){return t.clickcl(e.row)}}},[t._v("包材管理("+t._s(e.row.purchaseOutNum)+"种)")]),a("i",{})],1):a("span",{attrs:{href:"#"}},[t._v(t._s(e.row.purchaseOutNum))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[t._v(" 菜单"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return t.stockInfo(e.row.data)}}},[t._v("查看库存")]),a("el-dropdown-item",{nativeOn:{click:function(a){return t.batchInfo(e.row,!1)}}},[t._v("分批入库")]),a("el-dropdown-item",{nativeOn:{click:function(a){return t.give(e.row,1)}}},[t._v("添加赠送")]),t.buttonPermissions.indexOf(10094)>=0?[a("el-dropdown-item",{directives:[{name:"show",rawName:"v-show",value:100605==e.row.nodetype,expression:"scope.row.nodetype==100605"}],nativeOn:{click:function(a){return t.complete_click(e.row)}}},[t._v("完成入库")])]:t._e()],2)],1)]}}])})],1)],1),a("div",{staticClass:"flex-button"},[a("div",{staticClass:"margin-t16 text-right"},[a("AppPaging",{attrs:{total:t.allTate,pageSize:t.paramData.pageSize,currentPage:t.paramData.page},on:{handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}})],1)])]),a("el-dialog",{attrs:{title:"库存信息",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e},close:t.Close}},[a("el-table",{staticStyle:{width:"90%",margin:"0 0 15px 50px"},attrs:{data:t.stockData,border:""}},[a("el-table-column",{attrs:{prop:"productName",label:"商品名称",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"规格",prop:"specification",align:"center"}}),a("el-table-column",{attrs:{label:"库存量",prop:"inventory",align:"center"}}),a("el-table-column",{attrs:{label:"库存最低预警",prop:"inventoryWarning",align:"center"}}),a("el-table-column",{attrs:{label:"最低报产",prop:"lowestProduction",align:"center"}})],1)],1),a("el-dialog",{staticClass:"fprk_class",attrs:{title:"分批入库",visible:t.batchVisible,width:"60%"},on:{"update:visible":function(e){t.batchVisible=e},close:t.closeData}},[a("el-form",[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"物品名称："}},[a("div",{staticClass:"goodName",attrs:{title:t.batchForm.namecode}},[a("span",[t._v(t._s(t.batchForm.namecode))])])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"规格："}},[a("span",[t._v(t._s(t.batchForm.specif))])])],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"单位："}},[a("span",[t._v(t._s(t.batchForm.unit))])])],1)],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"计划生产数："}},[a("span",[t._v(t._s(t.batchForm.num))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"生产入库数："}},[a("span",[t._v(t._s(t.batchForm.finishNum))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:0!=t.quantity},on:{click:t.addWarehousing}},[t._v("添加批次入库")])],1)],1)],1)],1),a("el-table",{staticStyle:{width:"100%",margin:"0 0 0px 00px"},attrs:{data:t.batchData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"标识",align:"center",width:"60"}}),a("el-table-column",{attrs:{label:"仓库名称",prop:"storageName",align:"center"}}),a("el-table-column",{attrs:{label:"入库数量",prop:"num",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isAdd?a("div",[a("el-input-number",{staticStyle:{display:"none"},attrs:{min:0},model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}}),a("el-input",{attrs:{type:"number"},on:{input:function(a){return t.change_amount(e.row)}},model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}})],1):a("span",[t._v(t._s(e.row.num))])]}}])}),a("el-table-column",{attrs:{label:"单位",prop:"unit",align:"center",width:"60"}}),a("el-table-column",{attrs:{label:"生产日期",prop:"optdate",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isAdd?a("div",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.row.producedDate,callback:function(a){t.$set(e.row,"producedDate",a)},expression:"scope.row.producedDate"}})],1):a("span",[t._v(t._s(e.row.producedate||""))])]}}])}),a("el-table-column",{attrs:{label:"入库时间",prop:"optdate",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.optdate))]}}])}),a("el-table-column",{attrs:{label:"厂家交付凭证",prop:"vdata",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isAdd?[t.imageUrl.length>0?[a("div",{staticClass:"pzImg"},[t._l(t.imageUrl,(function(e,n){return a("el-image",{key:n,staticClass:"image_box",staticStyle:{width:"60px",height:"60px"},attrs:{src:e,"preview-src-list":t.imageUrl,fit:"contain"}})})),a("el-link",{staticClass:"pzImg_x",attrs:{type:"primary"},on:{click:function(e){return t.imgUrl_init()}}},[a("i",{staticClass:"el-icon-circle-close"})])],2)]:[a("div",{staticClass:"manyUploadUrlId",staticStyle:{width:"100%",height:"35px",overflow:"hidden"}},[a("ManyUploadUrl",{ref:"ManyUploadUrl",attrs:{list_type:"text",NumMax:1,setfileList:t.imageUrl},on:{change:t.getImgUrl}})],1)]]:e.row.deliveryVoucher?a("div",t._l([e.row.deliveryVoucher],(function(t,n){return a("el-image",{key:n,staticClass:"image_box",staticStyle:{width:"50px",height:"50px"},attrs:{src:t,"preview-src-list":[e.row.deliveryVoucher],fit:"contain"}})})),1):a("div",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){return t.addImg(1,e)}}},[t._v("添加凭证")])],1)]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.batch_Data_Param.length>0&&0==t.typestr,expression:"batch_Data_Param.length>0&&typestr==false"}],attrs:{type:"primary"},on:{click:t.push_save}},[t._v("确认入库")]),a("el-button",{on:{click:t.closeData}},[t._v("取消返回")])],1)],1),a("el-dialog",{attrs:{visible:t.supplerData.sync,title:t.supplerData.title,width:"35%","destroy-on-close":"",center:""},on:{opened:t.addImg_opened,"update:visible":function(e){return t.$set(t.supplerData,"sync",e)}}},[a("el-form",{attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"添加凭证："}},[a("ImgUpload",{key:"upload2",ref:"ManyUploadUrl2",attrs:{NumMax:1,setfileList:t.supplerData.imageUrl},on:{change:t.getImgUrl2}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addImg(2)}}},[t._v("确认添加凭证")]),a("el-button",{on:{click:function(e){t.supplerData.sync=!1}}},[t._v("取消")])],1)],1),a("el-dialog",{attrs:{title:"添加",visible:t.isaddContent,width:"40%"},on:{"update:visible":function(e){t.isaddContent=e},close:t.CloseContent}},[a("el-form",{attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"仓库名称："}},[a("span",[t._v(t._s(t.warehouseName))])]),a("el-form-item",{attrs:{label:"本批入库数："}},[a("el-input",{staticStyle:{width:"50%"},on:{input:function(e){return t.changeNum(t.num)}},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("span",{staticStyle:{color:"red","margin-left":"10px"}},[t._v("注：入库数最大不能超过"+t._s(t.numnew1))])],1),a("el-form-item",{attrs:{label:"计划生产数量："}},[a("span",[t._v(t._s(t.batchForm.num))])]),a("el-form-item",{attrs:{label:"单位："}},[a("span",[t._v(t._s(t.batchForm.unit))])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveContent}},[t._v("添加")]),a("el-button",{on:{click:t.CloseContent}},[t._v("取消返回")])],1)],1),a("el-dialog",{attrs:{title:1==this.ischeck?"添加赠送":"添加报损",visible:t.isGive,width:"60%"},on:{"update:visible":function(e){t.isGive=e},close:t.CloseGive}},[a("el-form",[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"物品名称："}},[a("div",{staticClass:"goodName",attrs:{title:t.batchForm.namecode}},[a("span",[t._v(t._s(t.batchForm.namecode))])])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"规格："}},[a("span",[t._v(t._s(t.batchForm.specif))])])],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"单位："}},[a("span",[t._v(t._s(t.batchForm.unit))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"计划生产数量："}},[a("span",[t._v(t._s(t.batchForm.num))])])],1)],1),a("el-form-item",{attrs:{label:1==this.ischeck?"赠送数量":"报损数量"}},[a("el-input",{staticStyle:{width:"30%"},on:{input:function(e){return t.entry(t.giveNum)}},model:{value:t.giveNum,callback:function(e){t.giveNum=e},expression:"giveNum"}}),t._v("(小于计划生产数量的1%) ")],1),a("el-form-item",{attrs:{label:1==this.ischeck?"赠送说明":"报损说明"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==this.ischeck?a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveGiveContent(1)}}},[t._v("确定赠送")]):a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveGiveContent(2)}}},[t._v("确定报损")]),a("el-button",{on:{click:t.CloseGive}},[t._v("取消返回")])],1)],1),a("el-dialog",{attrs:{title:"添加",visible:t.isaddContent,width:"40%"},on:{"update:visible":function(e){t.isaddContent=e},close:t.CloseContent}},[a("el-form",{attrs:{"label-width":"140px"}},[a("el-form-item",{attrs:{label:"仓库名称："}},[a("span",[t._v(t._s(t.warehouseName))])]),a("el-form-item",{attrs:{label:"本批入库数："}},[a("el-input",{staticStyle:{width:"50%"},on:{input:function(e){return t.changeNum(t.num)}},model:{value:t.num,callback:function(e){t.num=e},expression:"num"}}),a("span",{staticStyle:{color:"red","margin-left":"10px"}},[t._v("注：入库数最大不能超过"+t._s(t.numnew1))])],1),a("el-form-item",{attrs:{label:"计划生产数量："}},[a("span",[t._v(t._s(t.batchForm.num))])]),a("el-form-item",{attrs:{label:"单位："}},[a("span",[t._v(t._s(t.batchForm.unit))])])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveContent}},[t._v("添加")]),a("el-button",{on:{click:t.CloseContent}},[t._v("取消返回")])],1)],1),a("el-dialog",{attrs:{title:"包材管理",visible:t.CloseContentsync3,width:"80%"},on:{"update:visible":function(e){t.CloseContentsync3=e}}},[a("span",{staticStyle:{"margin-right":"100px","margin-left":"50px"}},[t._v("状态："+t._s(t.rowdata.purchaseTypeName))]),a("span",{staticStyle:{"margin-right":"100px"}},[t._v("生产入库数量："+t._s(t.rowdata.finishNum))]),a("span",{staticStyle:{"margin-right":"100px"}},[t._v("计划生产数量："+t._s(t.rowdata.num))]),a("span",{staticStyle:{"margin-right":"100px"}},[t._v("生产明细状态："+t._s(t.rowdata.typeName))]),"100605"==t.rowdata.nodetype||"100606"==t.rowdata.nodetype?a("el-button",{attrs:{type:"primary"},on:{click:t.set_tock}},[t._v("统一出库")]):t._e(),a("span",{staticStyle:{color:"red",float:"right","margin-right":"100px","margin-top":"30px"}},[t._v("*注：实际出库数不得大于采购数的120%")]),a("el-table",{staticStyle:{width:"90%",margin:"20px 0 15px 50px"},attrs:{data:t.ProductMaterialData,stripe:"",border:"",selectable:t.selectable},on:{"selection-change":t.handleSelectionChange3}},[a("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.packing_selec}}),a("el-table-column",{attrs:{prop:"id",label:"标识",align:"center"}}),a("el-table-column",{attrs:{label:"包材名称",prop:"namecode",align:"center"}}),a("el-table-column",{attrs:{label:"规格",prop:"specif",align:"center"}}),a("el-table-column",{attrs:{label:"单位",prop:"unit",align:"center"}}),a("el-table-column",{attrs:{label:"采购数量",prop:"num",align:"center"}}),a("el-table-column",{attrs:{label:"库存数量",prop:"inventoryNum",align:"center"}}),a("el-table-column",{attrs:{label:"当前完成需求数量",prop:"optdate",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.DemandNum)+" ")]}}])}),a("el-table-column",{attrs:{label:"已出库数",prop:"outStock",align:"center"}}),a("el-table-column",{attrs:{label:"实际出库数量",prop:"shijick",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{disabled:e.row.isSelec,precision:0,min:0,max:e.row.Max_shijick,label:"描述文字"},on:{change:function(a){return t.handleChange(e.row)},input:function(a){return t.handleChange(e.row)}},model:{value:e.row.shijick,callback:function(a){t.$set(e.row,"shijick",a)},expression:"scope.row.shijick"}})]}}])}),a("el-table-column",{attrs:{label:"操作",prop:"optdate",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.give(e.row,2)}}},[t._v("添加报损")])]}}])})],1)],1),a("el-dialog",{attrs:{title:"添加报损",visible:t.isGive2,width:"60%"},on:{"update:visible":function(e){t.isGive2=e}}},[a("el-form",[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"物品名称："}},[a("div",{staticClass:"goodName",attrs:{title:t.batchForm.namecode}},[a("span",[t._v(t._s(t.rowdata3.namecode))])])])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"规格："}},[a("span",[t._v(t._s(t.rowdata3.specif))])])],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"单位："}},[a("span",[t._v(t._s(t.rowdata3.unit))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"计划生产数量："}},[a("span",[t._v(t._s(t.rowdata3.num))])])],1)],1),a("el-form-item",{attrs:{label:"报损数量："}},[a("el-input",{staticStyle:{width:"30%"},on:{input:function(e){return t.entry(t.giveNum)}},model:{value:t.giveNum,callback:function(e){t.giveNum=e},expression:"giveNum"}}),t._v("(小于计划生产数量的1%) ")],1),a("el-form-item",{attrs:{label:"报损金额："}},[a("span",[t._v(t._s(t.rowdata3.totalPrice)+"元")])]),a("el-form-item",{attrs:{label:"报损说明："}},[a("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.saveGiveContent}},[t._v("确定报损")]),a("el-button",{attrs:{type:"primary"},on:{click:t.CloseGive}},[t._v("取消返回")])],1)],1),a("BatchModule",{ref:"BatchModule",attrs:{rowData2:t.returnStockrow},on:{ToUpDate:t.ToUpDate}})],1)},r=[],i=a("5530"),o=(a("a9e3"),a("b0c0"),a("d3b7"),a("159b"),a("b64b"),a("ac1f"),a("5319"),a("2f62")),s=a("be9d"),l=a("062d"),u=a("da87"),c=a("0211"),d=a("373f"),m=a("82d2"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"BatchModule suit-box"},[a("el-dialog",{attrs:{title:"分批入库",visible:t.sync,width:"60%"},on:{"update:visible":function(e){t.sync=e}}},[a("el-form",[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"物品名称："}},[a("div",{staticClass:"goodName",attrs:{title:t.rowData.namecode}},[a("span",[t._v(t._s(t.rowData.namecode))])])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"规格："}},[a("span",[t._v(t._s(t.rowData.specif))])])],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"单位："}},[a("span",[t._v(t._s(t.rowData.unit))])])],1)],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"计划生产数："}},[a("span",[t._v(t._s(t.rowData.num))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"生产入库数："}},[a("span",[t._v(t._s(t.rowData.finishNum))])])],1),a("el-col",{attrs:{span:6}},[a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:0!=t.quantity},on:{click:t.addWarehousing}},[t._v("添加批次入库")])],1)],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],staticStyle:{width:"100%",margin:"0 0 0px 00px"},attrs:{data:t.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"id",label:"标识",align:"center",width:"60"}}),a("el-table-column",{attrs:{label:"仓库名称",prop:"storageName",align:"center"}}),a("el-table-column",{attrs:{label:"入库数量",prop:"num",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isAdd?a("div",[a("el-input-number",{staticStyle:{display:"none"},attrs:{min:0},model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}}),a("el-input",{attrs:{type:"number"},on:{input:function(a){return t.change_amount(e.row)}},model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}})],1):a("span",[t._v(t._s(e.row.num))])]}}])}),a("el-table-column",{attrs:{label:"单位",prop:"unit",align:"center",width:"60"}}),a("el-table-column",{attrs:{label:"金额",prop:"amount",align:"center","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isAdd?a("div",[a("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("估算需要金额:"+t._s(t.amount2)+" ")]),a("el-input",{attrs:{type:"number",precision:4,min:0},model:{value:e.row.amount,callback:function(a){t.$set(e.row,"amount",a)},expression:"scope.row.amount"}},[a("template",{slot:"append"},[a("el-button",{on:{click:function(a){e.row.amount=t.amount2}}},[t._v("使用估算值")])],1)],2)],1):a("span",[t._v(t._s(e.row.amount))])]}}])}),a("el-table-column",{attrs:{label:"生产日期",prop:"optdate",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.isAdd?a("div",[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.row.producedDate,callback:function(a){t.$set(e.row,"producedDate",a)},expression:"scope.row.producedDate"}})],1):a("span",[t._v(t._s(e.row.producedate||""))])]}}])}),a("el-table-column",{attrs:{label:"入库时间",prop:"optdate",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.optdate))]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.batch_Data_Param.length>0&&0==t.typestr,expression:"batch_Data_Param.length>0&&typestr==false"}],attrs:{type:"primary"},on:{click:t.push_save}},[t._v("确认入库")]),a("el-button",{on:{click:function(e){t.sync=!1}}},[t._v("取消返回")])],1)],1)],1)},h=[],f={components:{},props:{rowData2:{type:Object||Array,default:{}}},data:function(){return{batch_Data_Param:[],amount2:0,quantity:0,rowData:{},total:0,num:0,num_2:0,radioIdex:"",formQuery:{productName:"",skuCode:""},loadingTab:!1,paramData:{page:1,pageSize:24},sync:!1,tableData:[],supplerData:{},ShuntSelecArr:[],ShuntSelecId:[]}},created:function(){},computed:Object(i["a"])({},Object(o["c"])({roles:"roles",userId:"user/userId",name:"user/name"})),methods:{push_save:function(){this.form={num:this.batch_Data_Param[this.batch_Data_Param.length-1].num,optId:this.userId,planId:this.rowData.id,storageId:this.batch_Data_Param[this.batch_Data_Param.length-1].storageId,purchaseType:this.rowData.purchaseType,productId:this.rowData.data,vdata:"",producedDate:this.batch_Data_Param[this.batch_Data_Param.length-1].producedDate}},addWarehousing:function(){this.saveContent()},saveContent:function(){var t=this;this.form={amount:0,id:"",isAdd:!0,num:this.num,unit:this.rowData.unit,storageId:this.rowData.warehouseId,optdate:m["a"],producedDate:m["a"]},this.change_amount(this.form),0===this.batchData.length?this.form.namecode=1:this.form.namecode=Number(this.batchData[this.batchData.length-1].namecode)+1,Object(s["g"])({id:this.rowData.warehouseId}).then((function(e){t.form.storageName=e.data.name,t.batchData.push(t.form),t.batch_Data_Param.push(t.form)})),this.quantity++,this.CloseContent()},change_amount:function(t){this.amount2=1e4*this.rowData.price*t.num/1e4},init:function(t){var e=t;this.num_2=(1e4*e.outnum-1e4*e.sendnum)/1e4,this.rowData=e,this.warehouseValue=t.warehouseId,this.getTabel()},getTabel:function(){var t=this;Object(s["b"])({planId:this.rowData.id}).then((function(e){t.batch_Data_Param=[],t.tableData=e.data}))},ShuntSelectionChange:function(t){var e=this;this.ShuntSelecArr=t||[],this.ShuntSelecId=[],this.num=0,this.tableData.forEach((function(t){t.isSlection=!0})),this.ShuntSelecArr.forEach((function(t){e.ShuntSelecId.push(t.id),t.isSlection=!1}))},count_price2:function(t,e){return t<=0||0===e?0:1===e?t:e>0?Math.ceil(t*e*1e4)/1e4:Math.ceil(t/e*1e4)/1e4*-1},handleSizeChange:function(t){this.paramData.pageSize=t,this.clickCurrentChange(1)},clickCurrentChange:function(t){this.paramData.page=t,this.getTabel(this.paramData)},onSubmit:function(){this.getTabel()}}},b=f,g=(a("bc23"),a("2877")),v=Object(g["a"])(b,p,h,!1,null,"7e724555",null),y=v.exports,_=a("2f88"),w=a("cd7f"),D=a("a8e1"),x={components:{ImgUpload:D["a"],ManyUploadUrl:w["a"],AppPaging:_["a"],BatchModule:y},data:function(){return{supplerData:{radio:0,sync:!1,title:"添加交付凭证",index:"",rwo:"",dataID:{},imageUrl:[],loading:!1,formQuery:{},paramData:{}},imageUrl:[],loadingTab:!1,returnStockrow:{},skuValue:"",batchData:[],batch_Data_Param:[],productIdmew:"",ischeck:"",warehouseIdnew:"",valdata:[],rowdata3:[],isGive2:!1,ProductMaterialData:[],rowdata:[],CloseContentsync3:!1,typestr:!1,productIdstr:"",goodsValue:"",stateValue:"100605",factoryId:"",batchVisible:!1,dateValue:"",dialogVisible:!1,isGive:!1,total:0,allTate:0,size:24,pageNum:0,tableData:[],goodsData:[],objform:{},form:{},batchForm:{},stockData:[],factoryData:[],factoryValue:"",isaddContent:!1,num:"",warehouseValue:"",purchaseType:"",warehouseData:[],quantity:0,planId:"",productId:"",giveNum:"",textarea:"",sourceid:"",warehouseId:"",warehouseName:"",array:[],maxNum:0,minNum:0,numnew1:0,pages:1,amount2:0,formQuery:{},buttonPermissions:[],paramData:{page:1,pageSize:24}}},computed:Object(i["a"])({},Object(o["c"])({roles:"roles",name:"user/name",userId:"user/userId",permission_routes:"permission_routes"})),filters:{fnFormat:function(t){return new Date(t).Format("yyyy-MM-dd")}},mounted:function(){var t=this;this.buttonPermissions=this.roles[0].buttonPermissions,this.factoryId=sessionStorage.getItem("factory"),this.getFactory(),this.factoryValue=Number(this.factoryId),Object(c["f"])({}).then((function(e){t.warehouseData=e.data.list})),this.getList(),this.goFactory()},watch:{factoryValue:function(t){this.factoryId=t,0!==t&&sessionStorage.setItem("factory",t),this.getList()}},methods:{getImgUrl2:function(t){this.supplerData.imageUrl=t},addImg_opened:function(){this.$refs["ManyUploadUrl2"].file_list_init([])},addImg:function(t,e){if(1===t&&(this.supplerData.sync=!0,this.supplerData.index=e.$index,this.supplerData.row=e.row),2===t){if(this.supplerData.imageUrl.length<=0)return void this.$message({message:"请先上传图片",type:"warning"});var a={deliveryVoucher:this.supplerData.imageUrl[0],planPcId:this.supplerData.row.id};this.get_saveDeliveryVoucher(a)}},get_saveDeliveryVoucher:function(t){var e=this;Object(s["d"])(t).then((function(t){200===t.code&&(e.supplerData.sync=!1,t.data&&(e.batchData[e.supplerData.index].deliveryVoucher=e.supplerData.imageUrl[0]))}))},getImgUrl:function(t){this.imageUrl=t},imgUrl_init:function(){this.imageUrl=[],this.$refs["ManyUploadUrl"]&&this.$refs["ManyUploadUrl"].file_list_init([])},change_amount:function(t){this.amount2=1e4*this.batchForm.price*t.num/1e4},complete_click:function(t){var e=this;this.$confirm("你确定该订单明细可以完成入库了吗？","提示",{cancelButtonText:"取消",confirmButtonText:"确定"}).then((function(a){var n={planDetailIds:[t.id],operator:e.name};e.get_completeOrder(n)})).catch((function(){}))},get_completeOrder:function(t){var e=this;Object(s["a"])(t).then((function(t){200===t.code&&(e.$message.success("操作成功，请在完成入库查看!"),e.ToUpDate())}))},starDataMax:function(t){if(this.formQuery.endTime)return t.getTime()>=Date.parse(this.formQuery.endTime)},endDataMin:function(t){if(this.formQuery.startTime)return t.getTime()<=Date.parse(this.formQuery.startTime)-864e5},getTable:function(t){var e=this;this.paramData=t,this.loadingTab=!0,Object(s["c"])(t).then((function(t){e.loadingTab=!1,200===t.code&&(e.tableData=t.data.list,e.total=t.data.total,e.allTate=t.data.total,e.pageNum=t.data.pageNum)}))},ToUpDate:function(){this.getTable(this.paramData)},findList:function(){this.objform={factoryId:this.factoryId,nodeType:this.stateValue,productId:this.productIdstr,skuCode:this.skuValue,pageSize:24,page:this.pages};var t=Object(i["a"])(Object(i["a"])({},this.formQuery),this.objform);t.pageSize=this.paramData.pageSize,t.page=1,Object.keys(t).forEach((function(e){var a=t[e];""===a&&delete t[e]})),this.getTable(t)},getList:function(){this.findList()},handleSizeChange:function(t){this.paramData.pageSize=t,this.handleCurrentChange(1)},handleCurrentChange:function(t){this.pages=t,this.paramData.page=t,this.ToUpDate()},addWarehousing:function(){this.saveContent()},saveContent:function(){var t=this;this.form={amount:0,id:"",isAdd:!0,num:this.num,unit:this.batchForm.unit,storageId:this.warehouseValue,optdate:m["a"],producedDate:m["a"]},this.change_amount(this.form),this.batchData.length,0===this.batchData.length?this.form.namecode=1:this.form.namecode=Number(this.batchData[this.batchData.length-1].namecode)+1,Object(s["g"])({id:this.warehouseValue}).then((function(e){t.form.storageName=e.data.name,t.batchData.push(t.form),t.batch_Data_Param.push(t.form)})),this.quantity++,this.CloseContent()},push_save:function(){var t=this,e=this.imageUrl[0]||"",a={deliveryVoucher:e};this.form={num:this.batch_Data_Param[this.batch_Data_Param.length-1].num,optId:this.userId,planId:this.planId,storageId:this.batch_Data_Param[this.batch_Data_Param.length-1].storageId,purchaseType:this.purchaseType,productId:this.productId,vdata:a,producedDate:this.batch_Data_Param[this.batch_Data_Param.length-1].producedDate},Object(s["f"])(this.form).then((function(e){200===e.code&&(Object(d["a"])(e.message),t.closeData(),t.findList())}))},closeData:function(){this.batchForm={namecode:"",specif:"",unit:"",num:"",finishNum:""},this.batchData=[],this.batch_Data_Param=[],this.batchVisible=!1,this.quantity=0},give:function(t,e){this.ischeck=e,this.isGive=!0,this.productId=t.data,this.sourceid=t.id,this.batchForm.namecode=t.namecode,this.batchForm.specif=t.specif,this.batchForm.unit=t.unit,this.batchForm.price=t.price,this.batchForm.num=t.num,this.batchForm.unitbit=t.unitbit,this.batchForm.warehouseId=t.warehouseId,2===e&&(this.batchForm.warehouseId=this.warehouseIdnew)},saveGiveContent:function(t){var e=this,a="102006";2===t&&(a="102001"),this.form={data:this.userId,nodetype:a,rela:this.batchForm.warehouseId,outturnPlanListDTOList:[{data:this.productId,namecode:this.batchForm.namecode,num:this.giveNum,price:this.batchForm.totalPrice,sourceid:this.sourceid,specif:this.batchForm.specif,unit:this.batchForm.unit,unitbit:this.batchForm.unitbit,vdata:{description:this.textarea}}]},Object(s["e"])(this.form).then((function(t){200===t.code?(Object(d["a"])(t.message),e.CloseGive()):Object(d["b"])(t.message)}))},addContent:function(){this.isaddContent=!0},changeNum:function(t){var e=t;this.num=e.replace(/[^0-9]/gi,""),Number(this.num)>Number(this.maxNum)-Number(this.minNum)&&(this.num=Number(this.maxNum)-Number(this.minNum))},CloseContent:function(){this.isaddContent=!1,this.warehouseValue=""},batchInfo:function(t,e){var a=this;this.imgUrl_init(),this.typestr=e;var n=Math.round(1e4*t.totalPrice/t.num)/1e4;this.batchForm={namecode:t.namecode,specif:t.specif,unit:t.unit,num:t.num,price:t.price,price2:n,finishNum:t.finishNum},this.maxNum=t.num,this.minNum=t.finishNum,this.warehouseValue=t.warehouseId,this.warehouseName=t.warehouseName,this.planId=t.id,this.productId=t.data,this.num=Number(t.num)-Number(t.finishNum),this.numnew1=Number(t.num)-Number(t.finishNum),this.num<0&&(this.num=0),this.purchaseType=t.purchaseType,this.batchVisible=!0,Object(s["b"])({planId:t.id}).then((function(t){a.batch_Data_Param=[];var e=t.data;e.forEach((function(t){t.deliveryVoucher="",t.vdata&&(t.deliveryVoucher=t.vdata.deliveryVoucher||t.deliveryVoucher)})),a.batchData=e,t.data.length>0&&(a.id=t.data[t.data.length-1].id)}))},selectable:function(t){return t.outStock>=t.num},handleChange:function(t){t.shijick>1.2*t.num&&this.$message({message:"实际出库数不得大于采购数的120%!",type:"warning"})},set_tock:function(){var t=this;if(0===this.valdata.length)this.$message({message:"请选中至少一条数据",type:"warning"});else{var e=[];this.valdata.forEach((function(a){if(a.shijick<=0)t.$message.warning("实际出库数量不能为0");else{var n={};n.outNum=a.shijick,n.plantmpId=a.id,e.push(n)}}));var a={factoryId:this.factoryId,list:e,optId:this.userId,planId:this.rowdata.id,purchaseType:this.rowdata.purchaseType};Object(l["C"])(a).then((function(e){200===e.code&&(t.$message({message:e.message,type:"success"}),t.clickcl(t.rowdata))}))}},ToisGive2:function(t){this.isGive2=!0,this.rowdata3=t},clickcl:function(t){var e=this;this.CloseContentsync3=!0,this.rowdata=t,this.warehouseIdnew=t.warehouseId,this.productIdmew=t.data,Object(l["u"])({planId:t.id}).then((function(t){t.data.forEach((function(t){t.DemandNum=Math.floor(e.rowdata.finishNum/e.rowdata.num*t.num),t.DemandNum=(1e4*t.DemandNum-1e4*t.outStock)/1e4,t.DemandNum=t.DemandNum>0?t.DemandNum:0,t.shijick=t.DemandNum,t.shijick>t.noOutStock&&(t.shijick=t.noOutStock),t.Max_shijick=1.2*t.num-t.outStock,t.isSelec=!0})),e.ProductMaterialData=t.data}))},packing_selec:function(t){return 102805!==t.nodetype&&(!(t.inventoryNum<=0)&&!(t.DemandNum<=0))},handleSelectionChange3:function(t){var e=this;this.valdata=t,this.ProductMaterialData.forEach((function(t){t.isSelec=!0})),this.valdata.forEach((function(t){e.ProductMaterialData.forEach((function(e){t.id===e.id&&(e.isSelec=!1,e.Max_shijick>e.inventoryNum&&(e.Max_shijick=e.inventoryNum))}))}))},routes_hidden:function(t){var e=1===t,a=[],n=[];for(var r in this.permission_routes){var i=this.permission_routes[r];if(i.children&&i.children.length>0)for(var o in i.children){var s=i.children[o];if(s.children&&s.children.length>0)for(var l in s.children){var u=s.children[l];10025===u.id&&(a=[r,o,l]),201===u.id&&(n=[r,o,l])}}}this.permission_routes[a[0]].children[a[1]].children[a[2]].hiddenIs&&(this.permission_routes[a[0]].children[a[1]].children[a[2]].hidden=!e,this.permission_routes[n[0]].children[n[1]].children[n[2]].hiddenIs&&(this.permission_routes[n[0]].children[n[1]].children[n[2]].hidden=e))},getFactory:function(){var t=this;Object(l["o"])().then((function(e){t.factoryData=e.data;var a=[];e.data.forEach((function(t){1!==t.data&&a.push(t)})),t.factoryData=a;var n=!0;for(var r in a){var i=a[r];if(i.id===t.factoryId){n=!1;break}}n&&(sessionStorage.setItem("factory",-1),t.goFactoryA())}))},stockInfo:function(t){var e=this;this.dialogVisible=!0,Object(l["I"])({productId:t}).then((function(t){e.stockData.push(t.data)}))},otherFilter:function(t){var e=this;0===t.length||1===t.length?this.goodsData=[]:t.length>1&&Object(u["g"])({factoryId:this.factoryValue,productName:t}).then((function(t){e.goodsData=t.data}))},selectValue:function(t){this.productIdstr=t},obtain:function(){},Close:function(){this.dialogVisible=!1,this.stockData=[]},entry:function(t){var e=t;t=e.replace(/[^0-9]/gi,""),t>.1*Number(this.batchForm.num)&&(t=.1*Number(this.batchForm.num)),this.giveNum=t,this.batchForm.totalPrice=Number(this.batchForm.price)*Number(this.giveNum)},CloseGive:function(){this.batchForm={},this.isGive=!1,this.giveNum="",this.textarea=""},goFactoryA:function(){this.$router.push({path:"/Plantsubsystem/Factory/factory?gourl=/Plantsubsystem/Produceorder/administration"})},goFactory:function(){null==sessionStorage.getItem("factory")&&this.$router.push({path:"/Plantsubsystem/Factory/factory"})}}},k=x,C=(a("93bc"),Object(g["a"])(k,n,r,!1,null,"0b3d61b9",null));e["default"]=C.exports},cd7f:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{display:"inline-block"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,multiple:!0,"list-type":t.list_type,name:"multipartFiles","file-list":t.fileList,limit:t.NumMax,"on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-exceed":t.limitExceed,"on-success":t.handleAvatarSuccess,"show-file-list":t.showFileList,"before-upload":t.beforeAvatarUpload}},["text"===t.list_type?a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})],1),a("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},r=[],i=(a("a9e3"),a("d3b7"),a("159b"),a("b0c0"),a("99af"),a("2cd9")),o={props:{showFileList:{type:Boolean,default:!0},NumMax:{type:Number,default:3},ImgIndex:{type:Number,default:0},setfileList:{type:Array||String,default:[]},width_max:{type:String,default:"148"},list_type:{type:String,default:"picture-card"}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,logourl:!1,imageUrl:"",uploadUrl:i["b"],fileList:[],imageurlArr:[]}},created:function(){this.file_list_init(this.setfileList)},methods:{file_list_init:function(t){var e=this;this.fileList=[],t.forEach((function(t){e.fileList.push({name:t,url:t,response:{data:t}})}))},limitExceed:function(){this.$message.error("当前最多只能上传"+this.NumMax+"张图片")},handleRemove:function(t,e){var a=this;this.imageurlArr=[],e.forEach((function(t){a.imageurlArr.push(t.response.data[0])})),this.$emit("change",this.imageurlArr,1,this.ImgIndex)},handlePictureCardPreview:function(t,e){this.dialogImageUrl=t.url,this.dialogVisible=!0},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,a=t.size/1024/1024<2,n=t.name.indexOf(",");return n>=0?(this.$message.error("检查到文件名包含了，号"),!1):(e||this.$message.error("上传图片只能是 JPG 或 PNG格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),e&&a)},getCaption:function(t){var e=t.lastIndexOf(".");return t=t.substring(e+1,t.length),t},getName:function(){for(var t="",e=0;e<4;e++)t+=Math.floor(10*Math.random());return t=(new Date).getTime()+t,t},handleAvatarSuccess:function(t){this.imageurlArr=this.imageurlArr.concat(t.data),this.$emit("change",this.imageurlArr,1,this.ImgIndex)}}},s=o,l=(a("322b"),a("2877")),u=Object(l["a"])(s,n,r,!1,null,null,null);e["a"]=u.exports},f917:function(t,e,a){}}]);