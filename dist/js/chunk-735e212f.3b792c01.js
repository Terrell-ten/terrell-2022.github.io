(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-735e212f"],{"19a3":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.upLoading,expression:"upLoading"}]},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,"show-file-list":!1,name:"multipartFiles","on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)},n=[],o=a("2cd9"),i={props:{imageUrl:{type:String,default:""}},data:function(){return{upLoading:!1,uploadUrl:o["b"]}},computed:{},created:function(){},methods:{handleAvatarSuccess:function(e,t){this.upLoading=!1,200===e.code&&this.$emit("uploadUrl",e.data[0])},beforeAvatarUpload:function(e){this.upLoading=!0;var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<1;return t||(this.upLoading=!1,this.$message.error("上传头像图片只能是 JPG 格式!")),a||(this.upLoading=!1,this.$message.error("上传头像图片大小不能超过 1MB!")),t&&a}},mounted:function(){}},l=i,s=(a("d12e"),a("2877")),c=Object(s["a"])(l,r,n,!1,null,"0c933ebe",null);t["a"]=c.exports},"234d":function(e,t,a){"use strict";a.d(t,"g",(function(){return o})),a.d(t,"f",(function(){return i})),a.d(t,"h",(function(){return l})),a.d(t,"j",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"c",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"i",(function(){return f})),a.d(t,"d",(function(){return m})),a.d(t,"k",(function(){return p})),a.d(t,"a",(function(){return h}));var r=a("83c3"),n="/base/data/";function o(e){return Object(r["a"])({url:"/admin/material/supplier/list/page",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/admin/material/supplier/get?id=".concat(e.id),method:"get",data:e})}function l(e){return Object(r["a"])({url:"/admin/material/supplier/insert",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/admin/material/supplier/update",method:"post",data:e})}function c(e){return Object(r["a"])({url:"/admin/material/supplier/delete",method:"post",data:e})}function d(e,t){return Object(r["a"])({url:"".concat(n,"selectByCond/m2_material_supplier_address?pageNo=").concat(t),method:"POST",data:e})}function u(e){return Object(r["a"])({url:"".concat(n,"insert/m2_material_supplier_address"),method:"post",data:e})}function f(e,t){return Object(r["a"])({url:"".concat(n,"updateById/m2_material_supplier_address?dataId=").concat(t),method:"post",data:e})}function m(e,t){return Object(r["a"])({url:"".concat(n,"deleteById/m2_material_supplier_address?dataId=").concat(t),method:"post",data:e})}function p(e){return Object(r["a"])({url:"/admin/material/supplier/updatePackmaterialTaxRate",method:"post",data:e})}function h(){var e={getColumns:[{nameCode:"id"},{nameCode:"namecode"}],Condition:[{nameCode:"id",nodetype:">",data:"0"}]};return Object(r["a"])({url:"/admin/data/selectByCond/非指定为供应商的工厂?pageNo=0",method:"post",data:e})}},"5ac1":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"LeadingCadre"},[a("el-dialog",{attrs:{title:2===e.htmltype?"供应商负责人管理":"工厂负责人管理",visible:e.sync,width:"45%"},on:{"update:visible":function(t){e.sync=t},close:e.close}},[a("div",{staticClass:"delivery_top",staticStyle:{color:"#999",display:"flex"}},[a("div",[e._v(e._s(2===e.htmltype?"供应商名称":"工厂名称")+"："+e._s(2===e.htmltype?e.rowData.namecode:e.rowData.factoryName))]),a("div",[e._v("所在区域："+e._s((e.htmltype,e.rowData.regionname)))])]),a("div",{staticClass:"form-box",staticStyle:{"margin-bottom":"15px"}},[a("el-form",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{"label-position":"left",inline:!0}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addsubmit(1)}}},[e._v(" 添加负责人 ")])],1)],1),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],ref:"supplerTable",staticStyle:{},attrs:{data:e.tableData,stripe:"",border:"","max-height":"360"}},[a("el-table-column",{attrs:{property:"username",label:"负责人名称"}}),a("el-table-column",{attrs:{property:"nodetype",label:"状态"}}),a("el-table-column",{attrs:{property:"",label:"操作",align:"center",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return["有效"===t.row.nodetype?a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.clickStarUp(1,t.row,8)}}},[e._v("禁用")]):e._e(),"禁用"===t.row.nodetype?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.clickStarUp(2,t.row,6)}}},[e._v("启用")]):e._e()]}}])})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.sync=!1}}},[e._v("关 闭")])],1)]),a("el-dialog",{attrs:{title:2===e.htmltype?"供应商添加负责人":"工厂添加负责人",visible:e.sync2,width:"30%"},on:{"update:visible":function(t){e.sync2=t}}},[a("div",{staticClass:"form-box"}),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],ref:"multipleTable",staticStyle:{},attrs:{data:e.addTableData,stripe:"",border:"","max-height":"360"},on:{"selection-change":e.shipmentSelec}},[a("el-table-column",{attrs:{selectable:e.addSelec,type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{property:"username",label:"负责人名称"}}),a("el-table-column",{attrs:{property:"namecode",label:"负责人账号"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addsubmit(2)}}},[e._v("确 定 添 加")]),a("el-button",{on:{click:function(t){e.sync2=!1}}},[e._v("关 闭")])],1)])],1)},n=[],o=a("5530"),i=(a("a9e3"),a("c740"),a("d3b7"),a("159b"),a("2a02")),l=a("234d"),s=a("2f62"),c={components:{},props:{htmltype:{type:Number,default:1}},data:function(){return{addtype:1,chencke_arr:[],chencke_arr_ids:[],sync2:!1,sync:!1,loadingTab:!1,tableData:[],addTableData:[],rowData:{},formQuery:{username:""},paramData:{pageSize:24,page:1}}},created:function(){},computed:Object(o["a"])({},Object(s["c"])({roles:"roles",userId:"user/userId",name:"user/name"})),methods:{init2:function(e){this.addtype=2,this.tableData=e,this.openAdd()},close:function(){this.$emit("ToUpDate")},addSelec:function(e){return!(this.tableData.findIndex((function(t){return t.dutyofficer===e.userId}))>=0)},onseles:function(){var e=this;2===this.addtype&&this.tableData.forEach((function(t){var a=e.addTableData.findIndex((function(e){return e.userId===t.userId}));e.$refs.multipleTable.toggleRowSelection(e.addTableData[a])}))},set_updateDutyOfficerStatus:function(e){var t=this;Object(i["m"])(e).then((function(e){200===e.code&&e.data&&(t.$message.success(e.message),t.getTable(),t.sync2=!1)}))},set_saveDutyOfficer:function(e){var t=this;Object(i["l"])(e).then((function(e){200===e.code&&e.data&&(t.$message.success(e.message),t.getTable(),t.$emit("ToUpDate"),t.sync2=!1)}))},addsubmit:function(e){if(1!==e)return 2===e?2===this.addtype?(this.$emit("getDutyofficer",this.chencke_arr),void(this.sync2=!1)):void this.openaddSubmit():void 0;this.openAdd()},openaddSubmit:function(){if(this.chencke_arr.length){var e=[],t=this.rowData.id,a=2===this.htmltype?"1000178":"1000177";this.chencke_arr.forEach((function(r){var n={targetId:t,type:a,userId:r.userId};e.push(n)}));var r={dutyofficers:e};this.set_saveDutyOfficer(r)}else this.$message.error("请选择要添加的负责人")},openAdd:function(){var e=this;this.sync2=!0,Object(i["c"])().then((function(t){if(200===t.code){e.addTableData=t.data;var a=e;setTimeout((function(){a.onseles()}),60)}}))},init:function(e){this.rowData=e,this.tableData=[],this.sync=!0,this.addtype=1,this.onSubmit()},clickStarUp:function(e,t,a){if([1,2].indexOf(e)>=0){var r={id:t.id,nodeType:a};this.set_updateDutyOfficerStatus(r)}else this.$confirm("更多功能，待开发中...","提示",{confirmButtonText:"确定"}).then((function(){}))},shipmentSelec:function(e){var t=this;this.chencke_arr=[],this.chencke_arr_ids=[],e&&e.forEach((function(e){t.chencke_arr_ids.push(e.id),t.chencke_arr.push({namecode:e.namecode,userId:e.userId,username:e.username})}))},getTable:function(){var e=this;2===this.htmltype?Object(l["g"])({supplierId:this.rowData.id}).then((function(t){200===t.code&&(e.rowData.officerList=t.data.list[0].officerList,e.getTableUser(t.data.list[0].officerList||[]))})):1===this.htmltype&&Object(i["f"])({factoryId:this.rowData.id}).then((function(t){200===t.code&&(e.rowData.officerList=t.data.list[0].officerList,e.getTableUser(t.data.list[0].officerList||[]))}))},getTableUser:function(e){var t=e;this.tableData=[],t.length&&(t.forEach((function(e){e.username=e.principalUser})),this.tableData=t)},onSubmit:function(){var e={pageSize:this.paramData.pageSize,page:1};this.getTable(e)}}},d=c,u=(a("e848"),a("2877")),f=Object(u["a"])(d,r,n,!1,null,"13874bbe",null);t["a"]=f.exports},7162:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingWeb,expression:"loadingWeb"}],staticClass:"main-conent main-conent-minheight flex-main-conent",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[r("div",{staticClass:"flex-box"},[r("div",{staticClass:"flex-top"},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.formQuery}},[r("el-form-item",{staticClass:"overall",attrs:{label:"区域："}},[r("AppRegion",{attrs:{state:101,boxWidth:120},on:{valueRegion:e.chengRegion}})],1),r("el-form-item",{staticClass:"overall",attrs:{label:"工厂名称："}},[r("el-input",{attrs:{clearable:""},model:{value:e.formQuery.factoryName,callback:function(t){e.$set(e.formQuery,"factoryName",t)},expression:"formQuery.factoryName"}})],1),r("el-form-item",{staticClass:"overall",attrs:{label:"负责人："}},[r("el-input",{attrs:{clearable:""},model:{value:e.formQuery.dutyofficer,callback:function(t){e.$set(e.formQuery,"dutyofficer",t)},expression:"formQuery.dutyofficer"}})],1),r("el-form-item",{staticClass:"overall"},[r("el-button",{attrs:{type:"primary",disabled:e.loadingQuery},on:{click:e.onSubmit}},[e._v("查询")])],1),r("el-form-item",{staticClass:"overall"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.clockFactory(!0)}}},[e._v("添加工厂及主仓库")])],1)],1)],1),r("div",{staticClass:"flex-cont"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],ref:"TableData",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData,border:"",height:"100%"}},[r("el-table-column",{attrs:{prop:"id",label:"标识",width:"50",align:"center"}}),r("el-table-column",{attrs:{prop:"factoryName",label:"工厂名称",align:"center"}}),r("el-table-column",{attrs:{label:"logo",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("el-popover",{attrs:{placement:"top-start",trigger:"click"}},[r("a",{attrs:{href:e.row.img,target:"_blank",title:"查看最大化图片"}},[r("img",{staticStyle:{"max-width":"600px","max-height":"600px"},attrs:{src:e.row.logoUrl||a("8126")}})]),r("img",{staticStyle:{width:"50px",height:"50px",cursor:"pointer"},attrs:{slot:"reference",src:e.row.logoUrl||a("8126")},slot:"reference"})])]}}])}),r("el-table-column",{attrs:{prop:"regionname",label:"所在区域",align:"center",width:"350"}}),r("el-table-column",{attrs:{prop:"dutyofficer",label:"负责人",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(" "+e._s(t.row.dutyofficer2)+" ")]),e.buttonPermissions.indexOf(10104)>=0?r("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.clickLeadingCadre(t.row,1)}}},[e._v(" 管理")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"yearamount",label:"年开票额",align:"center",width:"150"}}),r("el-table-column",{attrs:{prop:"taxrate",label:"税率",align:"center",width:"150"}}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-dropdown",{attrs:{size:"small"}},[r("el-button",{attrs:{type:"primary"}},[e._v(" 菜单"),r("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),r("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[r("el-dropdown-item",{nativeOn:{click:function(a){return e.clickEdit(t.row)}}},[e._v("修改")]),r("el-dropdown-item",{nativeOn:{click:function(a){return e.click_taxrate_init(t.row)}}},[e._v("设置商品税率")])],1)],1)]}}])})],1)],1),r("div",{staticClass:"flex-button"},[r("div",{staticClass:"margin-t16 text-right"},[r("AppPaging",{attrs:{total:e.allTate,pageSize:e.paramData.pageSize,currentPage:e.paramData.page},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1)])]),r("el-dialog",{attrs:{title:"工厂及主仓库",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.dialogFormVisibleClosed,opened:e.dialogFormClosed}},[r("el-form",{ref:"formBrand",staticClass:"demo-ruleForm",attrs:{model:e.formBrand,rules:e.rules}},[r("el-form-item",{attrs:{label:"区域：",prop:"rela","label-width":e.formLabelWidth}},[e.editState?r("div",[r("div",[e._v("当前区域： "),r("span",[e._v(e._s(e.formBrand.provinceName)+"- "+e._s(e.formBrand.cityName)+" - "+e._s(e.formBrand.countyName))])])]):e._e(),r("AppRegion",{ref:"child",on:{valueRegion:e.chengRegionAddress}})],1),r("el-form-item",{attrs:{label:"工厂名称:",prop:"namecode","label-width":e.formLabelWidth}},[r("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off",disabled:"***"==e.formBrand.dutyofficer},model:{value:e.formBrand.namecode,callback:function(t){e.$set(e.formBrand,"namecode",t)},expression:"formBrand.namecode"}}),e.editState&&e.formBrand.data?r("span",{staticStyle:{"margin-left":"5px"}},[e._v(" (自营工厂)")]):e._e()],1),r("el-form-item",{attrs:{label:"预付款百分比:","label-width":e.formLabelWidth}},[r("el-input",{ref:"bfbA",staticStyle:{width:"180px"},attrs:{type:"Number",min:0,max:100},model:{value:e.formBrand.paybit,callback:function(t){e.$set(e.formBrand,"paybit",t)},expression:"formBrand.paybit"}},[r("template",{slot:"append"},[e._v("%")])],2),r("el-input-number",{staticStyle:{display:"none"},attrs:{min:0,max:100,precision:0},model:{value:e.formBrand.paybit,callback:function(t){e.$set(e.formBrand,"paybit",t)},expression:"formBrand.paybit"}})],1),r("el-row",{staticStyle:{"margin-bottom":"0"}},[r("el-col",{attrs:{span:8}},["***"!==e.formBrand.linkman?r("el-form-item",{attrs:{label:"联系人:","label-width":e.formLabelWidth}},[r("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.formBrand.linkman,callback:function(t){e.$set(e.formBrand,"linkman",t)},expression:"formBrand.linkman"}})],1):e._e()],1),r("el-col",{attrs:{span:16}},["***"!==e.formBrand.phone?r("el-form-item",{attrs:{label:"联系人电话:","label-width":e.formLabelWidth}},[r("el-input",{staticStyle:{width:"280px"},attrs:{autocomplete:"off"},model:{value:e.formBrand.phone,callback:function(t){e.$set(e.formBrand,"phone",t)},expression:"formBrand.phone"}})],1):e._e()],1)],1),"***"!==e.formBrand.yearamount?r("el-form-item",{attrs:{label:"年总开票金额(元):","label-width":e.formLabelWidth}},[r("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off",type:"number"},model:{value:e.formBrand.yearamount,callback:function(t){e.$set(e.formBrand,"yearamount",t)},expression:"formBrand.yearamount"}})],1):e._e(),r("el-row",{staticStyle:{"margin-bottom":"0"}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"收款人:","label-width":e.formLabelWidth}},[r("el-input",{staticStyle:{width:"180px"},attrs:{autocomplete:"off"},model:{value:e.formBrand_extraInfo.payee,callback:function(t){e.$set(e.formBrand_extraInfo,"payee",t)},expression:"formBrand_extraInfo.payee"}})],1)],1),r("el-col",{attrs:{span:16}},[r("el-form-item",{attrs:{label:"收款账号:","label-width":e.formLabelWidth}},[r("el-input",{staticStyle:{width:"280px"},attrs:{autocomplete:"off"},model:{value:e.formBrand_extraInfo.paymentAccount,callback:function(t){e.$set(e.formBrand_extraInfo,"paymentAccount",t)},expression:"formBrand_extraInfo.paymentAccount"}})],1)],1)],1),r("el-form-item",{attrs:{label:"开户行:","label-width":e.formLabelWidth}},[r("el-input",{staticStyle:{width:"400px"},attrs:{autocomplete:"off"},model:{value:e.formBrand_extraInfo.openingBank,callback:function(t){e.$set(e.formBrand_extraInfo,"openingBank",t)},expression:"formBrand_extraInfo.openingBank"}})],1),r("el-form-item",{attrs:{label:"LOGO:","label-width":e.formLabelWidth}},[r("AppUploadUrl",{attrs:{imageUrl:e.formBrand.logourl},on:{uploadUrl:e.clickUploadUrl}})],1),!e.editState&&e.buttonPermissions.indexOf(10112)>=0?r("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"是否为华项直营工厂:","label-width":"150px"}},[r("el-switch",{attrs:{"active-color":"#009688"},model:{value:e.formBrand.data,callback:function(t){e.$set(e.formBrand,"data",t)},expression:"formBrand.data"}})],1):e._e()],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",disabled:e.loadingFactory},on:{click:function(t){return e.addFactory("formBrand")}}},[e._v(e._s(e.editState?"修 改":"添 加"))])],1)],1),r("el-dialog",{attrs:{title:"批量设置工厂商品税率",visible:e.taxrate_data.sync,width:"500px"},on:{"update:visible":function(t){return e.$set(e.taxrate_data,"sync",t)}}},[r("el-form",{staticStyle:{"padding-left":"30px"},attrs:{model:e.form}},[r("div",{staticStyle:{"margin-bottom":"30px"}},[r("el-radio-group",{model:{value:e.TaxRateRadio,callback:function(t){e.TaxRateRadio=t},expression:"TaxRateRadio"}},[r("el-radio",{attrs:{label:1}},[e._v("不含税")]),r("el-radio",{attrs:{label:2}},[e._v("含税")])],1)],1),r("el-form-item",{attrs:{label:"税率:","label-width":"50px"}},[r("el-select",{attrs:{placeholder:"请选择",disabled:"2"==e.TaxRateRadio},model:{value:e.taxrate_data.taxrate,callback:function(t){e.$set(e.taxrate_data,"taxrate",t)},expression:"taxrate_data.taxrate"}},e._l(e.optionsMethod1,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),r("div",{staticStyle:{color:"red","margin-left":"10px"}},[e._v("注：批量设置工厂商品的税率")])],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.taxrate_data.sync=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.get_taxrate}},[e._v("确 定")])],1)],1),r("LeadingCadre",{ref:"LeadingCadre",on:{ToUpDate:e.ToUpDate}})],1)},n=[],o=a("5530"),i=(a("d3b7"),a("159b"),a("b64b"),a("5ac1")),l=a("2a02"),s=a("2f62"),c=a("4795"),d=a("5a27"),u=a("210b7"),f=a("775f"),m=a("19a3"),p=a("2f88"),h={components:{LeadingCadre:i["a"],AppPaging:p["a"],AppRegion:f["a"],AppUploadUrl:m["a"]},data:function(){return{scrollTop:0,scrollLeft:0,FactoryName:"",QueryFactorylist:[],pay_advance:{sync:!1,taxrate:0,factoryId:"",namecode:""},taxrate_data:{sync:!1,taxrate:0,factoryId:"",namecode:""},TaxRateRadio:2,flagBoll:!0,loadingWeb:!0,loadingQuery:!1,svalue1:"",svalue2:"",info:{isTrue:!1,isShow:!0},data:u,form:{province:"",city:"",region:"",street:""},formQuery:{factoryName:"",phone:""},optionsFactory:[],provinceList:[],cityList:[],regionList:[],streetList:[],tableData:[],loadingTab:!1,allTate:20,currentPage:1,dialogFormVisible:!1,loadingFactory:!1,formBrand:{data:!1,rela:"",namecode:"",contact:"",phone:"",yearamount:"",logourl:"",extraInfo:{regionname:""},provinceId:"",cityId:"",countyId:"",streetId:""},formBrand_extraInfo:{payee:"",paymentAccount:"",openingBank:""},rules:{rela:d["a"],contact:d["c"],namecode:d["c"],phone:d["d"]},editId:"",formLabelWidth:"130px",editState:0,chengRegionObje:{},Pages:1,shopperWarehouseId:"",findUserList:[],optionsMethod1:[{value:0,label:"0%"},{value:1,label:"1%"},{value:2,label:"2%"},{value:3,label:"3%"},{value:4,label:"4%"},{value:5,label:"5%"},{value:6,label:"6%"},{value:7,label:"7%"},{value:8,label:"8%"},{value:9,label:"9%"},{value:10,label:"10%"},{value:11,label:"11%"},{value:12,label:"12%"},{value:13,label:"13%"},{value:14,label:"14%"},{value:15,label:"15%"},{value:16,label:"16%"},{value:17,label:"17%"},{value:18,label:"18%"},{value:19,label:"19%"},{value:20,label:"20%"}],isShowDutyofficer:!1,buttonPermissions:[],paramData:{page:1,pageSize:24}}},computed:Object(o["a"])({},Object(s["c"])({roles:"roles",userId:"user/userId",name:"user/name"})),created:function(){this.buttonPermissions=this.roles[0].buttonPermissions,this.provinceList=this.data;var e={page:1,pageSize:this.paramData.pageSize};this.paramData=e,this.getFactor(e),this.getFactoryLists()},mounted:function(){var e=this;Object(l["c"])().then((function(t){200===t.code&&(e.findUserList=t.data)}))},methods:{QueryFactory:function(e){var t=this;e&&""!==e&&(this.FactoryName=e),""!==this.FactoryName?Object(l["f"])({page:1,pageSize:50,factoryName:this.FactoryName}).then((function(e){200===e.code&&(t.QueryFactorylist=e.data.list)})):this.$message.warning("请输入要查询的包含字段")},dialogFormClosed:function(){this.$refs.child.setValueNull1(),1!==this.editState&&this.$refs["formBrand"].resetFields()},clockFactory:function(e){var t=this;this.formBrand.rela="",this.regionNameAddress="",this.editId="",e&&(this.isShowDutyofficer=!1),this.loadingQuery=!1,this.dialogFormVisible=!0;this.editState;this.formBrand_extraInfo={payee:"",paymentAccount:"",openingBank:""},this.formBrand={data:!1,namecode:"",rela:"",contact:"",phone:"",logourl:"",extraInfo:{regionname:""},provinceId:"",cityId:"",countyId:"",streetId:""},this.editState=0,this.flagBoll=!1,this.$nextTick((function(){t.flagBoll=!0}))},input_focus:function(e){this.$refs[e].focus()},get_pay_advance:function(){},Percentage_Init:function(e){},Percentage_change:function(e){this.formBrand.paybit=e},clickLeadingCadre:function(e){this.$refs["LeadingCadre"].init(e)},ToUpDate:function(){this.getFactor(this.paramData)},getFactor:function(e){var t=this;this.loadingWeb=!0,this.loadingQuery=!0,Object(l["f"])(e).then((function(e){if(t.loadingWeb=!1,t.loadingQuery=!1,200===e.code){var a=e.data.list;a.forEach((function(e){var t=[];e.officerList.forEach((function(e){t.push(e.principalUser)})),e.dutyofficer2=t.toString()})),t.tableData=a,t.loadingTab=!1,t.allTate=e.data.total,t.currentPage=e.data.pageNum}else t.$message({message:e.message,type:"warning"})}))},onSubmit:function(){var e=this.chengRegionObje,t=Object.keys(e).length,a=Object(o["a"])(Object(o["a"])({},this.formQuery),{},{pageSize:this.paramData.pageSize,page:1});t&&(a.provinceId=e.provinceId||"",a.cityId=e.cityId||"",a.countyId=e.regionId||"",a.streetId=e.streetId||""),Object.keys(a).forEach((function(e){var t=a[e];""===t&&delete a[e]})),this.paramData=a,this.getFactor(a),this.loadingQuery=!0},get_taxrate:function(){var e=this;2===this.TaxRateRadio&&(this.taxrate_data.taxrate=0),Object(l["o"])({taxrate:this.taxrate_data.taxrate/100,namecode:this.taxrate_data.namecode,id:this.taxrate_data.factoryId}).then((function(t){200===t.code&&(e.$message({message:"修改成功",type:"success"}),e.taxrate_data.sync=!1)}))},click_taxrate_dialog:function(){this.taxrate_data.factoryId=this.formBrand.id,this.taxrate_data.namecode=this.formBrand.namecode,this.TaxRateRadio=2,this.taxrate_data.taxrate=0,this.taxrate_data.sync=!0},click_taxrate_init:function(e){this.taxrate_data.factoryId=e.id,this.taxrate_data.namecode=e.factoryName,this.TaxRateRadio=2,this.taxrate_data.taxrate=0,this.taxrate_data.sync=!0},clickEdit:function(e){this.dialogFormVisible=!0,this.editId=e.id,this.shopperWarehouseId=e.shopperWarehouseId,this.getFactoryDetail(e.id),this.editState=1},getFactoryDetail:function(e){var t=this,a={id:e};Object(l["e"])(a).then((function(e){if(t.loadingQuery=!1,200===e.code){var a=e.data;a.logourl=a.logoUrl,a.namecode=a.factoryName,a.rela="1",t.formBrand=e.data,0===t.formBrand.dutyofficer||873===t.userId?t.isShowDutyofficer=!1:t.isShowDutyofficer=!0,t.$set(t.formBrand,"shopperWarehouseId",t.shopperWarehouseId),t.get_extrainfo(e.data.vdata)}else 408!==e.code&&406!==e.code||(t.dialogFormVisible=!1)}))},get_extrainfo:function(e){var t={openingBank:e.openingBank||"",payee:e.payee||"",paymentAccount:e.paymentAccount||""};"null"===t.openingBank&&(t.openingBank=""),"null"===t.payee&&(t.payee=""),"null"===t.paymentAccount&&(t.paymentAccount=""),this.formBrand_extraInfo=t},addFactory_1:function(){},addFactory:function(e){var t=this,a=this;this.$refs[e].validate((function(e){if(!e)return a.loadingAdd=!1,!1;var r=t.formBrand;r.data=r.data?1:0,r.contact=t.formBrand.linkman;var n=t.chengRegionObje;"***"===r.contact?delete r.contact:r.contact,"***"===r.linkman?delete r.linkman:r.linkman,"***"===r.phone?delete r.phone:r.phone,"***"===r.yearamount?delete r.yearamount:r.yearamount,delete r.dutyofficer;var i=Object(o["a"])(Object(o["a"])(Object(o["a"])({id:t.editId},r),n),r.rela),l=t.editState;if(i.extraInfo=i.extraInfo||{},l){var s=Object(o["a"])(Object(o["a"])({extraInfo:{regionname:""}},i),{},{id:t.editId});s.extraInfo.regionname=n.selectedName;var c=Object(o["a"])(Object(o["a"])({},t.formBrand_extraInfo),{},{regionname:n.selectedName||""});s.extraInfo=c,delete s.cityName,delete s.countyName,delete s.factoryStatus,delete s.factoryName,delete s.provinceName,delete s.streetName,delete s.logoUrl,delete s.selectedName,delete s.vdata,t.updateFactory(s)}else{i.extraInfo.regionname=n.selectedName;var d=Object(o["a"])(Object(o["a"])({},t.formBrand_extraInfo),{},{regionname:n.selectedName||""});i.extraInfo=d,delete i.selectedName,delete i.id,t.insertFactory(i)}}))},getFactoryLists:function(){var e=this;Object(l["g"])().then((function(t){200===t.code?e.optionsFactory=t.data:e.$message({message:t.message,type:"warning"})}))},handleSizeChange:function(e){this.paramData.pageSize=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.paramData.page=e,this.ToUpDate()},chengRegion:function(e){var t=e;this.chengRegionObje=t},chengRegionAddress:function(e){this.formBrand.rela=e,this.regionNameAddress=e.selectedName},clickDele:function(e,t){var a=this,r=Date.parse(new Date),n=Date.parse(new Date(t.optdate)),o=(r-n)/864e5;if(o>=3)this.$message({type:"info",message:"超过3天无法删除"});else{var i={idList:[e]};this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.deleteFactory(i,e)})).catch((function(){a.$message({type:"info",message:"已取消删除"})}))}},deleteFactory:function(e,t){var a=this;Object(l["a"])(e).then((function(e){if(a.loadingQuery=!1,a.dialogFormVisible=!1,200===e.code){var r=a.tableData;Object(c["a"])(r,t),a.$message({message:"禁用成功",type:"success"})}else a.$message({message:e.message,type:"warning"})}))},clickUploadUrl:function(e){this.formBrand.logourl=e},dialogFormVisibleClosed:function(){this.$refs.formBrand.resetFields(),this.formBrand={},this.isShowDutyofficer=!1},insertFactory:function(e){var t=this;this.loadingFactory=!0,Object(l["k"])(e).then((function(e){if(t.loadingFactory=!1,200===e.code){t.dialogFormVisible=!1;var a={page:1,pageSize:20};t.getFactor(a),t.$message({message:"成功添加！",type:"success"}),t.getFactor(t.paramData)}}))},updateFactory:function(e){var t=this;this.loadingFactory=!0,Object(l["n"])(e).then((function(a){if(t.loadingFactory=!1,200===a.code){t.dialogFormVisible=!1;for(var r=t.tableData,n=0;n<r.length;n++)r[n].id===e.id&&(r[n].vdata.regionname=t.regionNameAddress?t.regionNameAddress:r[n].vdata.regionname,r[n].factoryName=e.namecode);t.$message({message:"成功修改！",type:"success"}),t.getFactor(t.paramData)}}))},purchase:function(){this.$message({message:"正在开发中",type:"warning"})},address:function(){this.$message({message:"正在开发中",type:"warning"})}},name:"Ucmanagement-factory-factoryHome",activated:function(){var e=this;setTimeout((function(){e.$refs.TableData.bodyWrapper.scrollTop=e.scrollTop,e.$refs.TableData.bodyWrapper.scrollLeft=e.scrollLeft}),60)},beforeRouteLeave:function(e,t,a){this.scrollTop=this.$refs.TableData.bodyWrapper.scrollTop,this.scrollLeft=this.$refs.TableData.bodyWrapper.scrollLeft,a()}},b=h,g=(a("ac8d"),a("2877")),y=Object(g["a"])(b,r,n,!1,null,"4fe6b514",null);t["default"]=y.exports},"74bc":function(e,t,a){},8126:function(e,t,a){e.exports=a.p+"img/demo_logo.dba28ff5.jpg"},a195:function(e,t,a){},ac8d:function(e,t,a){"use strict";a("74bc")},cd02:function(e,t,a){},d12e:function(e,t,a){"use strict";a("a195")},e848:function(e,t,a){"use strict";a("cd02")}}]);