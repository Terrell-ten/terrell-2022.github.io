(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66537ebc"],{"062d":function(t,e,a){"use strict";a.d(e,"z",(function(){return n})),a.d(e,"b",(function(){return c})),a.d(e,"I",(function(){return s})),a.d(e,"F",(function(){return l})),a.d(e,"n",(function(){return d})),a.d(e,"m",(function(){return u})),a.d(e,"o",(function(){return p})),a.d(e,"u",(function(){return m})),a.d(e,"C",(function(){return f})),a.d(e,"x",(function(){return g})),a.d(e,"y",(function(){return h})),a.d(e,"E",(function(){return y})),a.d(e,"k",(function(){return b})),a.d(e,"g",(function(){return v})),a.d(e,"l",(function(){return I})),a.d(e,"j",(function(){return _})),a.d(e,"G",(function(){return F})),a.d(e,"w",(function(){return w})),a.d(e,"K",(function(){return O})),a.d(e,"s",(function(){return S})),a.d(e,"L",(function(){return N})),a.d(e,"J",(function(){return k})),a.d(e,"H",(function(){return D})),a.d(e,"B",(function(){return j})),a.d(e,"d",(function(){return x})),a.d(e,"f",(function(){return C})),a.d(e,"A",(function(){return L})),a.d(e,"e",(function(){return T})),a.d(e,"p",(function(){return B})),a.d(e,"D",(function(){return P})),a.d(e,"r",(function(){return $})),a.d(e,"q",(function(){return R})),a.d(e,"t",(function(){return V})),a.d(e,"v",(function(){return G})),a.d(e,"h",(function(){return M})),a.d(e,"i",(function(){return Q})),a.d(e,"c",(function(){return A})),a.d(e,"a",(function(){return z}));var r=a("83c3"),o=a("4328"),i=a.n(o);function n(t){return Object(r["a"])({url:"/product/selectProductList",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/admin/data/selectByCond/I_packmaterial?pageNo=0",method:"post",data:t})}function s(t){return Object(r["a"])({url:"/product/selectProductInventory",method:"get",params:t})}function l(t){return Object(r["a"])({url:"/product/getReturnConfiguration",method:"get",params:t})}function d(){return Object(r["a"])({url:"/admin/factory/getFactoryList",method:"get"})}function u(t){return Object(r["a"])({url:"/admin/factory/getFactoryIdAndName",method:"get",params:t})}function p(t){return Object(r["a"])({url:"/admin/factory/getFactoryByPrincipal",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/admin/purchase/temp/getProductMaterial",method:"get",params:t})}function f(t){return Object(r["a"])({url:"/admin/purchase/temp/materialsOutbound",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/product/saveProduct",method:"post",data:t})}function h(t){return Object(r["a"])({url:"/product/updateProduct",method:"post",data:t})}function y(t){return Object(r["a"])({url:"/product/saveReturnConfiguration",method:"POST",data:t})}function b(t){return Object(r["a"])({url:"/product/deleteProductUnit",method:"post",data:i.a.stringify(t)})}function v(t){return Object(r["a"])({url:"/admin/shopper/warehouse/getWarehouseIdAndname",method:"get",params:t})}function I(t){return Object(r["a"])({url:"/product/deleteProductWdata",method:"post",data:i.a.stringify(t)})}function _(t){return Object(r["a"])({url:"/product/copyProductToNewFactory",method:"post",data:t})}function F(t){return Object(r["a"])({url:"/product/selectProductInfo",method:"get",params:t})}function w(t){return Object(r["a"])({url:"/admin/data/execProcedure/getgood_inventory?pageNo=0",method:"post",data:t})}function O(t){return Object(r["a"])({url:"/admin/data/execProcedure/st_stock_procdct?pageNo=0",method:"post",data:t})}function S(t){return Object(r["a"])({url:"/product/isUpdate",method:"get",params:t})}function N(t){return Object(r["a"])({url:"/product/updeteProductInventory",method:"post",data:t})}function k(t){return Object(r["a"])({url:"/product/updateMaterialInventory",method:"post",data:t})}function D(t){return Object(r["a"])({url:"/admin/data/execProcedure/st_stock_packmaterial?pageNo=0",method:"post",data:t})}function j(t){return Object(r["a"])({url:"/product/isUpdateMaterialInventory",method:"get",params:t})}function x(t){return Object(r["a"])({url:"/admin/data/selectByCond/I_product_wdata?pageNo=0",method:"post",data:t})}function C(t,e){return Object(r["a"])({url:"/admin/data/updateById/I_product_wdata?dataId="+e,method:"post",data:t})}function L(t){return Object(r["a"])({url:"/product/isUpdateMaterialInventory",method:"GET",params:t})}function T(t){return Object(r["a"])({url:"/admin/data/insert/I_product_wdata",method:"post",data:t})}function B(t){return Object(r["a"])({url:"/productionPlan/getFactoryPurchasePlanDetailList",method:"get",params:t})}function P(t){return Object(r["a"])({url:"/admin/factory/purchase/plan/purchaseStatistics",method:"get",params:t})}function $(t){return Object(r["a"])({url:"/goodsWarehouse/getInventoryList",method:"get",params:t})}function R(t){return Object(r["a"])({url:"/goodsWarehouse/getInWarehouse",method:"get",params:t})}function V(t){return Object(r["a"])({url:"/goodsOutbound/getOntWarehouse",method:"get",params:t})}function G(t){return Object(r["a"])({url:"/admin/hxhouse/gethxhouseList",method:"get",params:t})}function M(t){return Object(r["a"])({url:"/goodsWarehouse/amendmentCurrentInventory",method:"post",data:t})}function Q(t){return Object(r["a"])({url:"/admin/hxhouse/amendmentHxCurrentInventory",method:"post",data:t})}function A(t){var e={getColumns:[{nameCode:"id"},{nameCode:"data",vdata:{DISPNAME:"sku"}},{nameCode:"namecode"},{nameCode:"specification",vdata:{DISPNAME:"specif"}},{nameCode:"unit"}],Condition:[{nameCode:"nodetype",data:t.nodetype},{nameCode:"namecode",nodetype:"LIKE",data:"%"+t.namecode+"%"}]};return Object(r["a"])({url:"/admin/data/selectByCond/I_product?pageNo=0",method:"post",data:e})}function z(t){return Object(r["a"])({url:"/admin/data/execProcedure/Confirm_favtory_purchase?pageNo=0",method:"post",data:t})}},"29d8":function(t,e,a){"use strict";a("98a5")},"2a02":function(t,e,a){"use strict";a.d(e,"j",(function(){return o})),a.d(e,"p",(function(){return i})),a.d(e,"i",(function(){return n})),a.d(e,"b",(function(){return c})),a.d(e,"f",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"h",(function(){return d})),a.d(e,"e",(function(){return u})),a.d(e,"n",(function(){return p})),a.d(e,"k",(function(){return m})),a.d(e,"a",(function(){return f})),a.d(e,"q",(function(){return g})),a.d(e,"c",(function(){return h})),a.d(e,"d",(function(){return y})),a.d(e,"o",(function(){return b})),a.d(e,"l",(function(){return v})),a.d(e,"m",(function(){return I}));var r=a("83c3");function o(t){return Object(r["a"])({url:"/admin/shopper/warehouse/list/page",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/admin/shopper/warehouse/update",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/admin/shopper/warehouse/get",method:"get",params:t})}function c(t){return Object(r["a"])({url:"/admin/shopper/warehouse/delete",method:"POST",data:t})}function s(t){return Object(r["a"])({url:"/admin/factory/list/page",method:"POST",data:t})}function l(t){return Object(r["a"])({url:"/admin/factory/getFactoryList",method:"get",data:t})}function d(t){return Object(r["a"])({url:"/admin/shopper/warehouse/list",method:"GET",data:t})}function u(t){return Object(r["a"])({url:"/admin/factory/get",method:"get",params:t})}function p(t){return Object(r["a"])({url:"/admin/factory/update",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/admin/factory/insert",method:"post",data:t})}function f(t){return Object(r["a"])({url:"/admin/factory/delete",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/factory/update",method:"post",data:t})}function h(t){return Object(r["a"])({url:"/admin/user/findUserList",method:"get",params:t})}function y(t){return Object(r["a"])({url:"/admin/factory/list/sku",method:"get",params:t})}function b(t){return Object(r["a"])({url:"/admin/factory/updateProductTaxRate",method:"post",data:t})}function v(t){return Object(r["a"])({url:"/admin/officer/saveDutyOfficer",method:"post",data:t})}function I(t){return Object(r["a"])({url:"/admin/officer/updateDutyOfficerStatus",method:"post",data:t})}},"2f88":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.pageSizesArr||t.pageSizesArrInit,"page-size":t.pageSize,layout:t.layout,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},o=[],i=(a("a9e3"),a("ac1f"),a("1276"),{props:{pageSize:{type:Number,default:10},pageSizesArr:{type:Array,default:null},layout:{type:String,default:"total,sizes,prev, pager, next"},total:Number,currentPage:Number},data:function(){return{pageSizesArrInit:[24,100,200,500,1e3]}},mounted:function(){var t=location.href.split("/")[2];"192.168.1.145:8080"===t&&(this.pageSizesArrInit=[2,24,100,200,500,1e3])},methods:{handleSizeChange:function(t){this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}}}),n=i,c=a("2877"),s=Object(c["a"])(n,r,o,!1,null,"79dfe774",null);e["a"]=s.exports},"3f39":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-select",{style:"width:"+t.liWidth,attrs:{placeholder:"省级",clearable:""},on:{change:t.changePr},model:{value:t.provinceName,callback:function(e){t.provinceName=e},expression:"provinceName"}},t._l(t.provinceList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.namecode,value:t.id}})})),1),a("el-select",{style:"width:"+t.liWidth,attrs:{placeholder:"市级",clearable:""},on:{change:t.changeCi},model:{value:t.cityName,callback:function(e){t.cityName=e},expression:"cityName"}},t._l(t.cityList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.namecode,value:t.id}})})),1),a("el-select",{style:"width:"+t.liWidth,attrs:{placeholder:"区级",clearable:""},on:{change:t.changeRe},model:{value:t.regionName,callback:function(e){t.regionName=e},expression:"regionName"}},t._l(t.regionList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.namecode,value:t.id}})})),1)],1)},o=[],i=(a("a9e3"),a("d81d"),a("7db0"),a("d3b7"),a("da87")),n={props:{liWidth:{type:String,default:"160px"},areaId:{type:String,default:""},state:{type:Number,default:100},cleanAegion:{type:Number,default:100}},data:function(){return{provinceList:[],cityList:[],regionList:[],streetList:[],provinceName:"",cityName:"",regionName:"",id:"",setValueNullNum2:0,regionSelectedName:"",citySelectedName:"",provinceSelectedName:"",provinceId:"",cityId:"",regionId:"",streetId:""}},computed:{},created:function(){this.getRegion(),this.getList()},methods:{getId:function(t){this.provinceName="",this.cityName="",this.regionName="",t.length>=2&&(this.provinceName=1*t.substr(0,2),this.changePr(this.provinceName)),t.length>=4&&(this.cityName=1*t.substr(0,4),this.changeCi(this.cityName)),t.length>=6&&(this.regionName=1*t.substr(0,6))},getList:function(){},setValueNull1:function(){this.provinceName="",this.cityName="",this.regionName="",this.cityList=[],this.regionList=[],this.streetList=[]},setValueNull3:function(){this.regionName=""},setValueNull4:function(){},getRegion:function(){var t=this,e={parentId:1};Object(i["h"])(e).then((function(e){var a=e.data.map((function(t){return Object.assign(t,{index:1})}));t.getId(t.areaId),t.provinceList=a,t.loading=!1}))},changePr:function(t){var e=this;if(t){var a={};a=this.provinceList.find((function(e){return e.id===t})),this.provinceSelectedName=a;var r={parentId:t};this.id=t,this.cityName="",this.regionName="",Object(i["h"])(r).then((function(r){e.cityList=r.data;var o={};if(o=r.data[0].namecode,e.citySelectedName=o,e.provinceId=t,100===e.$props.state){e.cityName=r.data[0].id;var n=r.data[0].id,c={parentId:r.data[0].id};Object(i["h"])(c).then((function(r){e.regionName=r.data[0].id,e.regionList=r.data;var c={},s=r.data[0].id;c=r.data[0].namecode,e.regionSelectedName=c;var l={parentId:r.data[0].id};Object(i["h"])(l).then((function(r){var i={id:r.data[0].id,selectedName:a.namecode+o+c,provinceId:t,cityId:n,countyId:s,streetId:r.data[0].id};e.$emit("valueRegion",i),e.streetList=r.data}))}))}else{var s={id:t,selectedName:a.namecode,provinceId:t};e.$emit("valueRegion",s)}}))}else{this.cityName="",this.regionName="",this.provinceId="",this.cityId="",this.regionId="",this.streetId="";var o={provinceId:"",cityId:"",countyId:"",streetId:""};this.$emit("valueRegion",o)}},changeCi:function(t){var e=this;if(t){var a=this.provinceSelectedName,r={};r=this.cityList.find((function(e){return e.id===t})),this.citySelectedName=r;var o={parentId:t};this.id=t,Object(i["h"])(o).then((function(o){e.regionList=o.data,e.cityId=t;var n={};if(n=o.data[0].namecode,e.regionSelectedName=n,100===e.$props.state){e.regionName=o.data[0].id;var c=o.data[0].id,s={parentId:o.data[0].id};Object(i["h"])(s).then((function(o){e.streetList=o.data;var i={};i=o.data[0].namecode,e.streetSelectedName=i;var s={id:o.data[0].id,selectedName:a.namecode+r.namecode+n,provinceId:e.provinceId,cityId:t,countyId:c};e.$emit("valueRegion",s)}))}else{var l={id:t,selectedName:a.namecode+r.namecode,provinceId:e.provinceId,cityId:t};e.$emit("valueRegion",l)}}))}else{this.cityName="",this.regionName="",this.cityId="",this.regionId="";var n={provinceId:this.provinceId,cityId:"",countyId:""};this.$emit("valueRegion",n)}},changeRe:function(t){var e=this;if(t){var a=this.provinceSelectedName,r=this.citySelectedName,o="string"===typeof r?this.citySelectedName:this.citySelectedName.namecode,n={};this.regionId=t,n=this.regionList.find((function(e){return e.id===t})),this.regionSelectedName=n;var c={parentId:t};this.id=t,Object(i["h"])(c).then((function(r){e.streetList=r.data;var i={};if(i=r.data[0].namecode,e.streetSelectedName=i,100===e.$props.state){var c={id:r.data[0].id,selectedName:a.namecode+o+n.namecode,provinceId:e.provinceId,cityId:e.cityId,countyId:t};e.$emit("valueRegion",c)}else{var s={id:t,selectedName:a.namecode+o+n.namecode,provinceId:e.provinceId,cityId:e.cityId,countyId:t};e.$emit("valueRegion",s)}}))}else{this.regionName="",this.regionId="",this.streetId="";var s={provinceId:this.provinceId,cityId:this.cityId,countyId:""};this.$emit("valueRegion",s)}},changeSt:function(t){if(t){var e=this.provinceSelectedName,a=void 0===this.citySelectedName.namecode?this.citySelectedName:this.citySelectedName.namecode,r=void 0===this.regionSelectedName?this.regionSelectedName:this.regionSelectedName.namecode,o={id:t,selectedName:e.namecode+a+r,provinceId:this.provinceId,cityId:this.cityId,countyId:this.regionId};this.id=t,this.$emit("valueRegion",o)}else{var i={provinceId:this.provinceId,cityId:this.cityId,countyId:this.regionId};this.$emit("valueRegion",i)}},setValueNull2:function(t){this.setValueNullNum2=t}},mounted:function(){}},c=n,s=a("2877"),l=Object(s["a"])(c,r,o,!1,null,"414bbfbd",null);e["a"]=l.exports},"7db0":function(t,e,a){"use strict";var r=a("23e7"),o=a("b727").find,i=a("44d2"),n="find",c=!0;n in[]&&Array(1)[n]((function(){c=!1})),r({target:"Array",proto:!0,forced:c},{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i(n)},"98a5":function(t,e,a){},b4f5:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"warehouse main-conent flex-main-conent"},[a("div",{staticClass:"flex-box"},[a("div",{staticClass:"flex-top"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formQuery}},[a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"日期从："}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",align:"right",placeholder:"开始日期","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.starDataMax}},model:{value:t.formQuery.startDate,callback:function(e){t.$set(t.formQuery,"startDate",e)},expression:"formQuery.startDate"}}),t._v(" - "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",align:"right",placeholder:"结束时间","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.endDataMin}},model:{value:t.formQuery.endDate,callback:function(e){t.$set(t.formQuery,"endDate",e)},expression:"formQuery.endDate"}})],1)]),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"生产工厂："}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:t.factoryIdChange},model:{value:t.formQuery.factoryId,callback:function(e){t.$set(t.formQuery,"factoryId",e)},expression:"formQuery.factoryId"}},t._l(t.FactoryNameList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.factoryName,value:t.id}})})),1)],1),a("el-form-item",{staticStyle:{"margin-right":"30px",display:"none"},attrs:{label:"商品名称："}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择","filter-method":t.search,clearable:""},on:{change:t.searchCle,focus:t.GoodsFocus},model:{value:t.productId,callback:function(e){t.productId=e},expression:"productId"}},t._l(t.optionsGoods,(function(t){return a("el-option",{key:t.id,attrs:{label:t.namecode,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"商品名称："}},[a("el-input",{staticStyle:{width:"200px"},attrs:{clearable:""},model:{value:t.formQuery.productName,callback:function(e){t.$set(t.formQuery,"productName",e)},expression:"formQuery.productName"}})],1),a("el-form-item",{attrs:{label:"SKU："}},[a("el-input",{staticStyle:{width:"240px"},attrs:{clearable:""},model:{value:t.formQuery.sku,callback:function(e){t.$set(t.formQuery,"sku",e)},expression:"formQuery.sku"}})],1),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"收货区域筛选："}},[a("AppRegion",{ref:"child",attrs:{state:101},on:{valueRegion:t.chengRegion}})],1),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"状态："}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.statusChange},model:{value:t.formQuery.status,callback:function(e){t.$set(t.formQuery,"status",e)},expression:"formQuery.status"}},t._l(t.statusList,(function(t){return a("el-option",{key:t.value,attrs:{label:t.labelName,value:t.value}})})),1)],1),a("el-button",{staticStyle:{"margin-right":"30px"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("综合查询")]),0==t.paramData.status?[a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",disabled:[-1,-2].indexOf(t.paramData.factoryId)>=0},on:{click:t.FactoryMapping}},[t._v("按工厂批量指派")])],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",disabled:!t.paramData.sku},on:{click:t.GoodsMapping}},[t._v("按商品批量指派")])],1)]:t._e()],2)],1),a("div",{staticClass:"flex-cont"},[-1===t.paramData.factoryId&&0===t.paramData.status?a("div",{staticStyle:{height:"100%"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],key:"table3"+t.paramData.factoryId,ref:"TableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:"",height:"100%","tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{property:"id",label:"明细标识",align:"center",width:"60"}}),a("el-table-column",{attrs:{property:"orderNo",label:"原订单号","min-width":"240",align:"center"}}),a("el-table-column",{attrs:{prop:"optdate",label:"订单日期时间",width:"110",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"receiveArea",label:"收货区域",width:"150",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"namecode",width:"180",label:"商品名称",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[a("i",{staticClass:"el-icon-document-copy",staticStyle:{"margin-right":"10px",cursor:"pointer",color:"#00afff"},attrs:{title:"点击复制"},on:{click:function(a){return t.copyJSON(e.row.namecode)}}}),t._v(" "+t._s(e.row.namecode))])]}}],null,!1,1459291756)}),a("el-table-column",{attrs:{property:"specif",label:"规格",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"sku",label:"SKU",align:"center",width:"200"}}),a("el-table-column",{attrs:{property:"unit",label:"生产单位",align:"center"}}),a("el-table-column",{attrs:{property:"num",label:"生产数量",align:"center"}}),a("el-table-column",{attrs:{property:"unit1",label:"销售单位",align:"center"}}),a("el-table-column",{attrs:{property:"scalnum",label:"销售数量",align:"center"}}),a("el-table-column",{attrs:{property:"postil",label:"订单备注",align:"center","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[t._v(t._s(e.row.postil?e.row.postil:"(点击修改)"))])]),e.row.postil?a("span",[t._v(t._s(t._f("postil_substring")(e.row.postil))+" "),a("i",{staticClass:"el-icon-edit",staticStyle:{color:"dodgerblue","margin-left":"2px",cursor:"pointer"},on:{click:function(a){return t.clickScript(e.row,1)}}})]):a("a",{staticStyle:{cursor:"pointer",color:"dodgerblue"},on:{click:function(a){return t.clickScript(e.row,1)}}},[t._v("备注")])])]}}],null,!1,2667053498)}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.row.loading,expression:"scope.row.loading"}],attrs:{type:"primary"},on:{click:function(a){return t.ClickMapping2(e.row)}}},[t._v("指派工厂")])]}}],null,!1,4093874007)})],1)],1):a("div",{staticStyle:{height:"100%"}},[1==t.statusId?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],key:"table1",ref:"TableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%",stripe:"",border:"","tooltip-effect":"dark","highlight-current-row":""}},[a("el-table-column",{attrs:{property:"id",label:"明细标识",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"factoryName",label:"生产工厂",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.factoryName?a("div",[t._v(" "+t._s(e.row.factoryName)+" ")]):t._e(),e.row.factoryName?t._e():a("a",{staticStyle:{cursor:"pointer",color:"dodgerblue"},on:{click:function(a){return t.clickFactory(e.row,0)}}},[a("div",[t._v("暂无工厂"),a("i",{staticClass:"el-icon-edit"})])])]}}],null,!1,2496148619)}),a("el-table-column",{attrs:{property:"factoryArea",label:"工厂区域",width:"150",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"namecode",width:"180",label:"商品名称",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[a("i",{staticClass:"el-icon-document-copy",staticStyle:{"margin-right":"10px",cursor:"pointer",color:"#00afff"},attrs:{title:"点击复制"},on:{click:function(a){return t.copyJSON(e.row.namecode)}}}),t._v(" "+t._s(e.row.namecode))])]}}],null,!1,1459291756)}),a("el-table-column",{attrs:{property:"specif",label:"规格",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"sku",width:"200",label:"SKU",align:"center"}}),a("el-table-column",{attrs:{property:"inventory",width:"80",label:"当前库存",align:"center"}}),a("el-table-column",{attrs:{property:"minInventory",width:"80",label:"最低库量",align:"center"}}),a("el-table-column",{attrs:{property:"minQuantity",width:"80",label:"起订量",align:"center"}}),a("el-table-column",{attrs:{property:"lossRate",label:"损耗率",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"num",label:"生产数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"unit",label:"生产单位",align:"center",width:"60"}}),a("el-table-column",{attrs:{property:"scalnum",label:"销售数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"unit1",label:"销售单位",align:"center",width:"60"}})],1):a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],key:"table4",ref:"TableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%",stripe:"",border:"","tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{property:"id",label:"明细标识",align:"center",width:"60"}}),a("el-table-column",{attrs:{prop:"optdate",label:"订单日期时间",width:"95",align:"center"}}),a("el-table-column",{attrs:{property:"receiveArea",label:"收货区域",width:"150",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"namecode","min-width":"180",label:"商品名称",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[a("i",{staticClass:"el-icon-document-copy",staticStyle:{"margin-right":"10px",cursor:"pointer",color:"#00afff"},attrs:{title:"点击复制"},on:{click:function(a){return t.copyJSON(e.row.namecode)}}}),t._v(" "+t._s(e.row.namecode))])]}}])}),a("el-table-column",{attrs:{property:"specif",label:"规格",align:"center"}}),a("el-table-column",{attrs:{property:"sku",width:"200",label:"SKU",align:"center"}}),a("el-table-column",{attrs:{property:"factoryName",label:"生产工厂",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.factoryName?a("div",[t._v(" "+t._s(e.row.factoryName)+" ")]):t._e(),e.row.factoryName?t._e():a("a",{staticStyle:{cursor:"pointer",color:"dodgerblue"},on:{click:function(a){return t.clickFactory(e.row,0)}}},[a("div",[t._v("暂无工厂"),a("i",{staticClass:"el-icon-edit"})])])]}}])}),a("el-table-column",{attrs:{property:"scalnum",label:"销售数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"unit1",label:"销售单位",align:"center",width:"60"}}),a("el-table-column",{attrs:{property:"lastdate",width:"120",label:"最迟交货期",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.lastdate?a("span",[t._v(t._s(e.row.lastdate)+" "),a("el-link",{staticClass:"el-icon-edit",attrs:{type:"primary"},on:{click:function(a){return t.clickLastdate(e.row)}}})],1):t._e(),e.row.lastdate?t._e():a("span",[a("a",{staticStyle:{cursor:"pointer",color:"dodgerblue"},on:{click:function(a){return t.clickLastdate(e.row)}}},[t._v("设置")])])]}}])}),a("el-table-column",{attrs:{property:"script",label:"订单备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{attrs:{placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[a("div",[t._v(t._s(e.row.postil?e.row.postil:"(点击修改)"))])]),e.row.postil?a("span",[t._v(t._s(t._f("postil_substring")(e.row.postil))+" "),a("i",{staticClass:"el-icon-edit",staticStyle:{color:"dodgerblue","margin-left":"2px",cursor:"pointer"},on:{click:function(a){return t.clickScript(e.row,1)}}})]):a("a",{staticStyle:{cursor:"pointer",color:"dodgerblue"},on:{click:function(a){return t.clickScript(e.row,1)}}},[t._v("备注")])])]}}])})]],2)],1)]),a("div",{staticClass:"flex-button"},[a("div",{staticClass:"margin-t16 text-right"},[a("AppPaging",{attrs:{total:t.allTate,pageSize:t.paramData.pageSize,currentPage:t.paramData.page,layout:"total,sizes,prev, pager, next"},on:{handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}})],1)])]),a("el-dialog",{attrs:{visible:t.scriptForm.dialogVisible,title:"修改",width:"30%","destroy-on-close":"",center:""},on:{"update:visible":function(e){return t.$set(t.scriptForm,"dialogVisible",e)}},model:{value:t.scriptForm.dialogVisible,callback:function(e){t.$set(t.scriptForm,"dialogVisible",e)},expression:"scriptForm.dialogVisible"}},[a("el-form",{ref:"scriptForm",attrs:{rules:t.scriptForm.rules,model:t.scriptForm}},[a("el-form-item",{attrs:{label:"备注",required:""}},[a("el-col",{attrs:{span:20}},[a("el-form-item",{attrs:{prop:"script"}},[a("el-input",{attrs:{type:"textarea",placeholder:"备注"},model:{value:t.scriptForm.script,callback:function(e){t.$set(t.scriptForm,"script",e)},expression:"scriptForm.script"}})],1)],1)],1),a("el-form-item",[a("div",{staticStyle:{width:"30%","margin-left":"auto","margin-right":"auto"}},[a("el-button",{on:{click:function(e){return t.resetScript("scriptForm")}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateScript("scriptForm")}}},[t._v("确定")])],1)])],1)],1),a("el-dialog",{attrs:{visible:t.lastdateForm.dialogVisible,title:"修改",width:"20%","destroy-on-close":"",center:""},on:{"update:visible":function(e){return t.$set(t.lastdateForm,"dialogVisible",e)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){return t.resetLastdate("lastdateForm")}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updateLastdate("lastdateForm")}}},[t._v("确定")])],1)]},proxy:!0}]),model:{value:t.lastdateForm.dialogVisible,callback:function(e){t.$set(t.lastdateForm,"dialogVisible",e)},expression:"lastdateForm.dialogVisible"}},[a("div",[a("el-form",{ref:"lastdateForm",attrs:{rules:t.lastdateForm.rules,model:t.lastdateForm}},[a("el-form-item",{attrs:{label:"最迟交货期",required:""}},[a("el-form-item",{attrs:{prop:"lastdate"}},[a("el-date-picker",{attrs:{type:"date",align:"center","unlink-panels":"","value-format":"yyyy-MM-dd"},model:{value:t.lastdateForm.lastdate,callback:function(e){t.$set(t.lastdateForm,"lastdate",e)},expression:"lastdateForm.lastdate"}})],1)],1)],1)],1)]),a("el-dialog",{ref:"goodsBindFactoryRef",staticStyle:{"margin-top":"15vh"},attrs:{title:0===t.statusIdnam?"指派工厂":"修改工厂",visible:t.goodsBindFactory.goodsBindFactoryDialogVisible,center:"",width:"45%"},on:{"update:visible":function(e){return t.$set(t.goodsBindFactory,"goodsBindFactoryDialogVisible",e)}}},[a("div",{staticStyle:{"font-size":"12px",color:"#999","line-height":"1.6","margin-bottom":"10px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",[t._v("物品名称："+t._s(t.goodsBindFactory.order_data.namecode))])],1),a("el-row",{staticStyle:{"margin-top":"10px","font-size":"14px"}},[a("el-col",{attrs:{span:10}},[t._v("规格："+t._s(t.goodsBindFactory.order_data.specif))]),a("el-col",{attrs:{span:6}},[t._v("销售数量："+t._s(t.goodsBindFactory.order_data.scalnum))]),a("el-col",{attrs:{span:6}},[t._v("销售单位："+t._s(t.goodsBindFactory.order_data.unit1))])],1),a("el-row",{staticStyle:{"margin-top":"10px",color:"#333","font-size":"14px"}},[a("el-col",{attrs:{span:14}},[t._v("收货区域："+t._s(t.goodsBindFactory.order_data.receiveArea))])],1)],1),a("el-table",{ref:"factoryTable",attrs:{data:t.goodsBindFactory.goodsBindFactoryList,border:"","tooltip-effect":"light"},on:{"cell-click":this.cellClickFactory}},[a("el-table-column",{attrs:{type:"index",label:"",width:"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{key:e.$index,attrs:{label:e.$index},on:{change:t.supplerRadio},model:{value:t.goodsBindFactory.radioindex,callback:function(e){t.$set(t.goodsBindFactory,"radioindex",e)},expression:"goodsBindFactory.radioindex"}},[t._v(" "+t._s(" ")+" ")])]}}])}),a("el-table-column",{attrs:{property:"factoryName",label:"工厂名称",align:"center"}}),a("el-table-column",{attrs:{property:"factoryArea",label:"所在区域",align:"center"}}),a("el-table-column",{attrs:{property:"minQuantity",label:"起订量",align:"center",width:"110"}}),a("el-table-column",{attrs:{property:"minInventory",label:"最低库存",align:"center",width:"110"}}),a("el-table-column",{attrs:{property:"inventory",label:"库存数量",align:"center",width:"110"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.goodsBindFactory.goodsBindFactoryDialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:this.bingFactory}},[t._v("确认")])],1)],1),a("el-dialog",{ref:"goodsBindFactoryRef",staticStyle:{"margin-top":"15vh"},attrs:{title:"按商品批量指派",visible:t.GoodsMappingData.sync,center:"",width:"45%"},on:{"update:visible":function(e){return t.$set(t.GoodsMappingData,"sync",e)}}},[a("div",{staticStyle:{"font-size":"12px",color:"#999","line-height":"1.6","margin-bottom":"10px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",[t._v("商品名称："+t._s(t.GoodsMappingData.namecode))])],1)],1),a("el-table",{ref:"factoryTable",attrs:{data:t.goodsBindFactory.goodsBindFactoryList,border:"","tooltip-effect":"light"},on:{"cell-click":this.cellClickFactory}},[a("el-table-column",{attrs:{type:"index",label:"",width:"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{key:e.$index,attrs:{label:e.$index},on:{change:t.supplerRadio},model:{value:t.goodsBindFactory.radioindex,callback:function(e){t.$set(t.goodsBindFactory,"radioindex",e)},expression:"goodsBindFactory.radioindex"}},[t._v(" "+t._s(" ")+" ")])]}}])}),a("el-table-column",{attrs:{property:"factoryName",label:"工厂名称",align:"center"}}),a("el-table-column",{attrs:{property:"factoryArea",label:"所在区域",align:"center"}}),a("el-table-column",{attrs:{property:"minQuantity",label:"起订量",align:"center",width:"110"}}),a("el-table-column",{attrs:{property:"minInventory",label:"最低库存",align:"center",width:"110"}}),a("el-table-column",{attrs:{property:"inventory",label:"库存数量",align:"center",width:"110"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.GoodsMappingData.sync=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.GoodsMappingDialog}},[t._v("确认")])],1)],1),a("el-dialog",{attrs:{visible:t.schedulingDialogVisible,title:"提示",width:"20%","destroy-on-close":"",center:""},on:{"update:visible":function(e){t.schedulingDialogVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.schedulingDialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitScheduling}},[t._v("确定")])],1)]},proxy:!0}]),model:{value:t.schedulingDialogVisible,callback:function(e){t.schedulingDialogVisible=e},expression:"schedulingDialogVisible"}},[a("div",{staticStyle:{"font-size":"16px"}},[t._v(" "+t._s(this.schedulingDialogVisibleContent)+" ")])]),a("el-dialog",{ref:"goodsBindFactoryRef",attrs:{title:"本次预统计生产派单计划表",visible:t.planForm.planVisible,center:"",width:"80%"},on:{"update:visible":function(e){return t.$set(t.planForm,"planVisible",e)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.plan_tick_submit}},[t._v("确认派单")]),a("el-button",{on:{click:t.plan_tick_close}},[t._v("取消")])],1)]},proxy:!0}])},[a("div",{staticStyle:{"margin-bottom":"14px"}},[a("div",[t._v("勾选数据中无法派单生产数目为"+t._s(t.planForm.idsNo)+"条")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],key:"table3",ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.planData,"max-height":"400",stripe:"",border:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{property:"factoryName",label:"生产工厂",align:"center"}}),a("el-table-column",{attrs:{property:"factoryArea",label:"工厂区域",width:"150",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"namecode",width:"180",label:"商品名称",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"specif",label:"规格",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"sku",width:"200",label:"SKU",align:"center"}}),a("el-table-column",{attrs:{property:"inventory",width:"80",label:"当前库存",align:"center"}}),a("el-table-column",{attrs:{property:"minInventory",width:"80",label:"最低库量",align:"center"}}),a("el-table-column",{attrs:{property:"minQuantity",width:"80",label:"起订量",align:"center"}}),a("el-table-column",{attrs:{property:"lossRate",label:"损耗率",align:"center"}}),a("el-table-column",{attrs:{property:"num",label:"生产数量",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"unit",label:"生产单位",align:"center",width:"60"}})],1)],1),a("el-dialog",{ref:"addFactoryDialg",staticStyle:{"margin-top":"15vh"},attrs:{title:"商品尚未设置工厂,请先设置",visible:t.addFactoryDialg.sync,width:"500px"},on:{"update:visible":function(e){return t.$set(t.addFactoryDialg,"sync",e)}}},[a("div",{staticStyle:{"padding-top":"0"}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:t.addFactoryDialg,"label-width":"100px"}},[1==t.addFactoryDialg.type?a("el-form-item",{staticStyle:{"padding-top":"0"},attrs:{label:"订单收货区域:"}},[a("span",[t._v(t._s(t.addFactoryDialg.row.receiveArea))])]):t._e(),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"工厂：",prop:"factoryName","label-width":"70px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.addFactoryDialg.factoryId,callback:function(e){t.$set(t.addFactoryDialg,"factoryId",e)},expression:"addFactoryDialg.factoryId"}},t._l(t.addFactoryDialg.factoryList,(function(e){return a("el-option",{key:e.factoryId,attrs:{label:e.factoryName,value:e.factoryId}},[a("span",{staticStyle:{float:"left","margin-right":"20px"}},[t._v(t._s(e.factoryName))]),a("span",{staticStyle:{float:"right","font-size":"14px",color:"#999"}},[t._v("所在区域："+t._s(e.factoryArea))])])})),1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addFactoryDialg.sync=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.setFactory}},[t._v(t._s(2==t.addFactoryDialg.type?"确认并指派":"确认"))])],1)])],1)},o=[],i=a("5530"),n=(a("d3b7"),a("25f0"),a("159b"),a("ac1f"),a("1276"),a("b0c0"),a("a434"),a("99af"),a("b64b"),a("2f62")),c=a("da87"),s=a("062d"),l=a("eab5"),d=a("2a02"),u=a("3f39"),p=a("2f88"),m={components:{AppRegion:u["a"],AppPaging:p["a"]},data:function(){return{scrollTop:0,scrollLeft:0,selection_list:[],GoodsMappingData:{sync:!1,namecode:"",goodsBindFactoryList:[],paramData:{}},addFactoryDialg:{row:{},factoryList:[],sync:!1,factoryId:"",formQuery:{factoryId:""},type:1},loadingQuery:!1,planData:[],idList:[],planForm:{idsArr:0,idsNo:0,planVisible:!1},schedulingDialogVisible:!1,schedulingDialogVisibleContent:"",schedulingParams:{optType:"",optIds:""},goodsBindFactory:{goodsBindFactoryList:[],goodsBindFactoryDialogVisible:!1,bingRowId:"",bingFactoryId:"",radioindex:"",radio:!1,order_data:[]},scriptForm:{dialogVisible:!1,state:1,script:"",message:"",rules:{script:[{required:!0,message:"请输入备注",trigger:"blur"}]}},lastdateForm:{dialogVisible:!1,lastdate:"",rules:{lastdate:[{required:!0,message:"请选择最迟交货期",trigger:"change"}]}},rowId:"",vdata:{},ScriptData:{},chengRegionObje:{},chengRegionObje2:{},tableData:[],loadingTab:!1,FactoryNameList:[],FactoryNameList0:[{id:-1,factoryName:"所有单工厂"},{id:-2,factoryName:"所有多工厂"}],FactoryNameList1:[{id:-1,factoryName:"所有单工厂"},{id:-2,factoryName:"所有多工厂"}],optionsGoods:[],queryInfo:{page:1,pageSize:24},paramData:{factoryId:"",status:""},allTate:0,statusList:[{value:0,labelName:"待指派"},{value:1,labelName:"已指派"}],statusId:"",statusIdnam:"",searchDate:"",productId:"",formQuery:{productName:"",factoryId:-2,status:0,sku:""},dispatch_button_switch:{whole:!0,condition:!1,goods:!1,factory:!1,date:!1,Select:!1}}},computed:Object(i["a"])({},Object(n["c"])({userId:"user/userId",name:"user/name"})),created:function(){this.getFactoryName(),this.getTables()},methods:{starDataMax:function(t){if(this.formQuery.endDate)return t.getTime()>=Date.parse(this.formQuery.endDate)},endDataMin:function(t){if(this.formQuery.startDate)return t.getTime()<=Date.parse(this.formQuery.startDate)-864e5},factoryIdChange:function(){this.productId="",this.formQuery.productName="",this.formQuery.sku="",this.onSubmit()},FactoryMapping:function(){var t=this;if(this.selection_list.length){var e={factoryId:this.paramData.factoryId,ids:this.idList.toString()};this.$confirm("你确定要对已选的订单进行派单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.get_assignedFactory(e)})).catch((function(){}))}else this.$message.error("请选择要操作的数据！")},GoodsMapping:function(){if(this.selection_list.length)if(this.paramData.factoryId>0)this.FactoryMapping();else{this.GoodsMappingData.paramData.factoryId="",this.GoodsMappingData.paramData.ids=this.idList.toString();var t={skuCode:this.paramData.sku};this.goodsBindFactory.goodsBindFactoryList=[],this.GoodsMappingData.namecode=this.selection_list[0].namecode,this.get_getFactoryAndWarehouseList(t,1)}else this.$message.error("请选择要操作的数据！")},GoodsMappingDialog:function(){if(""!==this.goodsBindFactory.radioindex){var t=this.goodsBindFactory.bingFactoryId;this.GoodsMappingData.paramData.factoryId=t,this.get_assignedFactory(this.GoodsMappingData.paramData)}else this.$message.error("请选择要指派的工厂！")},get_assignedFactory:function(t){var e=this;Object(l["a"])(t).then((function(t){200===t.code?(e.$message({message:t.message,type:"success"}),e.getTables()):e.$message({message:t.message,type:"warning"})}))},ClickMapping2:function(t){this.addFactoryDialg.type=1,this.ClickMapping(t)},ClickMapping:function(t){var e=this;this.addFactoryDialg.row=t,t.loading=!0,Object(l["y"])({orderDetailId:t.id}).then((function(a){if(t.loading=!1,200===a.code){if(0===a.data.flag)return void e.$message.success(a.data.message);if(3===a.data.flag)return e.$message({message:a.data.message,type:"success"}),void e.getTables();if(2===a.data.flag||1===a.data.flag)return e.addFactoryDialg.productid=a.data.productid,void e.getfactoyList(t.sku);if(4===a.data.flag)return e.$message({message:a.data.message,type:"success"}),void e.getTables()}})).catch((function(e){t.loading=!1}))},getfactoyList:function(t){var e=this;this.addFactoryDialg.sku=t,Object(l["d"])({skuCode:t}).then((function(t){200===t.code&&(e.addFactoryDialg.sync=!0,e.addFactoryDialg.factoryList=[],e.addFactoryDialg.factoryId="",t.data.forEach((function(t){1!==t.id&&e.addFactoryDialg.factoryList.push(t)})))}))},setFactory:function(){var t=this;if(""!==this.addFactoryDialg.factoryId){var e={factoryId:this.addFactoryDialg.factoryId,productId:this.addFactoryDialg.productid};Object(l["D"])(e).then((function(a){200===a.code&&(!0===a.data?(t.addFactoryDialg.sync=!1,2===t.addFactoryDialg.type?(t.GoodsMappingData.paramData.factoryId=e.factoryId,t.get_assignedFactory(t.GoodsMappingData.paramData)):t.ClickMapping(t.addFactoryDialg.row)):t.$message({message:"操作失败",type:"warning"}))}))}else this.$message({message:"请选择工厂",type:"warning"})},plan_get_data:function(t){var e=this;if(1===t){this.planForm.planVisible=!0;var a={ids:this.idList};Object(l["b"])(a).then((function(t){if(200===t.code){e.planData=t.data.list;var a=[];e.planData.forEach((function(t){a.push(t.ids)})),a=a.toString().split(","),e.planForm.idsNo=e.idList.length-a.length}}))}},plan_tick_submit:function(){var t=this,e=[];this.planData.forEach((function(t){e.push(t.ids)})),e=e.toString();var a={I_optType:2,I_ids:e,I_optuser:this.name};this.loadingWeb=!0,Object(l["B"])(a).then((function(e){200===e.code&&(t.loadingWeb=!1,t.$message({message:"操作成功",type:"success"}),setTimeout((function(){t.refreshTable()})),t.plan_tick_close()),t.schedulingDialogVisible=!1}))},plan_tick_close:function(){this.planForm.planVisible=!1},handleSelectionChange:function(t){var e=[],a=[];t.length>0&&t.forEach((function(t){e.push(t.id),t.factoryId&&a.push(t)})),this.selection_list=t,this.idList=e},schedulingBySelected:function(t){this.schedulingDialogVisible=!0,this.schedulingDialogVisibleContent="您确定要排产吗？",this.schedulingParams.optType=2,this.schedulingParams.optIds=t.id},submitScheduling:function(){var t=this,e={I_optType:this.schedulingParams.optType,I_ids:this.schedulingParams.optIds,I_optuser:this.name};Object(l["B"])(e).then((function(e){200===e.code&&(t.loadingWeb=!1,t.$message({message:"操作成功",type:"success"}),setTimeout((function(){t.refreshTable()}))),t.schedulingDialogVisible=!1}))},change_dispatch_button:function(t){t.startDate||t.endDate?this.dispatch_button_switch.date=!0:this.dispatch_button_switch.date=!1,t.factoryId?this.dispatch_button_switch.factory=!0:this.dispatch_button_switch.factory=!1,t.productId?this.dispatch_button_switch.goods=!0:this.dispatch_button_switch.goods=!1,t.productId||t.startDate||t.endDate||t.factoryId?this.dispatch_button_switch.condition=!0:this.dispatch_button_switch.condition=!1},clickFactory:function(t,e){this.statusIdnam=e,this.goodsBindFactory.bingFactoryId="",t.factoryId&&(this.goodsBindFactory.bingFactoryId=t.factoryId);var a={factoryId:t.factoryId,unitbit:t.unitbit,skuCode:t.sku};this.goodsBindFactory.bingRowId=t.id,this.goodsBindFactory.order_data=t,this.get_getFactoryAndWarehouseList(a,0)},get_getFactoryAndWarehouseList:function(t,e){var a=this;this.goodsBindFactory.goodsBindFactoryList=[],Object(l["n"])(t).then((function(t){if(200===t.code)if(null!==t.data&&t.data.length>0){if(a.goodsBindFactory.radioindex="",a.goodsBindFactory.goodsBindFactoryList=t.data,0===e&&(a.goodsBindFactory.goodsBindFactoryDialogVisible=!0),1===e)if(1===t.data.length){var r=t.data[0].factoryId;a.GoodsMappingData.paramData.factoryId=r,a.$confirm("你确定要对已选的订单进行派单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){a.get_assignedFactory(a.GoodsMappingData.paramData)})).catch((function(){}))}else a.GoodsMappingData.sync=!0}else if(1===e)a.addFactoryDialg.type=2,a.ClickMapping(a.selection_list[0]);else{var o="该商品没有初始化工厂，请先去初始化工厂哦！";a.$message.warning(o)}else a.$message({message:t.message,type:"warning"})}))},cellClickFactory:function(t){var e=this;this.goodsBindFactory.bingFactoryId=t.factoryId,this.goodsBindFactory.goodsBindFactoryList.forEach((function(a,r){a.factoryId===t.factoryId&&(e.goodsBindFactory.radioindex=r)}))},supplerRadio:function(t){this.goodsBindFactory.bingFactoryId=this.goodsBindFactory.goodsBindFactoryList[t].factoryId},bingFactory:function(){var t=this;if(""!==this.goodsBindFactory.bingFactoryId){var e={id:this.goodsBindFactory.bingRowId,factoryId:this.goodsBindFactory.bingFactoryId};Object(d["q"])(e).then((function(e){200===e.code?(t.$message({message:e.message,type:"success"}),t.goodsBindFactory.goodsBindFactoryDialogVisible=!1,t.getTables()):t.$message({message:e.message,type:"warning"})}))}else this.$message({message:"请选择要派单的工厂",type:"warning"})},clickScript:function(t,e){t.vdata?(t.vdata.postil&&(this.scriptForm.script=t.vdata.postil),t.vdata.message&&(this.scriptForm.message=t.vdata.message),this.vdata=t.vdata):(this.vdata={message:"",planmess:"",postil:""},this.scriptForm.script="",this.scriptForm.message=""),this.rowId=t.id,this.scriptForm.state=e,this.scriptForm.dialogVisible=!0},updateScript:function(t){var e=this;this.$refs[t].validate((function(a){if(!a)return!1;var r=e.vdata;r.postil=e.scriptForm.script;var o={id:e.rowId,remarks:e.scriptForm.script,postscript:r};Object(l["E"])(o).then((function(a){200===a.code&&(e.loadingWeb=!1,e.$message({message:"操作成功",type:"success"}),setTimeout((function(){e.getTables()}))),e.resetScript(t)}))}))},resetScript:function(){this.scriptForm.dialogVisible=!1,this.scriptForm.script="",this.scriptForm.message=""},clickLastdate:function(t){this.rowId=t.id,this.lastdateForm.dialogVisible=!0},updateLastdate:function(t){var e=this;this.$refs[t].validate((function(a){if(!a)return!1;var r={targetId:e.rowId,lastDeliveryDate:e.lastdateForm.lastdate};Object(l["F"])(r).then((function(a){200===a.code&&(e.loadingWeb=!1,e.$message({message:"操作成功",type:"success"}),setTimeout((function(){e.getTables()}))),e.resetLastdate(t)}))}))},resetLastdate:function(t){this.lastdateForm.dialogVisible=!1,this.$refs[t].resetFields()},search:function(t){t.length>=2?this.getAllProductInfo(t):this.optionsGoods=[]},searchCle:function(t){if(this.formQuery.productName="",t){var e=null;for(var a in this.optionsGoods){var r=this.optionsGoods[a];if(r.id===t){e=r;break}}this.formQuery.sku=e.data,this.formQuery.productName=e.namecode.substr(e.namecode.indexOf("：")+1)}else this.formQuery.sku="";t||(this.optionsGoods=[])},getAllProductInfo:function(t){var e=this,a={nodeType:100303,productName:t};Object(c["f"])(a).then((function(t){200===t.code?e.optionsGoods=t.data:e.$message({message:t.message,type:"warning"})}))},GoodsFocus:function(){var t=localStorage.getItem("data");t&&(this.optionsGoods=JSON.parse(t),this.historydata(JSON.parse(t)))},historydata:function(t){this.optionsGoods=[];var e=localStorage.getItem("data");this.optionsGoods=JSON.parse(e),t.length>this.max_history&&this.optionsGoods.splice(this.max_history)},getFactoryName:function(){var t=this;Object(s["o"])({}).then((function(e){if(200===e.code){var a=[];e.data.forEach((function(t){1!==t.data&&a.push(t)})),t.FactoryNameList1=t.FactoryNameList1.concat(a),t.getFactoryName2(t.formQuery.status),t.FactoryNameList=t.FactoryNameList1}}))},getFactoryName2:function(t){},statusChange:function(t){this.getFactoryName2(t),this.onSubmit()},chengRegion:function(t){this.chengRegionObje=t;var e=this.chengRegionObje.provinceId?this.chengRegionObje.provinceId:"",a=this.chengRegionObje.cityId?this.chengRegionObje.cityId:"",r=this.chengRegionObje.countyId?this.chengRegionObje.countyId:"";this.formQuery.customerProvinceId=e,this.formQuery.customerCityId=a,this.formQuery.customerCountyId=r},handleSizeChange:function(t){this.queryInfo.pageSize=t,this.getTables()},handleCurrentChange:function(t){this.queryInfo.page=t,this.getTables()},getTables:function(){var t=this;this.selection_list=[],this.planData=[],this.idList=[];var e=Object(i["a"])({page:this.queryInfo.page,pageSize:this.queryInfo.pageSize},this.formQuery);-1===e.status&&(e.status=""),this.statusId=e.status,Object.keys(e).forEach((function(t){var a=e[t];""===a&&delete e[t]})),this.loadingTab=!0,this.paramData=e,Object(l["p"])(e).then((function(a){200===a.code&&(a.data.list.forEach((function(t){t.postil="",t.vdata&&(t.postil=t.vdata.postil||"")})),t.tableData=a.data.list,t.allTate=a.data.total,t.change_dispatch_button(e),t.loadingTab=!1)}))},onSubmit:function(){this.queryInfo.page=1,this.getTables()}},mounted:function(){},activated:function(){var t=this;setTimeout((function(){t.$refs.TableData.bodyWrapper.scrollTop=t.scrollTop,t.$refs.TableData.bodyWrapper.scrollLeft=t.scrollLeft}),60)},beforeRouteLeave:function(t,e,a){this.scrollTop=this.$refs.TableData.bodyWrapper.scrollTop,this.scrollLeft=this.$refs.TableData.bodyWrapper.scrollLeft,a()}},f=m,g=(a("29d8"),a("2877")),h=Object(g["a"])(f,r,o,!1,null,null,null);e["default"]=h.exports},eab5:function(t,e,a){"use strict";a.d(e,"h",(function(){return o})),a.d(e,"i",(function(){return i})),a.d(e,"f",(function(){return n})),a.d(e,"e",(function(){return c})),a.d(e,"m",(function(){return s})),a.d(e,"w",(function(){return l})),a.d(e,"j",(function(){return d})),a.d(e,"r",(function(){return u})),a.d(e,"q",(function(){return p})),a.d(e,"s",(function(){return m})),a.d(e,"o",(function(){return f})),a.d(e,"t",(function(){return g})),a.d(e,"v",(function(){return h})),a.d(e,"u",(function(){return y})),a.d(e,"l",(function(){return b})),a.d(e,"k",(function(){return v})),a.d(e,"g",(function(){return I})),a.d(e,"H",(function(){return _})),a.d(e,"E",(function(){return F})),a.d(e,"G",(function(){return w})),a.d(e,"F",(function(){return O})),a.d(e,"z",(function(){return S})),a.d(e,"C",(function(){return N})),a.d(e,"B",(function(){return k})),a.d(e,"n",(function(){return D})),a.d(e,"p",(function(){return j})),a.d(e,"b",(function(){return x})),a.d(e,"a",(function(){return C})),a.d(e,"c",(function(){return L})),a.d(e,"y",(function(){return T})),a.d(e,"x",(function(){return B})),a.d(e,"D",(function(){return P})),a.d(e,"I",(function(){return $})),a.d(e,"d",(function(){return R})),a.d(e,"A",(function(){return V}));var r=a("83c3");function o(t){return Object(r["a"])({url:"/admin/customer/order/list/page",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/admin/data/selectByCond/I_customer_order_list/find?pageNo=0",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/admin/customer/order/getPurchasePlanListByOrderId",method:"GET",params:t})}function c(t){return Object(r["a"])({url:"/admin/customer/order/getProductionPlanListByOrderId",method:"GET",params:t})}function s(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/list/page",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/admin/factory/getWarehouseListToOutbound",method:"get",params:t})}function d(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/getCustomerOrderDetailStatusList",method:"get",data:t})}function u(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/getProductStockByOrderDetailId",method:"get",params:t})}function p(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/getPurchasePlanListByAssociateId",method:"get",params:t})}function m(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/getProductionPlanListByAssociateId",method:"get",params:t})}function f(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/getGoodsOutboundListByAssociateId",method:"get",params:t})}function g(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(r["a"])({url:"/admin/data/execProcedure/co_list_batch?pageNo="+e,method:"post",data:t})}function h(t){return Object(r["a"])({url:"/productionPlan/merge",method:"POST",data:t})}function y(t){return Object(r["a"])({url:"/productionPlan/insert",method:"POST",data:t})}function b(t){return Object(r["a"])({url:"/admin/excel/operationCustomerOrders",method:"GET",params:t})}function v(t){return Object(r["a"])({url:"/admin/excel/operationCustomerOrderDetailSchedule",method:"GET",params:t})}function I(t){return Object(r["a"])({url:"/admin/customer/order/getCustomer",method:"get",data:t})}function _(t){return Object(r["a"])({url:"/admin/customer/order/updateRemarks",method:"post",data:t})}function F(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/updateRemarks",method:"post",data:t})}function w(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/updateOrderLastDeliveryDate",method:"post",data:t})}function O(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/updateOrderDetailLastDeliveryDate",method:"post",data:t})}function S(t){return Object(r["a"])({url:"/admin/data/execProcedure/co_list_batchout?pageNo=0",method:"POST",data:t})}function N(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/pendingOrderOutOfWarehouse",method:"POST",data:t})}function k(t){return Object(r["a"])({url:"/admin/data/execProcedure/co_list_batch?pageNo=0",method:"POST",data:t})}function D(t){return Object(r["a"])({url:"/admin/factory/getFactoryAndWarehouseList",method:"GET",params:t})}function j(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/getOrderDetailsList",method:"POST",data:t})}function x(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/dispatchStatistics",method:"POST",data:t})}function C(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/assignedFactory",method:"POST",data:t})}function L(t){return Object(r["a"])({url:"/admin/data/execProcedure/find_prodout?pageNo=0",method:"POST",data:t})}function T(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/orderBendingGoodsById",method:"POST",params:t})}function B(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/orderBendingGoods",method:"POST",data:t})}function P(t){return Object(r["a"])({url:"/product/productBengingFactory",method:"POST",data:t})}function $(t){return Object(r["a"])({url:"/admin/data/execProcedure/waitprod_callin?pageNo=0",method:"POST",data:t})}function R(t){return Object(r["a"])({url:"/admin/factory/getAllFactoryInfo",method:"GET",params:t})}function V(t){return Object(r["a"])({url:"/admin/data/execProcedure/客户订单发货前批量锁单?pageNo=0",method:"POST",data:t})}}}]);