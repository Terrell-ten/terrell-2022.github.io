(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34d99c9c"],{"7c58":function(t,e,a){"use strict";a.d(e,"C",(function(){return n})),a.d(e,"y",(function(){return i})),a.d(e,"R",(function(){return o})),a.d(e,"g",(function(){return u})),a.d(e,"gb",(function(){return l})),a.d(e,"D",(function(){return s})),a.d(e,"G",(function(){return c})),a.d(e,"F",(function(){return d})),a.d(e,"s",(function(){return m})),a.d(e,"N",(function(){return p})),a.d(e,"S",(function(){return h})),a.d(e,"m",(function(){return b})),a.d(e,"Z",(function(){return f})),a.d(e,"B",(function(){return g})),a.d(e,"H",(function(){return y})),a.d(e,"A",(function(){return S})),a.d(e,"L",(function(){return v})),a.d(e,"o",(function(){return P})),a.d(e,"u",(function(){return O})),a.d(e,"f",(function(){return j})),a.d(e,"n",(function(){return V})),a.d(e,"h",(function(){return _})),a.d(e,"bb",(function(){return T})),a.d(e,"z",(function(){return w})),a.d(e,"E",(function(){return N})),a.d(e,"k",(function(){return F})),a.d(e,"T",(function(){return k})),a.d(e,"I",(function(){return x})),a.d(e,"J",(function(){return C})),a.d(e,"j",(function(){return I})),a.d(e,"w",(function(){return D})),a.d(e,"v",(function(){return Q})),a.d(e,"P",(function(){return L})),a.d(e,"x",(function(){return q})),a.d(e,"M",(function(){return z})),a.d(e,"l",(function(){return $})),a.d(e,"K",(function(){return E})),a.d(e,"X",(function(){return G})),a.d(e,"e",(function(){return B})),a.d(e,"cb",(function(){return A})),a.d(e,"O",(function(){return M})),a.d(e,"db",(function(){return W})),a.d(e,"ib",(function(){return J})),a.d(e,"r",(function(){return R})),a.d(e,"Q",(function(){return U})),a.d(e,"U",(function(){return X})),a.d(e,"Y",(function(){return H})),a.d(e,"W",(function(){return K})),a.d(e,"V",(function(){return Y})),a.d(e,"eb",(function(){return Z})),a.d(e,"hb",(function(){return tt})),a.d(e,"b",(function(){return et})),a.d(e,"q",(function(){return at})),a.d(e,"fb",(function(){return rt})),a.d(e,"t",(function(){return nt})),a.d(e,"c",(function(){return it})),a.d(e,"d",(function(){return ot})),a.d(e,"i",(function(){return ut})),a.d(e,"a",(function(){return lt})),a.d(e,"p",(function(){return st})),a.d(e,"ab",(function(){return ct}));var r=a("83c3");function n(t){return Object(r["a"])({url:"/admin/purchase/plan/list/page",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/admin/purchase/plan/detail/list/page",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/admin/product/unit/getUnitsToPlan",method:"GET",params:t})}function u(t){return Object(r["a"])({url:"/admin/pack/material/conversionPrice",method:"post",data:t})}function l(t){return Object(r["a"])({url:"/admin/purchase/plan/updatePurchasePlanUnit",method:"POST",data:t})}function s(t){return Object(r["a"])({url:"/admin/purchase/plan/getPurchaseMaterialList",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/admin/purchase/plan/merge",method:"post",data:t})}function d(t){return Object(r["a"])({url:"admin/purchase/plan/merge",method:"post",data:t})}function m(t){return Object(r["a"])({url:"/admin/excel/operationPurchasePlanDetail",method:"GET",params:t})}function p(t){return Object(r["a"])({url:"/admin/purchase/plan/status/list",method:"GET",data:t})}function h(t){return Object(r["a"])({url:"/admin/excel/operationPurchasePlanDetail",method:"GET",params:t})}function b(t){return Object(r["a"])({url:"/admin/factory/getFactoryList",method:"get",params:t})}function f(t){return Object(r["a"])({url:"/admin/purchase/plan/insert",method:"post",data:t})}function g(t){return Object(r["a"])({url:"/admin/purchase/plan/get",method:"GET",params:t})}function y(t){return Object(r["a"])({url:"/admin/purchase/plan/update",method:"POST",data:t})}function S(t){return Object(r["a"])({url:"/admin/purchase/plan/delete",method:"POST",data:t})}function v(t){return Object(r["a"])({url:"/admin/purchase/plan/purchaseGoodsWarehousing",method:"POST",data:t})}function P(t){return Object(r["a"])({url:"/admin/factory/purchase/plan/all/list",method:"POST",data:t})}function O(t){return Object(r["a"])({url:"/admin/factory/purchase/plan/status/list",method:"GET",params:t})}function j(t){return Object(r["a"])({url:"admin/data/execProcedure/cm_list_batchout?pageNo=0",method:"post",data:t})}function V(t){return Object(r["a"])({url:"/admin/factory/getFactoryList",method:"GET",params:t})}function _(t){return Object(r["a"])({url:"/admin/data/execProcedure/create_prodplan?pageNo=0",method:"POST",data:t})}function T(t){return Object(r["a"])({url:"/admin/customer/detail/schedule/selectCustomerOrderList",method:"GET",params:t})}function w(t){return Object(r["a"])({url:"/productionPlan/getProductPlanstockList",method:"GET",params:t})}function N(t){return Object(r["a"])({url:"/admin/factory/purchase/plan/get",method:"GET",params:t})}function F(t){return Object(r["a"])({url:"/admin/factory/purchase/plan/confirmPurchase",method:"POST",data:t})}function k(t){return Object(r["a"])({url:"/admin/excel/prePurchasePlan",method:"GET",params:t})}function x(t){return Object(r["a"])({url:"/admin/pre/purchase/plan/all/list",method:"POST",data:t})}function C(t){return Object(r["a"])({url:"/admin/pre/purchase/plan/get",method:"GET",params:t})}function I(t){return Object(r["a"])({url:"/admin/pre/purchase/plan/confirmPurchase",method:"POST",data:t})}function D(t){return Object(r["a"])({url:"/admin/purchase/plan/getPurchaseArrangementList",method:"POST",data:t})}function Q(t){return Object(r["a"])({url:"/admin/purchase/plan/getPlantmpList",method:"POST",data:t})}function L(t){return Object(r["a"])({url:"/admin/material/supplier/list",method:"GET",data:t})}function q(t){return Object(r["a"])({url:"/payment/getProdorderPaymentList",method:"GET",params:t})}function z(t){return Object(r["a"])({url:"/payment/savePurchorderPayment",method:"POST",data:t})}function $(t){return Object(r["a"])({url:"/payment/deletePurchorderPayment",method:"POST",data:t})}function E(t){return Object(r["a"])({url:"/payment/getPurchorderPayment",method:"POST",params:t})}function G(t){return Object(r["a"])({url:"/admin/data/execProcedure/cm_list_batch?pageNo=1",method:"POST",data:t})}function B(t){return Object(r["a"])({url:"/admin/data/execProcedure/cm_list_batch?pageNo=0",method:"POST",data:t})}function A(t){return Object(r["a"])({url:"/product/selectProductList",method:"GET",params:t})}function M(t){return Object(r["a"])({url:"/admin/purchase/plan/getStatisticsList",method:"POST",data:t})}function W(t){return Object(r["a"])({url:"/admin/material/supplier/supplierList",method:"get",params:t})}function J(t){return Object(r["a"])({url:"/admin/purchase/plan/updateSupplier",method:"post",data:t})}function R(t){return Object(r["a"])({url:"/admin/purchase/plan/getMaterialPurchstockList",method:"post",data:t})}function U(t){return Object(r["a"])({url:"/admin/material/supplier/getSupplierListByProductId",method:"get",params:t})}function X(t){return Object(r["a"])({url:"/admin/data/execProcedure/create_purchplan?pageNo=0",method:"POST",data:t})}function H(t){return Object(r["a"])({url:"/admin/purchase/plan/purchaseGoodsBatchWarehouse",method:"post",data:t})}function K(t){return Object(r["a"])({url:"/admin/purch/detail/materialsAreStoredInBatchesTwo",method:"post",data:t})}function Y(t){return Object(r["a"])({url:"/admin/purch/detail/materialsAreStoredInBatches",method:"post",data:t})}function Z(t){return Object(r["a"])({url:"/admin/purchase/plan/updateDetailRemarks",method:"post",data:t})}function tt(t){return Object(r["a"])({url:"/admin/purchase/plan/updateRemarks",method:"post",data:t})}function et(t){return Object(r["a"])({url:"/admin/purchase/plan/auditPurchPlan",method:"post",data:t})}function at(t){return Object(r["a"])({url:"/admin/purchase/plan/getMaterialPurchstock",method:"get",params:t})}function rt(t){return Object(r["a"])({url:"/admin/purchase/plan/updatePurchPlanDetail",method:"post",data:t})}function nt(t){return Object(r["a"])({url:"/admin/factory/getPayeeInformation",method:"get",params:t})}function it(t){return Object(r["a"])({url:"/admin/purchase/plan/cancelPurchasePlan",method:"post",data:t})}function ot(t){return Object(r["a"])({url:"/admin/purchase/plan/cancelPurchasePlanDetail",method:"post",data:t})}function ut(t){return Object(r["a"])({url:"/admin/purchase/plan/confirmPurchase",method:"POST",data:t})}function lt(t){return Object(r["a"])({url:"/admin/data/execProcedure/采购批量操作?pageNo=0",method:"post",data:t})}function st(t){return Object(r["a"])({url:"/admin/purch/detail/getMaterialInStockRecordList",method:"get",params:t})}function ct(t){return Object(r["a"])({url:"/admin/purch/detail/saveDeliveryVoucher",method:"post",data:t})}},"84f8":function(t,e,a){"use strict";a("a065")},a065:function(t,e,a){},ed33:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingWeb,expression:"loadingWeb"}],staticClass:"main-conent main-conent-minheight",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0},model:{value:t.formQuery,callback:function(e){t.formQuery=e},expression:"formQuery"}},[a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"供应商名称："}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.formQuery.supplierId,callback:function(e){t.$set(t.formQuery,"supplierId",e)},expression:"formQuery.supplierId"}},t._l(t.SupplierNameList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.namecode,value:t.id}})})),1)],1),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"工厂名称："}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.formQuery.factoryId,callback:function(e){t.$set(t.formQuery,"factoryId",e)},expression:"formQuery.factoryId"}},t._l(t.FactoryNameList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.factoryName,value:t.id}})})),1)],1),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"包材名称："}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.formQuery.productName,callback:function(e){t.$set(t.formQuery,"productName",e)},expression:"formQuery.productName"}},t._l(t.restaurants_qkj,(function(t){return a("el-option",{key:t.id,attrs:{label:t.productName,value:t.productName}})})),1)],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:t.onSubmit}},[t._v("综合查询")])],1),a("div",[a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:this.mergeProcurementPlanByChoose}},[t._v("勾选批量出库 ")])],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!this.buttonVisibleSupplier,expression:"!this.buttonVisibleSupplier"}],attrs:{disabled:"disabled",loading:t.loadingQuery}},[t._v("按供应商批量出库")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:this.buttonVisibleSupplier,expression:"this.buttonVisibleSupplier"}],attrs:{type:"primary",loading:t.loadingQuery},on:{click:this.mergeProcurementPlanBySupplier}},[t._v("按供应商批量出库")])],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!this.buttonVisibleFactory,expression:"!this.buttonVisibleFactory"}],attrs:{disabled:"disabled",loading:t.loadingQuery}},[t._v("按工厂批量出库")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:this.buttonVisibleFactory,expression:"this.buttonVisibleFactory"}],attrs:{type:"primary",loading:t.loadingQuery},on:{click:this.mergeProcurementPlanByFactory}},[t._v("按工厂批量出库")])],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!this.buttonVisibleproductName,expression:"!this.buttonVisibleproductName"}],attrs:{disabled:"disabled",loading:t.loadingQuery}},[t._v("按包材批量出库")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:this.buttonVisibleproductName,expression:"this.buttonVisibleproductName"}],attrs:{type:"primary",loading:t.loadingQuery},on:{click:this.mergeProcurementPlanByFactory}},[t._v("按包材批量出库")])],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:this.mergeProcurementPlanByAll}},[t._v("按条件一健出库")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],ref:"multipleTable",staticStyle:{width:"98%"},attrs:{data:t.tableData,border:"",stripe:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40",selectable:t.selectable,align:"center"}}),a("el-table-column",{attrs:{prop:"id",label:"标识",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"factoryName",label:"工厂名称",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{property:"supplierName",label:"供应商名称",align:"center","min-width":"100"}}),a("el-table-column",{attrs:{property:"materialName",label:"包材商品名称",align:"center"}}),a("el-table-column",{attrs:{property:"specif",label:"规格",align:"center"}}),a("el-table-column",{attrs:{property:"num",label:"需采购数量",align:"center",width:"100"}}),a("el-table-column",{attrs:{property:"outCount",label:"已出库数",align:"center",width:"100"}}),a("el-table-column",{attrs:{property:"unit",label:"单位",align:"center",width:"80"}}),a("el-table-column",{attrs:{property:"optdate",label:"下单日期",align:"center"}}),a("el-table-column",{attrs:{property:"procurementThresholds",label:"备注",align:"center","show-overflow-tooltip":!0},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.vdata?a("span",[t._v(t._s(e.row.vdata.planmess||""))]):t._e()]}}])}),a("el-table-column",{attrs:{property:"procurementThresholds",label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",disabled:e.row.inventory<=0},on:{click:function(a){return t.clickCk(e.row)}}},[t._v("出库")])]}}])})],1),a("div",{staticClass:"margin-t16 text-right"},[a("pagination",{attrs:{"current-page":t.queryInfo.page,total:t.total,pageSize:t.queryInfo.pageSize},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}})],1),a("el-dialog",{attrs:{visible:t.mergeDialogVisible,title:"提示",width:"20%","destroy-on-close":"",center:""},on:{"update:visible":function(e){t.mergeDialogVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.mergeDialogVisible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.submitMerge}},[t._v("确定")])],1)]},proxy:!0}]),model:{value:t.mergeDialogVisible,callback:function(e){t.mergeDialogVisible=e},expression:"mergeDialogVisible"}},[a("div",[t._v(" "+t._s(this.mergeDialogVisibleContent)+" ")])]),a("el-dialog",{attrs:{visible:t.ShipmentForm.sync,title:t.ShipmentForm.title,width:"45%","destroy-on-close":"",center:""},on:{"update:visible":function(e){return t.$set(t.ShipmentForm,"sync",e)}},scopedSlots:t._u([{key:"footer",fn:function(){return[a("span",{staticClass:"dialog-footer"},[a("el-button",{on:{click:function(e){t.ShipmentForm.sync=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",disabled:-1===t.ShipmentForm.radio||t.ShipmentForm.list[t.ShipmentForm.radio]&&t.ShipmentForm.list[t.ShipmentForm.radio].num<=0},on:{click:t.submitShipment}},[t._v("确认出库")])],1)]},proxy:!0}])},[a("div",{staticStyle:{"font-size":"16px"}},[a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"100%","margin-bottom":"0"}},[a("span",{},[t._v("包材商品名称：")]),t._v(t._s(t.ShipmentForm.row.materialName))])]),a("div",{staticStyle:{display:"flex"}},[a("p",{staticStyle:{width:"260px"}},[a("span",{},[t._v("规格：")]),t._v(t._s(t.ShipmentForm.row.specif))])])]),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.ShipmentForm.loading,expression:"ShipmentForm.loading"}],ref:"supplerTable",staticStyle:{},attrs:{data:t.ShipmentForm.list,stripe:"",border:""}},[a("el-table-column",{attrs:{type:"index",label:"",width:"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio",{attrs:{label:e.$index},model:{value:t.ShipmentForm.radio,callback:function(e){t.$set(t.ShipmentForm,"radio",e)},expression:"ShipmentForm.radio"}},[t._v(" "+t._s(" ")+" ")])]}}])}),a("el-table-column",{attrs:{property:"name",label:"供应商名称"}}),a("el-table-column",{attrs:{property:"act_inventory",label:"库存数量"}}),a("el-table-column",{attrs:{property:"min_inventory",label:"最低库存"}}),a("el-table-column",{attrs:{property:"act_prodnum",label:"正在采购数"}}),a("el-table-column",{attrs:{property:"--",label:"出库数量",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{key:e.$index,staticStyle:{width:"100%"},attrs:{type:"number",disabled:e.$index!=t.ShipmentForm.radio,precision:0,"controls-position":"right",min:0},on:{input:function(a){return t.inputNumber(e.row,0,e.row.Maxnum)}},model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}})]}}])})],1)],1)])],1)},n=[],i=a("b85c"),o=a("5530"),u=(a("a9e3"),a("d3b7"),a("25f0"),a("b0c0"),a("159b"),a("4de4"),a("7c58")),l=a("2f62"),s=a("faca"),c={components:{pagination:s["a"]},data:function(){return{buttonVisibleproductName:!1,timeout_qkj:null,restaurants_qkj:[],state_qkj:"",loadingWeb:!1,loadingTab:!1,loadingQuery:!1,FactoryNameList:[],SupplierNameList:[],buttonVisibleSupplier:!1,buttonVisibleFactory:!1,buttonVisibleSupplierAndFactory:!1,mergeDialogVisible:!1,mergeDialogVisibleContent:"",queryInfo:{page:1,pageSize:24},total:0,tableData:[],formQuery:{factoryId:"",supplierId:"",productName:""},ShipmentForm:{radio:0,sync:!1,title:"出库",dataID:{},row:{},list:[],loading:!1,formQuery:{},paramData:{}},mergeParams:{optType:0,ids:""}}},computed:Object(o["a"])({},Object(l["c"])({userId:"user/userId",name:"user/name"})),created:function(){var t=Object(o["a"])({},this.queryInfo);this.getTables(t),this.getFactoryName(),this.getSupplierName(),this.getgoodList()},methods:{inputNumber:function(t,e,a){if("-"!==t.num){var r=Number(e)||0,n=a||!1;t.num=t.num<r?r:t.num,n&&n>r&&(t.num=t.num>n?n:t.num)}},selectable:function(t){return t.inventory>0},clickCk:function(t){var e=this;if(this.$message({message:"功能开发中！",type:"success"}),this.ShipmentForm.sync=!0,this.ShipmentForm.row=t,this.ShipmentForm.radio=-1,this.ShipmentForm.list=[],!this.ShipmentForm.row){var a={I_ids:t.id.toString(),I_optType:2,I_optuser:this.name};Object(u["f"])(a).then((function(t){if(200===t.code){e.$message({message:"出库成功！",type:"success"});var a=Object(o["a"])({},e.queryInfo);e.getTables(a)}}))}},submitShipment:function(){this.$message({message:"功能还在开发中！",type:"error"})},getgoodList:function(){var t=this;Object(u["cb"])({}).then((function(e){200===e.code?(t.restaurants_qkj=e.data.list,t.restaurants_qkj.forEach((function(t){t.value=t.productName}))):t.$message({message:e.message,type:"warning"}),t.mergeDialogVisible=!1}))},handleSelect_qkj:function(t){this.formQuery.materialName=t.productName},querySearchAsync_qkj:function(t,e){var a=this.restaurants_qkj,r=t?a.filter(this.createStateFilter(t)):a;clearTimeout(this.timeout_qkj),this.timeout_qkj=setTimeout((function(){e(r)}),3e3*Math.random())},createStateFilter:function(t){return function(e){return e.value.indexOf(t)>=0}},refreshButtonVisible:function(){this.buttonVisibleSupplier=!1,this.buttonVisibleFactory=!1,this.buttonVisibleSupplierAndFactory=!1},buttonVisible:function(){this.refreshButtonVisible(),""!==this.formQuery.factoryId&&""!==this.formQuery.supplierId&&""!==this.formQuery.productName?(this.buttonVisibleSupplierAndFactory=!0,this.buttonVisibleSupplier=!1,this.buttonVisibleFactory=!1):(""!==this.formQuery.supplierId?(this.buttonVisibleSupplier=!0,this.buttonVisibleFactory=!1,this.buttonVisibleproductName=!1,this.buttonVisibleSupplierAndFactory=!1):this.buttonVisibleSupplier=!1,""!==this.formQuery.factoryId?(this.buttonVisibleFactory=!0,this.buttonVisibleSupplier=!1,this.buttonVisibleproductName=!1,this.buttonVisibleSupplierAndFactory=!1):this.buttonVisibleFactory=!1,""!==this.formQuery.productName?(this.buttonVisibleproductName=!0,this.buttonVisibleSupplier=!1,this.buttonVisibleFactory=!1,this.buttonVisibleSupplierAndFactory=!1):this.buttonVisibleproductName=!1)},mergeProcurementPlanByChoose:function(){var t=this.$refs.multipleTable.selection;if(0!==t.length){var e,a=[],r=Object(i["a"])(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;a+=n.id+","}}catch(o){r.e(o)}finally{r.f()}this.mergeDialogVisible=!0,this.mergeDialogVisibleContent="您确定要合并选中的采购计划",this.mergeParams.optType=2,this.mergeParams.ids=a.substr(0,a.length-1)}else this.$message({message:"请选择要操作的数据！",type:"error"})},mergeProcurementPlanBySupplier:function(){this.mergeDialogVisible=!0,this.mergeDialogVisibleContent="您确定要按供应商合并采购计划",this.mergeParams.optType=1,this.mergeParams.ids=this.formQuery.supplierId},mergeProcurementPlanByFactory:function(){this.mergeDialogVisible=!0,this.mergeDialogVisibleContent="您确定要按工厂合并采购计划",this.mergeParams.optType=4,this.mergeParams.ids=this.formQuery.factoryId},mergeProcurementPlanBySupplierAndFactory:function(){this.mergeDialogVisible=!0,this.mergeDialogVisibleContent="您确定要按供应商与工厂合并采购计划",this.mergeParams.optType=3,this.mergeParams.ids=this.formQuery.factoryId+","+this.formQuery.supplierId},mergeProcurementPlanByAll:function(){0===this.tableData.length?this.$message({message:"当前无可合并的采购计划数据!",type:"warning"}):(this.mergeDialogVisible=!0,this.mergeDialogVisibleContent="您确定要合并所有的采购计划",this.mergeParams.optType=0)},submitMerge:function(){var t=this,e={I_optType:this.mergeParams.optType,I_ids:this.mergeParams.ids,I_optuser:this.name};Object(u["X"])(e).then((function(e){200===e.code?(t.loadingWeb=!1,t.$message({message:"操作成功",type:"success"}),setTimeout((function(){t.refreshTable()}))):t.$message({message:e.message,type:"warning"}),t.mergeDialogVisible=!1}))},GoodsFocus:function(){var t=localStorage.getItem("data");t&&this.historydata(JSON.parse(t))},getTables:function(t){var e=this;this.paramData=t,Object(u["v"])(t).then((function(t){200===t.code&&(e.tableData=t.data.list,e.total=t.data.total,0===t.data.list.length&&(e.buttonVisibleFactory=!1,e.buttonVisibleSupplier=!1,e.buttonVisibleproductName=!1,e.buttonVisibleSupplierAndFactory=!1))}))},refreshTable:function(){var t={page:1,pageSize:24};this.getTables(t)},getFactoryName:function(){var t=this;Object(u["n"])({}).then((function(e){if(200===e.code){var a=[];e.data.forEach((function(t){1!==t.id&&a.push(t)})),t.FactoryNameList=a}}))},getSupplierName:function(){var t=this;Object(u["P"])({}).then((function(e){200===e.code&&(t.SupplierNameList=e.data)}))},onSubmit:function(){var t=this.formQuery,e=Object(o["a"])({page:1,pageSize:24},t);this.queryInfo={page:1,pageSize:24},e.factoryId||delete e.factoryId,e.supplierId||delete e.supplierId,this.paramData=e,this.getTables(e),this.buttonVisible()},handleSelectionChange:function(t){},handleSizeChange:function(t){this.queryInfo.pageSize=t,this.queryInfo.page=1,this.paramData.page=1,this.paramData.pageSize=t,this.getTables(this.paramData)},handleCurrentChange:function(t){this.queryInfo.page=t,this.paramData.page=t,this.getTables(this.paramData)}}},d=c,m=(a("84f8"),a("2877")),p=Object(m["a"])(d,r,n,!1,null,"229622c9",null);e["default"]=p.exports},faca:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[24,100,200,500,1e3],"page-size":t.pageSize,layout:t.layout,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},n=[],i=(a("a9e3"),{props:{pageSize:{type:Number,default:10},layout:{type:String,default:"sizes, prev, pager, next"},total:Number,currentPage:Number},data:function(){return{}},mounted:function(){},methods:{handleSizeChange:function(t){this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}}}),o=i,u=a("2877"),l=Object(u["a"])(o,r,n,!1,null,"1021ea0e",null);e["a"]=l.exports}}]);