(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37108be5"],{1838:function(t,e,a){},"4fb0":function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[1,2,5,10],"page-size":t.pageSize,layout:"prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},r=[],n=(a("a9e3"),{props:{pageSize:{type:Number,default:10},total:Number,currentPage:Number},data:function(){return{}},methods:{handleSizeChange:function(t){this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}}}),i=n,l=a("2877"),s=Object(l["a"])(i,o,r,!1,null,"03d95dfa",null);e["a"]=s.exports},"5cb5":function(t,e,a){"use strict";a("1838")},9633:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-conent main-conent-minheight"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formQuery}},[a("el-form-item",{attrs:{label:"日期从："}},[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},model:{value:t.formQuery.timeData,callback:function(e){t.$set(t.formQuery,"timeData",e)},expression:"formQuery.timeData"}})],1)]),a("br"),a("el-form-item",{attrs:{label:"显示类型："}},[a("el-checkbox-group",{model:{value:t.objType,callback:function(e){t.objType=e},expression:"objType"}},t._l(t.types,(function(e){return a("el-checkbox",{key:e.type,attrs:{label:e.type}},[t._v(t._s(e.name))])})),1)],1),a("br"),a("el-form-item",{attrs:{label:"物品分类："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",clearable:"",placeholder:"请选择"},model:{value:t.formQuery.productClassId,callback:function(e){t.$set(t.formQuery,"productClassId",e)},expression:"formQuery.productClassId"}},t._l(t.classData,(function(t){return a("el-option",{key:t.id,attrs:{label:t.namecode,value:t.id}})})),1)],1),a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"物品名称："}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择","filter-method":t.search,clearable:""},on:{change:t.searchCle,focus:t.GoodsFocus},model:{value:t.formQuery.productId,callback:function(e){t.$set(t.formQuery,"productId",e)},expression:"formQuery.productId"}},t._l(t.optionsGoods,(function(t){return a("el-option",{key:t.id,attrs:{label:t.namecode,value:t.id}})})),1)],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:t.onSubmit}},[t._v("查询")])],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:t.clickExport}},[t._v("导出到EXCEL文件")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTab,expression:"loadingTab"}],ref:"multipleTable",staticStyle:{width:"98%"},attrs:{data:t.tableData,border:"",stripe:"","tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"id",label:"标识",width:"50",align:"center"}}),a("el-table-column",{attrs:{property:"skuCode",label:"查询码",align:"center"}}),a("el-table-column",{attrs:{property:"optDate",label:"盘存日期时间",align:"center"}}),a("el-table-column",{attrs:{property:"productName",label:" 物品名称",align:"center",width:"200","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"specification",label:"规格",align:"center"}}),a("el-table-column",{attrs:{property:"unit",label:"单位",align:"center"}}),a("el-table-column",{attrs:{property:"count",label:"数量",align:"center"}}),a("el-table-column",{attrs:{property:"price",label:"单价（元）",align:"center"}}),a("el-table-column",{attrs:{property:"amount",label:"金额（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("num_tofixed")(e.row.amount)))])]}}])}),a("el-table-column",{attrs:{property:"taxRate",label:"税率（%）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(Number(100*e.row.taxRate).toFixed(2))+" %")])]}}])}),a("el-table-column",{attrs:{property:"taxRate",label:"税额（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.amount*e.row.taxRate).toFixed(2)))])]}}])}),a("el-table-column",{attrs:{property:"taxRate",label:"价税税额（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.amount+e.row.amount*e.row.taxRate).toFixed(2)))])]}}])}),a("el-table-column",{attrs:{property:"objtype",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(" "+t._s("1000051"==e.row.objtype?"上期结存":"1000052"==e.row.objtype?"本期结存":"100701"==e.row.objtype?"采购入库":"100702"==e.row.objtype?"生产入库":"100703"==e.row.objtype?"调拨入库":"100704"==e.row.objtype?"退货入库":"100705"==e.row.objtype?"报溢入库":"100706"==e.row.objtype?"往期残留":"100707"==e.row.objtype?"赠送入库":"100708"==e.row.objtype?"物料退回":"100709"==e.row.objtype?"工厂采购入库":"100901"==e.row.objtype?"领料出库":"100902"==e.row.objtype?"发货出库":"100903"==e.row.objtype?"调拨出库":"100904"==e.row.objtype?"报损出库":"100905"==e.row.objtype?"赔偿出库":"100909"==e.row.objtype?"工厂采购出库":"状态出错"))])]}}])}),a("el-table-column",{attrs:{property:"vdata",label:"备注",align:"center"}})],1),a("div",{staticClass:"margin-t16 text-right"},[a("pagination",{attrs:{"current-page":t.paramData.page,total:t.total,pageSize:t.paramData.pageSize},on:{handleSizeChange:t.handleSizeChange,handleCurrentChange:t.handleCurrentChange}})],1),a("el-dialog",{staticStyle:{"margin-top":"15vh"},attrs:{title:"导出提示",visible:t.dialogExport,width:"30%"},on:{"update:visible":function(e){t.dialogExport=e}}},[a("span",[t._v(t._s(t.ExportHints))]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.dialogExportClick}},[t._v("确 定")])],1)])],1)},r=[],n=a("5530"),i=(a("d3b7"),a("159b"),a("e9c4"),a("ac1f"),a("1276"),a("d81d"),a("a434"),a("2f62")),l=a("abf1"),s=a("4fb0"),c=a("da87"),d=[{name:"上期期末",type:"1000051"},{name:"本期生产",type:"100702"},{name:"本期赔偿与增送",type:"100905"},{name:"本期出货",type:"100902"},{name:"本期损溢",type:"100904"},{name:"本期期末",type:"1000052"}],p={components:{pagination:s["a"]},data:function(){return{paramData:{page:1,pageSize:24},total:0,loadingTab:!1,loadingQuery:!1,tableData:[],startTime:"",endTime:"",formQuery:{timeData:"",productClassId:"",productId:""},classData:[],objType:[],obj:{},types:d,goodsData:[],stockData:[],optionsGoods:[],dialogExport:!1,ExportHints:""}},computed:Object(n["a"])({},Object(i["c"])({})),created:function(){var t=this.changeData();this.formQuery.timeData=t,this.provinceList=this.data;var e=Object(n["a"])(Object(n["a"])({},this.paramData),{},{startTime:t[0],endTime:t[1]});this.getSelectOperationalList(e)},methods:{search:function(t){t.length>=2?this.getAllProductInfo(t):this.optionsGoods=[]},searchCle:function(t){t||(this.optionsGoods=[])},getAllProductInfo:function(t){var e=this,a={nodeType:100303,productName:t};Object(c["f"])(a).then((function(t){200===t.code?e.optionsGoods=t.data:e.$message({message:t.message,type:"warning"})}))},getSelectOperationalList:function(t){var e=this;this.tableData=[],Object(l["c"])(t).then((function(t){if(200===t.code)for(var a=0;a<t.data.list.length;a++)e.tableData.push(t.data.list[a]),e.total=t.data.total,e.paramData.page=t.data.pageNum,e.paramData.pageSize=t.data.pageSize;else e.$message({type:"warning",message:t.message})}))},onSubmit:function(){var t=this,e=this.historyList,a=this.formQuery.productId,o=localStorage.getItem("data");e=o?JSON.parse(o):[],this.optionsGoods.forEach((function(t){t.id===a&&e.unshift(t)})),this.optionsGoods=this.removalDuplicate(e),localStorage.setItem("data",JSON.stringify(e)),this.tableData=[];var r=this.formQuery;null===r.timeData?0===this.objType.length?(this.obj={objType:"",productClassId:r.productClassId,productId:r.productId},r.productClassId||delete this.obj.productClassId,r.productId||delete this.obj.productId,this.getSelectOperationalList(this.obj)):this.objType.forEach((function(e){var a={objType:e,startTime:r.startTime,endTime:r.endTime,productClassId:r.productClassId,productId:r.productId};r.productClassId||delete a.productClassId,r.productId||delete a.productId,Object(l["c"])(a).then((function(e){if(200===e.code)for(var a=0;a<e.data.list.length;a++)t.tableData.push(e.data.list[a]),t.total=e.data.total,t.paramData.page=e.data.pageNum,t.paramData.pageSize=e.data.pageSize;else t.$message({type:"warning",message:e.message})}))})):0===this.objType.length?(this.obj={startTime:r.timeData[0],fendTime:r.timeData[1],objType:"",productClassId:r.productClassId,productId:r.productId},r.productClassId||delete this.obj.productClassId,r.productId||delete this.obj.productId,this.getSelectOperationalList(this.obj)):this.objType.forEach((function(e){var a={objType:e,startTime:r.startTime,endTime:r.endTime,productClassId:r.productClassId,productId:r.productId};r.productClassId||delete a.productClassId,r.productId||delete a.productId,Object(l["c"])(a).then((function(e){if(200===e.code)for(var a=0;a<e.data.list.length;a++)t.tableData.push(e.data.list[a]),t.total=e.data.total,t.paramData.page=e.data.pageNum,t.paramData.pageSize=e.data.pageSize;else t.$message({type:"warning",message:e.message})}))}))},clickExport:function(){var t=this,e=this.formQuery;if(e.timeData?e.timeData.length&&(e.startTime=e.timeData[0].split(" ")[0],e.endTime=e.timeData[1].split(" ")[0],this.formQuery.paramStr="开始时间："+e.startTime+",结束时间："+e.endTime):(delete e.startTime,delete e.endTime),0!==this.objType.length){var a=this.objType.map((function(e){return t.formQuery.objType=e}));this.formQuery.paramStr="开始时间: "+e.startTime+",结束时间: "+e.endTime+",显示类型："+a}var o=Object(n["a"])({},e);delete o.timeData,""===e.productClassId&&delete e.productClassId,""===e.productId&&delete e.productId,e.timeData?Object(l["f"])(o).then((function(e){200===e.code?(t.ExportHints=e.data,t.dialogExport=!0):t.dialogExport=!1})):this.$message({type:"warning",message:"请选择导出的时间跨度 ^_^"})},dialogExportClick:function(){this.dialogExport=!1,this.$message({type:"success",message:"操作成功"})},handleSizeChange:function(t){this.paramData.pageSize=t,this.handleCurrentChange(1)},handleCurrentChange:function(t){this.paramData.page=t,this.getSelectOperationalList(this.paramData)},GoodsFocus:function(){var t=localStorage.getItem("data");t&&(this.optionsGoods=JSON.parse(t),this.historydata(JSON.parse(t)))},removalDuplicate:function(t){for(var e=0;e<t.length;e++){var a=t[e];if(""!==a)for(var o=e+1;o<t.length;o++)t[e].id===t[o].id&&t.splice(e,1)}return t},historydata:function(t){this.optionsGoods=[];var e=localStorage.getItem("data");this.optionsGoods=JSON.parse(e),t.length>this.max_history&&this.optionsGoods.splice(this.max_history)}},mounted:function(){var t=this;Object(l["a"])().then((function(e){200===e.code&&(t.classData=e.data.records)})),Object(l["d"])().then((function(e){200===e.code&&(t.goodsData=e.data.list)}))}},u=p,m=(a("5cb5"),a("2877")),g=Object(m["a"])(u,o,r,!1,null,"328bc207",null);e["default"]=g.exports},abf1:function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"e",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"d",(function(){return l})),a.d(e,"c",(function(){return s})),a.d(e,"f",(function(){return c}));var o=a("83c3");function r(t){return Object(o["a"])({url:"/operational/selectOperationalRecordList",method:"get",params:t})}function n(t){return Object(o["a"])({url:"/admin/excel/operationInventoryTaking",method:"GET",params:t})}function i(t){return Object(o["a"])({url:"/admin/goodsClass/getGoodsClassList",method:"get",params:t})}function l(t){return Object(o["a"])({url:"/product/selectProductList",method:"get",params:t})}function s(t){return Object(o["a"])({url:"/operational/selectOperationalList",method:"get",params:t})}function c(t){return Object(o["a"])({url:"/admin/excel/operationStatistic",method:"GET",params:t})}}}]);