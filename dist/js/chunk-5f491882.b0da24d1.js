(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f491882"],{"2f88":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":t.pageSizesArr||t.pageSizesArrInit,"page-size":t.pageSize,layout:t.layout,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},i=[],o=(a("a9e3"),a("ac1f"),a("1276"),{props:{pageSize:{type:Number,default:10},pageSizesArr:{type:Array,default:null},layout:{type:String,default:"total,sizes,prev, pager, next"},total:Number,currentPage:Number},data:function(){return{pageSizesArrInit:[24,100,200,500,1e3]}},mounted:function(){var t=location.href.split("/")[2];"192.168.1.145:8080"===t&&(this.pageSizesArrInit=[2,24,100,200,500,1e3])},methods:{handleSizeChange:function(t){this.$emit("handleSizeChange",t)},handleCurrentChange:function(t){this.$emit("handleCurrentChange",t)}}}),r=o,l=a("2877"),s=Object(l["a"])(r,n,i,!1,null,"79dfe774",null);e["a"]=s.exports},4795:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"a",(function(){return i}));a("a434");function n(t){var e=new Date(t),a=e.getMonth()+1,n=e.getDate();a>=1&&a<=9&&(a="0"+a),n>=0&&n<=9&&(n="0"+n);var i=e.getFullYear()+"-"+a+"-"+n+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();return i}function i(t,e){for(var a=t.length,n=0;n<a;n++)if(t[n].id===e)return 0===n?(t.shift(),t):n===a-1?(t.pop(),t):(t.splice(n,1),t)}},7047:function(t,e,a){},7113:function(t,e,a){"use strict";a("7047")},a80d:function(t,e,a){"use strict";a.d(e,"e",(function(){return i})),a.d(e,"m",(function(){return o})),a.d(e,"j",(function(){return r})),a.d(e,"f",(function(){return l})),a.d(e,"n",(function(){return s})),a.d(e,"c",(function(){return u})),a.d(e,"l",(function(){return d})),a.d(e,"a",(function(){return c})),a.d(e,"d",(function(){return p})),a.d(e,"h",(function(){return m})),a.d(e,"i",(function(){return f})),a.d(e,"b",(function(){return h})),a.d(e,"k",(function(){return g})),a.d(e,"g",(function(){return b}));var n=a("83c3");function i(t){return Object(n["a"])({url:"/outturnPlan/selectOutturnPlanList",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/outturnPlan/saveOutturnPlan",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/admin/shopper/warehouse/list",method:"get",params:t})}function l(t){return Object(n["a"])({url:"/outturnPlan/getOutturnPlanListList",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/outturnPlan/updateOutturnPlanList",method:"post",data:t})}function u(t,e){return Object(n["a"])({url:"/outturnPlan/deleteOutturnPlanList?id=".concat(e),method:"post",data:t})}function d(t){return Object(n["a"])({url:"/outturnPlan/auditOutturnPlan",method:"POST",data:t})}function c(t){return Object(n["a"])({url:"/admin/data/deleteById/I_outturn_plan_list?dataId="+t,method:"post",data:[]})}function p(t){return Object(n["a"])({url:"/product/getAllProductInfo",method:"get",params:t})}function m(t){return Object(n["a"])({url:"/product/getProductIdAndName",method:"get",params:t})}function f(t){return Object(n["a"])({url:"/product/getProductIdAndNameTwo",method:"get",params:t})}function h(t,e){return Object(n["a"])({url:"/outturnPlan/deleteOutturnPlan?id="+e,method:"post",data:t})}function g(t){return Object(n["a"])({url:"/admin/excel/operationCausticExcessive2",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/product/getProduct",method:"get",params:t})}},b973:function(t,e,a){"use strict";a.d(e,"i",(function(){return i})),a.d(e,"h",(function(){return o})),a.d(e,"e",(function(){return r})),a.d(e,"g",(function(){return l})),a.d(e,"f",(function(){return s})),a.d(e,"l",(function(){return u})),a.d(e,"d",(function(){return d})),a.d(e,"b",(function(){return c})),a.d(e,"c",(function(){return p})),a.d(e,"o",(function(){return m})),a.d(e,"a",(function(){return f})),a.d(e,"k",(function(){return h})),a.d(e,"j",(function(){return g})),a.d(e,"m",(function(){return b})),a.d(e,"n",(function(){return y}));var n=a("83c3");function i(t,e){return Object(n["a"])({url:"/admin/data/selectByCond/I_transfet_plan/findTransferPlanList?pageNo=".concat(e),method:"post",data:t})}function o(t){return Object(n["a"])({url:"/admin/transfer/getTransferProductList",method:"get",params:t})}function r(t){return Object(n["a"])({url:"/admin/data/execProcedure/find_kdbmx?pageNo=0",method:"POST",data:t})}function l(t){return Object(n["a"])({url:"/admin/transfer/insert",method:"post",data:t})}function s(t,e){return Object(n["a"])({url:"/admin/data/selectByCond/I_transfer_plan_records/findTransferPlanRecords?pageNo=".concat(e),method:"POST",data:t})}function u(t){return Object(n["a"])({url:"/admin/transfer/audit",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/product/existProductTheFactory",method:"GET",params:t})}function c(t){return Object(n["a"])({url:"/product/copyProductToNewFactoryTwo",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/admin/data/execProcedure/exec_allot?pageNo=0",method:"post",data:t})}function m(t){return Object(n["a"])({url:"/admin/transfer/updateTransferNum",method:"post",data:t})}function f(t){var e={getColumns:[{nameCode:"id"},{nameCode:"namecode"},{nameCode:"specif"},{nameCode:"data"},{nameCode:"unit"},{nameCode:"unit1"},{nameCode:"unitbit"},{nameCode:"unitbit1"},{nameCode:"getnum"},{nameCode:"getnum1"},{nameCode:"sku"},{nameCode:"producedate"}],Condition:[{nameCode:"mainwareid",data:t.warehouseId},{nameCode:"nodetype",data:100303},{nameCode:"namecode",nodetype:"LIKE",data:"%"+t.goodsName+"%"}]};return Object(n["a"])({url:"/admin/data/selectByCond/查询仓库可调拨行?pageNo=0",method:"post",data:e})}function h(t){return Object(n["a"])({url:"/admin/data/execProcedure/指定行锁单?pageNo=0",method:"POST",data:t})}function g(t){return Object(n["a"])({url:"/admin/data/execProcedure/指定行解锁?pageNo=0",method:"POST",data:t})}function b(t){return Object(n["a"])({url:"/admin/data/execProcedure/调拨单审核确认?pageNo=0",method:"POST",data:t})}function y(t){return Object(n["a"])({url:"/admin/data/execProcedure/报损单审核确认?pageNo=0",method:"POST",data:t})}},d385:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-conent main-conent-minheight"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formQuery}},[a("el-form-item",{staticStyle:{"margin-right":"30px"},attrs:{label:"日期从："}},[a("div",{staticClass:"block"},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",align:"right",placeholder:"开始日期","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.starDataMax}},model:{value:t.formQuery.startTime,callback:function(e){t.$set(t.formQuery,"startTime",e)},expression:"formQuery.startTime"}}),t._v(" - "),a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date",align:"right",placeholder:"结束时间","value-format":"yyyy-MM-dd","picker-options":{disabledDate:t.endDataMin}},model:{value:t.formQuery.endTime,callback:function(e){t.$set(t.formQuery,"endTime",e)},expression:"formQuery.endTime"}})],1)]),a("el-form-item",{attrs:{label:"类型："}},[a("el-select",{attrs:{clearable:"",placeholder:"状态"},on:{change:t.onSubmit},model:{value:t.formQuery.nodeType,callback:function(e){t.$set(t.formQuery,"nodeType",e)},expression:"formQuery.nodeType"}},[a("el-option",{attrs:{label:"申请报损",value:"102001"}}),a("el-option",{attrs:{label:"确认报损",value:"102002"}})],1)],1),a("el-form-item",{attrs:{label:"报损单号："}},[a("el-input",{model:{value:t.formQuery.outturnPlanCode,callback:function(e){t.$set(t.formQuery,"outturnPlanCode",e)},expression:"formQuery.outturnPlanCode"}})],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:t.onSubmit}},[t._v("查询")])],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:t.clickExport}},[t._v("导出查询结果到EXCEL")])],1)],1),a("el-table",{ref:"TableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:"","highlight-current-row":""}},[a("el-table-column",{attrs:{property:"id",label:"标注",width:"50",align:"center"}}),a("el-table-column",{attrs:{property:"namecode",label:" 报损单号","show-overflow-tooltip":!0,align:"center"}}),a("el-table-column",{attrs:{property:"warehouseName",label:"工厂仓库",align:"center"}}),a("el-table-column",{attrs:{property:"data",label:"申请人",align:"center"}}),a("el-table-column",{attrs:{property:"iudex",label:"审核人",align:"center"}}),a("el-table-column",{attrs:{property:"optdate",label:"日期",align:"center"}}),a("el-table-column",{attrs:{property:"nodetypeName",label:"状态类型",align:"center"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.nodeTypeBool?a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.lossDetail(e.row.id,e.row)}}},[t._v("查看明细")])],1):a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.lossDetail(e.row.id,e.row,2)}}},[t._v("审核")])],1)]}}])})],1),a("div",{staticClass:"margin-t16 text-right"},[a("AppPaging",{attrs:{total:t.allTate,pageSize:t.paramData.pageSize,currentPage:t.paramData.page},on:{handleCurrentChange:t.handleCurrentChange,handleSizeChange:t.handleSizeChange}})],1),a("el-dialog",{attrs:{title:"添加报损单",width:"86%",visible:t.innerVisibleGoods},on:{"update:visible":function(e){t.innerVisibleGoods=e}}},[a("el-dialog",{attrs:{width:"60%",title:"商品名称",visible:t.innerVisibleGoodsDeailt,"append-to-body":""},on:{"update:visible":function(e){t.innerVisibleGoodsDeailt=e}}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.formGoods}},[a("el-form-item",{attrs:{label:"物品名称:"}},[a("el-input",{model:{value:t.formGoods.svalue1,callback:function(e){t.$set(t.formGoods,"svalue1",e)},expression:"formGoods.svalue1"}})],1),a("el-form-item",{staticClass:"overall",staticStyle:{"margin-right":"30px"}},[a("el-button",{attrs:{type:"primary",loading:t.loadingQuery},on:{click:t.onSubmitGoods}},[t._v("查询")])],1)],1),a("el-table",{ref:"multipleTable",attrs:{stripe:"",data:t.gridDataGoods,border:"","tooltip-effect":"dark"},on:{"selection-change":t.handleSelectionChangeGood}},[a("el-table-column",{attrs:{type:"selection",selectable:t.checkSelectable,width:"55"}}),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),a("el-table-column",{attrs:{property:"namecode",label:"物品名称"}}),a("el-table-column",{attrs:{property:"git",label:"规格"}}),a("el-table-column",{attrs:{property:"address",label:"单位"}}),a("el-table-column",{attrs:{property:"address",label:"库存数"}})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.innerVisibleGoodsDeailt=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addGoodsS}},[t._v("添 加")])],1)],1),a("el-button",{attrs:{type:"primary"},on:{click:t.addGoods}},[t._v("添加商品")]),a("el-table",{attrs:{data:t.gridData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),a("el-table-column",{attrs:{property:"namecode",label:"商品名称"}}),a("el-table-column",{attrs:{property:"git",label:"规格"}}),a("el-table-column",{attrs:{property:"address",label:"数量"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.num,callback:function(a){t.$set(e.row,"num",a)},expression:"scope.row.num"}})]}}])}),a("el-table-column",{attrs:{property:"address",label:"金额（元）"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.money,callback:function(a){t.$set(e.row,"money",a)},expression:"scope.row.money"}})]}}])}),a("el-table-column",{attrs:{property:"address",label:"单位"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{model:{value:e.row.dan,callback:function(a){t.$set(e.row,"dan",a)},expression:"scope.row.dan"}})]}}])}),a("el-table-column",{attrs:{property:"address",label:"备注"}}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.deleGoods(e.row.id)}}},[t._v("删除")])]}}])})],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.innerVisibleGoods=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",loading:t.loadingFactory},on:{click:t.addFactory}},[t._v(t._s(t.editState?"修 改":"添 加")+" ")])],1)],1),a("el-dialog",{attrs:{title:"查看明细",visible:t.dialogVisibleDetail,width:"80%"},on:{"update:visible":function(e){t.dialogVisibleDetail=e}}},[a("div",{staticStyle:{"padding-bottom":"30px",display:"flex"}},[a("div",{staticStyle:{"margin-right":"30px"}},[a("span",[t._v("报溢单号:")]),a("span",[t._v(t._s(t.opinionData.namecode))])]),a("div",{staticStyle:{"margin-right":"30px"}},[a("span",[t._v("申请人:")]),a("span",[t._v(t._s(t.opinionData.data))])]),a("div",{staticStyle:{"margin-right":"30px"}},[a("span",[t._v("审核人:")]),a("span",[t._v(t._s(t.opinionData.iudex))])]),a("div",{staticStyle:{"margin-right":"30px"}},[a("span",[t._v("日期：")]),a("span",[t._v(t._s(t.opinionData.optdate))])]),a("div",{staticStyle:{"margin-right":"30px"}},[a("span",[t._v("总金额（元）：")]),a("span",[t._v(t._s(t.opinionData.amount))])])]),a("el-table",{attrs:{data:t.gridDataDetail,border:"",stripe:""}},[a("el-table-column",{attrs:{property:"id",label:"标识",width:"50",align:"center"}}),a("el-table-column",{attrs:{property:"namecode",label:"物品名称",width:"450","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{property:"specif",label:"规格"}}),a("el-table-column",{attrs:{property:"unit",label:"单位",width:"60"}}),a("el-table-column",{attrs:{property:"inventoryNum",label:"库存"}}),a("el-table-column",{attrs:{property:"num",label:"数量","min-width":"80"}}),a("el-table-column",{attrs:{property:"price",label:"金额（元）"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.price))])]}}])}),a("el-table-column",{attrs:{property:"nodetypeName",label:"状态类型"}}),a("el-table-column",{attrs:{property:"vdata",label:"操作",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return["102002"!=t.opinionData.nodetype?a("div",["102002"!=e.row.nodetype?a("div",[a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.set_click_Unlock(e.row,0)}}},[t._v("撤 销")])],1):a("div",[a("el-popover",{attrs:{placement:"bottom",title:"",width:"200",trigger:"click",content:e.row.description||"(无填写内容)"}},[a("el-button",{attrs:{slot:"reference"},slot:"reference"},[t._v("查看审核意见")])],1)],1)]):t._e()]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticStyle:{display:"flex","align-items":"flex-star","margin-top":"30px","justify-content":"space-between"}},[a("div",[a("span",{staticStyle:{color:"#999","font-size":"14px"}},[t._v(" 审核意见： ")]),t.auditBool?a("span",[t._v(t._s(t.opinionData.opinion))]):a("el-input",{staticStyle:{width:"500px"},attrs:{type:"",rows:2,placeholder:"请输入内容"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.to_examine()}}},[t._v("审核通过")]),a("el-button",{on:{click:function(e){t.dialogVisibleDetail=!1}}},[t._v("关 闭")])],1)])])],1),a("el-dialog",{attrs:{title:"确认审核通过",visible:t.DetailData.sync,width:"26%"},on:{"update:visible":function(e){return t.$set(t.DetailData,"sync",e)}}},[a("el-form",[a("el-form-item",{attrs:{label:"审核意见:"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.DetailData.description,callback:function(e){t.$set(t.DetailData,"description",e)},expression:"DetailData.description"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.auditClick(t.DetailData.row,1)}}},[t._v("确 定")]),a("el-button",{on:{click:function(e){t.DetailData.sync=!1}}},[t._v("取 消")])],1)],1)],1)},i=[],o=a("5530"),r=(a("a4d3"),a("e01a"),a("d81d"),a("d3b7"),a("159b"),a("b64b"),a("c740"),a("99af"),a("b973")),l=a("2f62"),s=a("4795"),u=a("a80d"),d=a("2f88"),c={components:{AppPaging:d["a"]},data:function(){return{scrollTop:0,scrollLeft:0,tableRown:{},DetailData:{sync:!1,row:"",type:"",description:""},is_auditclick4:!1,is_out_auditclick4:!1,loadingTab:!1,loadingQuery:!1,currentPage1:1,svalue1:"",svalue2:"",info:{isTrue:!1,isShow:!0},checked:!1,checked1:!1,checked2:!1,checked3:!1,value1:"",value2:"",allTate:24,tableData:[],formQuery:{startTime:"",endTime:"",dataTime:"",nodeType:"102001",outturnPlanCode:""},paramData:{page:1,pageSize:24},auditBool:!1,innerVisibleGoods:!1,loadingFactory:!1,innerVisibleGoodsDeailt:!1,editState:0,formGoods:{value1:""},gridData:[{namecode:"商品名称1",git:"1",id:1,bbb:"123"},{namecode:"商品名称2",git:"1",id:2,bbb:"123"}],gridDataGoods:[{namecode:"商品名称1",id:1,git:"1"},{namecode:"商品名称2",id:2,git:"1"},{namecode:"商品名称3",id:3,git:"1"},{namecode:"商品名称4",id:4,git:"1"}],newGridDataGoods:[],gridDataDetail:[],opinionData:{},outturnPlanId:"",description:"",dialogVisibleDetail:!1,textarea:""}},computed:Object(o["a"])({},Object(l["c"])({userId:"user/userId"})),created:function(){this.changeData();this.onSubmit()},methods:{starDataMax:function(t){if(this.formQuery.endTime)return t.getTime()>=Date.parse(this.formQuery.endTime)},endDataMin:function(t){if(this.formQuery.startTime)return t.getTime()<=Date.parse(this.formQuery.startTime)-864e5},handleSizeChange:function(t){this.paramData.pageSize=t,this.handleCurrentChange(1)},handleCurrentChange:function(t){this.paramData.page=t,this.getOutturnPlanList(this.paramData)},to_examine:function(){var t=this,e={I_script:this.description,I_ids:this.tableRown.id,I_optuser:this.userId};this.$confirm("你确定要对当前的报损单进行审核通过吗？","提示",{confirmButtonText:"确定"}).then((function(){t.set_to_Examine_overflow(e)})).catch((function(){}))},set_to_Examine_overflow:function(t){var e=this;Object(r["n"])(t).then((function(t){e.loadingQuery=!1,200===t.code&&(t.data[0].flag>0?(e.dialogVisibleDetail=!1,e.$message.success(t.data[0].result),e.paramData.page=1,e.getOutturnPlanList(e.paramData)):e.$message.warning(t.data[0].result))}))},set_click_Unlock:function(t){var e=this,a={I_ids:t.sourceid+"-"+t.num,I_optuser:this.userId,I_sId:t.id,I_inType:102005};this.$confirm("你确定要撤销吗？","提示",{confirmButtonText:"确定"}).then((function(){e.set_goods_Unlock(a)})).catch((function(){}))},set_goods_Unlock:function(t){var e=this;this.loadingQuery=!0,Object(r["j"])(t).then((function(t){e.loadingQuery=!1,200===t.code&&(t.data[0].flag>0?(e.$message.success(t.data[0].result),e.paramData.page=1,e.getOutturnPlanList(e.paramData),e.getOutturnPlanListList(e.tableRown.id,2,1)):e.$message.warning(t.data[0].result))}))},openDetail:function(t){this.DetailData.row=t,this.DetailData.sync=!0,this.DetailData.description=""},auditClick4:function(t){var e={nodeType:t,optId:this.userId,outturnPlanId:this.outturnPlanId,vdata:{opinion:this.description}};this.postAuditOutturnPlan(e,t)},getOutturnPlanList:function(t){var e=this,a=Object(o["a"])({outturnPlanType:1},t);this.loadingTab=!0,this.loadingQuery=!0,this.loadingWeb=!0,Object(u["e"])(a).then((function(t){if(e.loadingQuery=!1,e.loadingWeb=!1,e.loadingTab=!1,200===t.code){e.currentPage1=t.data.pageNum;var a=t.data.list;e.allTate=t.data.total,e.tableData=a.map((function(t){return t.nodeTypeBool="102002"===t.nodetype||"102004"===t.nodetype||"102007"===t.nodetype?1:0,t}))}else e.$message({message:t.message,type:"warning"})}))},onSubmit:function(){var t=Object(o["a"])({page:1,pageSize:this.paramData.pageSize},this.formQuery);Object.keys(t).forEach((function(e){var a=t[e];""===a&&delete t[e]})),this.paramData=t,this.getOutturnPlanList(this.paramData)},auditClick:function(t,e){var a={nodeType:e,optId:this.userId,outturnPlanId:this.outturnPlanId,outturnPlanListId:t.id,vdata:{opinion:this.description}};1===e&&(this.DetailData.description&&(a.vdata={description:this.DetailData.description}),this.DetailData.sync=!1),this.postAuditOutturnPlan(a,t)},auditClick2:function(t){var e=this,a=t.id;Object(u["a"])(a).then((function(t){200===t.code&&(e.getOutturnPlanList(e.paramData),e.getOutturnPlanListList(e.outturnPlanId),e.$message({message:"操作成功!",type:"success"}))}))},postAuditOutturnPlan:function(t,e){var a=this;Object(u["l"])(t).then((function(t){200===t.code&&(a.DetailData.description="",a.$message({message:t.message,type:"success"}),a.getOutturnPlanList(a.paramData),a.getOutturnPlanListList(a.outturnPlanId),a.if_Detail_state())}))},clickTransfers:function(){this.innerVisibleGoods=!0},addGoods:function(){this.innerVisibleGoodsDeailt=!0;for(var t=this.gridDataGoods,e=this.gridData,a=0;a<t.length;a++){t[a].stateNum=0;for(var n=0;n<e.length;n++)e[n].id===t[a].id&&(t[a].stateNum=2)}},putLoss:function(){this.innerVisibleGoods=!0},lossDetail:function(t,e,a){this.tableRown=e,this.outturnPlanId=t,this.description="",this.auditBool=2!==a,this.opinionData=e,this.getOutturnPlanListList(t),this.dialogVisibleDetail=!0,this.is_auditclick4=!1,this.is_out_auditclick4=!1},dialogVisibleDetail_false:function(t){var e=!0;t.length<=0&&(this.dialogVisibleDetail=!1),t.forEach((function(t){"102002"!==t.nodetype&&(e=!1)})),e&&(this.dialogVisibleDetail=!1)},getOutturnPlanListList:function(t,e,a){var n=this,i={outturnPlanId:t,outturnPlanType:1};Object(u["f"])(i).then((function(t){if(200===t.code){n.gridDataDetail=t.data.list,e&&n.dialogVisibleDetail_false(n.gridDataDetail);var i=n.gridDataDetail.findIndex((function(t){return"102001"===t.nodetype}));1===a&&i<0&&(n.dialogVisibleDetail=!1,n.$message.warning("已全部撤销"))}else n.$message({message:t.message,type:"warning"})}))},if_Detail_state:function(){var t=this;this.is_auditclick4=!0,this.gridDataDetail.length<=0?(this.is_auditclick4=!1,this.is_out_auditclick4=!0):this.is_out_auditclick4=!1,this.gridDataDetail.forEach((function(e){"102002"!==e.nodetype&&(t.is_auditclick4=!1)})),this.is_auditclick4&&(this.dialogVisibleDetail=!1)},onSubmitGoods:function(){},addGoodsS:function(){var t=this.newGridDataGoods,e=this.gridData.concat(t);this.gridData=e,this.innerVisibleGoodsDeailt=!1,this.newGridDataGoods=[],this.$refs.multipleTable.clearSelection()},clicGoods:function(){this.gridDataGoods},deleteArray:function(){},handleSelectionChangeGood:function(t){for(var e=this.gridData,a=t,n=[],i=0;i<e.length;i++)for(var o=0;o<a.length;o++)a[o].id===e[i].id&&n.push(a[o].id);this.deleteArray(e,n),this.newGridDataGoods=t},checkSelectable:function(t){return 2!==t.stateNum},deleGoods:function(t){var e=this,a=this.gridData;Object(s["a"])(a,t),this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addFactory:function(){for(var t=this.gridData,e=!0,a=!0,n=!0,i=0;i<t.length;i++)this.gridData[i].num||(e=!1),this.gridData[i].money||(a=!1),this.gridData[i].dan||(n=!1);e?a?n||this.$message({message:"请填写单位",type:"warning"}):this.$message({message:"请填写金额",type:"warning"}):this.$message({message:"请填写数量",type:"warning"})},dataGoods:function(){},clickExport:function(){this.formQuery.dataTime?(this.formQuery.startTime=this.formQuery.dataTime[0],this.formQuery.endTime=this.formQuery.dataTime[1]):(this.formQuery.startTime="",this.formQuery.endTime=""),this.formQuery.paramStr="开始时间："+this.formQuery.startTime+",结束时间："+this.formQuery.endTime,this.formQuery.dataTime?this.operationCausticExcessive2(this.formQuery):this.$message({type:"warning",message:"请选择导出的时间跨度 ^_^"})},operationCausticExcessive2:function(t){var e=this,a=Object(o["a"])({outturnPlanType:1},t);a.nodeType||delete a.nodeType,a.outturnPlanCode||delete a.outturnPlanCode,delete a.dataTime,Object(u["k"])(a).then((function(t){200===t.code?(e.dialogVisibleDetail=!1,e.$message({message:"成功导出",type:"success"})):e.$message({message:t.message,type:"warning"})}))},handleSelectionChange:function(t){this.batchList=t,this.multipleSelection=t},clickDetail:function(){this.innerVisibleGoods=!0},add:function(){this.info.isTrue=!0,this.info.isShow=!0},viewDetail:function(){this.info.isTrue=!0,this.info.isShow=!0}},mounted:function(){},activated:function(){var t=this;setTimeout((function(){t.$refs.TableData.bodyWrapper.scrollTop=t.scrollTop,t.$refs.TableData.bodyWrapper.scrollLeft=t.scrollLeft}),60)},beforeRouteLeave:function(t,e,a){this.scrollTop=this.$refs.TableData.bodyWrapper.scrollTop,this.scrollLeft=this.$refs.TableData.bodyWrapper.scrollLeft,a()}},p=c,m=(a("7113"),a("2877")),f=Object(m["a"])(p,n,i,!1,null,"55088752",null);e["default"]=f.exports}}]);