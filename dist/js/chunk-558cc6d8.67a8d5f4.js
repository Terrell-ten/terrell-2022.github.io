(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-558cc6d8"],{"2a02":function(e,t,a){"use strict";a.d(t,"j",(function(){return r})),a.d(t,"p",(function(){return i})),a.d(t,"i",(function(){return s})),a.d(t,"b",(function(){return n})),a.d(t,"f",(function(){return l})),a.d(t,"g",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"n",(function(){return m})),a.d(t,"k",(function(){return p})),a.d(t,"a",(function(){return h})),a.d(t,"q",(function(){return f})),a.d(t,"c",(function(){return b})),a.d(t,"d",(function(){return v})),a.d(t,"o",(function(){return g})),a.d(t,"l",(function(){return w})),a.d(t,"m",(function(){return y}));var o=a("83c3");function r(e){return Object(o["a"])({url:"/admin/shopper/warehouse/list/page",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/admin/shopper/warehouse/update",method:"post",data:e})}function s(e){return Object(o["a"])({url:"/admin/shopper/warehouse/get",method:"get",params:e})}function n(e){return Object(o["a"])({url:"/admin/shopper/warehouse/delete",method:"POST",data:e})}function l(e){return Object(o["a"])({url:"/admin/factory/list/page",method:"POST",data:e})}function c(e){return Object(o["a"])({url:"/admin/factory/getFactoryList",method:"get",data:e})}function u(e){return Object(o["a"])({url:"/admin/shopper/warehouse/list",method:"GET",data:e})}function d(e){return Object(o["a"])({url:"/admin/factory/get",method:"get",params:e})}function m(e){return Object(o["a"])({url:"/admin/factory/update",method:"post",data:e})}function p(e){return Object(o["a"])({url:"/admin/factory/insert",method:"post",data:e})}function h(e){return Object(o["a"])({url:"/admin/factory/delete",method:"post",data:e})}function f(e){return Object(o["a"])({url:"/admin/customer/detail/schedule/factory/update",method:"post",data:e})}function b(e){return Object(o["a"])({url:"/admin/user/findUserList",method:"get",params:e})}function v(e){return Object(o["a"])({url:"/admin/factory/list/sku",method:"get",params:e})}function g(e){return Object(o["a"])({url:"/admin/factory/updateProductTaxRate",method:"post",data:e})}function w(e){return Object(o["a"])({url:"/admin/officer/saveDutyOfficer",method:"post",data:e})}function y(e){return Object(o["a"])({url:"/admin/officer/updateDutyOfficerStatus",method:"post",data:e})}},"35d4":function(e,t,a){},"4ecc":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-conent main-conent-minheight flex-main-conent"},[a("div",{staticClass:"flex-box"},[a("div",{staticClass:"flex-top"},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-row",{staticStyle:{"margin-bottom":"0"},attrs:{gutter:40}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"商品分类："}},[a("el-cascader",{attrs:{filterable:"",options:e.projectAllList,props:e.casProps,clearable:""},on:{change:e.handleChanges},model:{value:e.classValue,callback:function(t){e.classValue=t},expression:"classValue"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"包材名称："}},[a("el-input",{attrs:{clearable:""},model:{value:e.productNameNew,callback:function(t){e.productNameNew=t},expression:"productNameNew"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"SKU："}},[a("el-input",{attrs:{clearable:""},model:{value:e.skuCode,callback:function(t){e.skuCode=t},expression:"skuCode"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.findList}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.adds(!0)}}},[e._v("添加包材")])],1),a("el-col",{attrs:{span:2}})],1)],1)],1),a("div",{staticClass:"flex-cont"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTab,expression:"loadingTab"}],ref:"TableData",staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableDatas,border:"",height:"100%"}},[a("el-table-column",{attrs:{prop:"id",label:"标识",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"productName",label:"包材名称",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"specification",label:"规格",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"unit",label:"标准单位",align:"center"}}),a("el-table-column",{attrs:{prop:"nodeType",label:"类型",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:"100301"===t.row.nodeType,expression:"scope.row.nodeType==='100301'"}]},[e._v("包材")])]}}])}),a("el-table-column",{attrs:{prop:"productClassName",label:"商品分类",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"skuCode",label:"SKU",align:"center","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{prop:"orderThreshold",label:"下单阀值",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.orderThreshold?a("span",[e._v("100%")]):a("span",[e._v(e._s("***"===t.row.orderThreshold?t.row.orderThreshold:100*t.row.orderThreshold+"%"))])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[e._v(" 菜单"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return e.editList(t.row)}}},[e._v("修改")]),a("el-dropdown-item",{nativeOn:{click:function(a){return e.editreturns(t.row)}}},[e._v("配置库存数据")]),a("el-dropdown-item",{nativeOn:{click:function(a){return e.returns2(t.row.id,t.row)}}},[e._v("返还配置项信息")]),a("el-dropdown-item",{nativeOn:{click:function(a){return e.editgys(t.row)}}},[e._v("管理供应商")])],1)],1)]}}])})],1)],1),a("div",{staticClass:"flex-button"},[a("div",{staticClass:"margin-t16 text-right"},[a("AppPaging",{attrs:{total:e.allTate,pageSize:e.paramData.pageSize,currentPage:e.paramData.page},on:{handleCurrentChange:e.handleCurrentChange,handleSizeChange:e.handleSizeChange}})],1)])]),a("el-dialog",{attrs:{title:"查看供应商",visible:e.isGys},on:{"update:visible":function(t){e.isGys=t},close:function(t){return e.hide()}}},[a("el-table",{attrs:{data:e.gysData,border:""}},[a("el-table-column",{attrs:{label:"标识",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.gid)+" ")]}}])}),a("el-table-column",{attrs:{label:"供应商名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.name)+" ")]}}])}),a("el-table-column",{attrs:{label:"区域"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.region)+" ")]}}])}),a("el-table-column",{attrs:{label:"起订量"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.minQuantity)+" ")]}}])}),a("el-table-column",{attrs:{label:"采购单价"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.price)+" ")]}}])}),a("el-table-column",{attrs:{label:"采购单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.unit)+" ")]}}])})],1)],1),a("el-dialog",{attrs:{title:e.isShow?"添加包材":"修改",visible:e.isTrue,width:"70%"},on:{"update:visible":function(t){e.isTrue=t},close:function(t){return e.hide()}}},[a("el-form",{ref:"ruleForm_form",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"140px",rules:e.rules}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"包材分类路径："}},[a("el-cascader",{staticClass:"BOX",attrs:{filterable:"",placeholder:e.ruleForm.productClassName,options:e.projectAllList,props:e.casProps,clearable:""},on:{change:e.changeClass},model:{value:e.ruleForm.productClassId,callback:function(t){e.$set(e.ruleForm,"productClassId",t)},expression:"ruleForm.productClassId"}})],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"包材名称：",prop:"productName"}},[a("el-input",{model:{value:e.ruleForm.productName,callback:function(t){e.$set(e.ruleForm,"productName",t)},expression:"ruleForm.productName"}})],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"规格参数：","label-width":"90px"}},[a("el-input",{model:{value:e.ruleForm.specification,callback:function(t){e.$set(e.ruleForm,"specification",t)},expression:"ruleForm.specification"}})],1)],1)],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:6}})],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"参考单价(元)：","label-width":"150px"}},[a("el-input",{attrs:{type:"number",disabled:"***"===e.ruleForm.price},model:{value:e.ruleForm.price,callback:function(t){e.$set(e.ruleForm,"price",t)},expression:"ruleForm.price"}})],1)],1),a("el-col",{attrs:{span:9}},["***"!==e.ruleForm.lossRate?a("el-form-item",{attrs:{label:"预损耗率:"}},[a("el-input",{attrs:{clearable:""},on:{change:e.lossRateNmu},model:{value:e.ruleForm.lossRate,callback:function(t){e.$set(e.ruleForm,"lossRate",t)},expression:"ruleForm.lossRate"}}),a("span",{staticStyle:{color:"red"}},[e._v("提示：请输入小于1之内的值")])],1):e._e()],1)],1),a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"下单阀值："}},[a("el-select",{attrs:{disabled:"***"==e.ruleForm.orderThreshold},model:{value:e.ruleForm.orderThreshold,callback:function(t){e.$set(e.ruleForm,"orderThreshold",t)},expression:"ruleForm.orderThreshold"}},e._l(e.threshold,(function(e){return a("el-option",{key:e.L,attrs:{label:e.L,value:e.V}})})),1)],1)],1)],1),a("el-dialog",{attrs:{title:"添加规格",visible:e.Visible,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.Visible=t},close:e.Close}},[a("el-form",{ref:"from",staticClass:"demo-ruleForm",attrs:{model:e.specifform,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"规格标题"}},[a("el-input",{model:{value:e.specifform.title,callback:function(t){e.$set(e.specifform,"title",t)},expression:"specifform.title"}})],1),a("el-form-item",{attrs:{label:"规格内容"}},[a("el-input",{model:{value:e.specifform.conent,callback:function(t){e.$set(e.specifform,"conent",t)},expression:"specifform.conent"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.enters}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.Visible=!1}}},[e._v("取 消")])],1)],1),a("el-form-item",{attrs:{label:"最小标准单位：",prop:"unit"}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:4}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:1==e.isShow,expression:"isShow==true"}],model:{value:e.ruleForm.unit,callback:function(t){e.$set(e.ruleForm,"unit",t)},expression:"ruleForm.unit"}}),a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.isShow,expression:"isShow==false"}]},[e._v(e._s(e.ruleForm.unit))])],1)],1)],1),a("el-form-item",{attrs:{label:"可选单位集"}},[a("el-row",{attrs:{gutter:40}},[a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0,e.option=""}}},[e._v("添加单位")])],1)],1)],1),a("el-dialog",{attrs:{title:"添加单位",visible:e.dialogVisible,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t},close:e.CloseUnit}},[a("el-form",{ref:"from",staticClass:"demo-ruleForm",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"单位标题"}},[a("el-input",{model:{value:e.form.namecode,callback:function(t){e.$set(e.form,"namecode",t)},expression:"form.namecode"}})],1),a("el-form-item",{attrs:{label:"标准量配比"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.option,callback:function(t){e.option=t},expression:"option"}},[e._v(" 1"+e._s(e.form.namecode)+"= "),a("el-input",{staticStyle:{width:"80px"},on:{focus:function(t){return e.inputclick(1)}},model:{value:e.form.data,callback:function(t){e.$set(e.form,"data",t)},expression:"form.data"}}),e._v(" "+e._s(e.ruleForm.unit)+" ")],1),a("el-radio",{attrs:{label:"2"},model:{value:e.option,callback:function(t){e.option=t},expression:"option"}},[e._v(" 1"+e._s(e.ruleForm.unit)+"= "),a("el-input",{staticStyle:{width:"80px"},on:{focus:function(t){return e.inputclick(2)}},model:{value:e.data1,callback:function(t){e.data1=t},expression:"data1"}}),e._v(" "+e._s(e.form.namecode)+" ")],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.enterUnit}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")])],1)],1),a("el-table",{staticStyle:{width:"50%",margin:"0 0 15px 50px"},attrs:{data:e.unitData,border:""}},[a("el-table-column",{attrs:{label:"单位标题",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.namecode,expression:"scope.row.namecode"},{name:"show",rawName:"v-show",value:t.row.iseditor,expression:"scope.row.iseditor"}],attrs:{type:"text"},domProps:{value:t.row.namecode},on:{blur:function(a){return e.save1(t.row)},input:function(a){a.target.composing||e.$set(t.row,"namecode",a.target.value)}}}),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.row.iseditor,expression:"!scope.row.iseditor"}]},[e._v(e._s(" "+t.row.namecode))])]}}])}),a("el-table-column",{attrs:{label:"标准量配比",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["2"==t.row.option||t.row.data<0?a("div",[e._v(" 1"+e._s(" "+e.ruleForm.unit)+"="),t.row.iseditor?a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.data,expression:"scope.row.data"}],attrs:{type:"text"},domProps:{value:t.row.data},on:{blur:function(a){return e.save1(t.row)},input:function(a){a.target.composing||e.$set(t.row,"data",a.target.value)}}}):a("span",[e._v(e._s(t.row.data))]),e._v(" "+e._s(" "+t.row.namecode)+" ")]):a("div",[e._v(" 1"+e._s(" "+t.row.namecode)+"="),t.row.iseditor?a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.data,expression:"scope.row.data"}],attrs:{type:"text"},domProps:{value:t.row.data},on:{blur:function(a){return e.save1(t.row)},input:function(a){a.target.composing||e.$set(t.row,"data",a.target.value)}}}):a("span",[e._v(e._s(t.row.data))]),e._v(e._s(" "+e.ruleForm.unit)+" ")])]}}])}),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[t.row.iseditor?a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.edit1(t.row,2)}}},[e._v("确定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.edit1(t.row,1)}}},[e._v("修改")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.del(t.row)}}},[e._v("删除")])],1)]}}])})],1)],1),a("div",{staticStyle:{color:"red"}},[e._v("(以上修改内容需要点击保存后才生效)")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[1==e.isShow?a("el-button",{attrs:{type:"primary"},on:{click:e.AddList}},[e._v("保 存")]):a("el-button",{attrs:{type:"primary"},on:{click:e.preservation}},[e._v("保 存")]),a("el-button",{on:{click:function(t){return e.hide()}}},[e._v("取 消")])],1)],1),a("FhpzDemo",{ref:"FhpzDemo"}),a("el-dialog",{attrs:{title:"配置库存数据",visible:e.iseditreturns},on:{"update:visible":function(t){e.iseditreturns=t},close:e.beforeclo}},[a("el-dialog",{attrs:{title:e.title,visible:e.WarehouseVisible,width:"30%","append-to-body":""},on:{"update:visible":function(t){e.WarehouseVisible=t},close:e.handleClose}},[a("el-form",{ref:"from",staticClass:"demo-ruleForm",attrs:{model:e.Warehouseform,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"仓库名称:"}},[a("el-select",{on:{change:e.selectWarehouse},model:{value:e.Warehouseform.kcname,callback:function(t){e.$set(e.Warehouseform,"kcname",t)},expression:"Warehouseform.kcname"}},e._l(e.WarehouseData,(function(e){return a("el-option",{key:e.id,attrs:{label:e.namecode,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:e.kctitle}},[a("el-input",{staticStyle:{width:"50%"},model:{value:e.Warehouseform.num,callback:function(t){e.$set(e.Warehouseform,"num",t)},expression:"Warehouseform.num"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.insert}},[e._v("确 定")]),a("el-button",{on:{click:function(t){e.WarehouseVisible=!1}}},[e._v("取 消")])],1)],1),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"最低库存",name:"1000110"}},[a("el-button",{staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary"},on:{click:function(t){e.addkc(1),e.WarehouseVisible=!0,e.kctitle="最低库存"}}},[e._v("添加最低库存")]),a("el-table",{attrs:{data:e.kcdata,border:""}},[a("el-table-column",{attrs:{label:"仓库名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ckname))])]}}])}),a("el-table-column",{attrs:{label:"最低库存",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("input",{directives:[{name:"model",rawName:"v-model",value:t.row.num,expression:"scope.row.num"}],attrs:{type:"text",disabled:t.row.dis1},domProps:{value:t.row.num},on:{blur:function(a){return e.save(t.row)},input:function(a){a.target.composing||e.$set(t.row,"num",a.target.value)}}})]}}])}),a("el-table-column",{attrs:{label:"最低库存",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.dis1,expression:"scope.row.dis1==true"}],staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary"},on:{click:function(a){return e.peizhi1(t.row)}}},[e._v("配置最低库存数")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.dis1,expression:"scope.row.dis1==false"}],staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary"},on:{click:function(a){e.update(t.row),t.row.dis1=!0}}},[e._v("保存")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"当前库存",name:"1000016"}},[a("el-button",{staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary"},on:{click:function(t){e.addkc(2),e.WarehouseVisible=!0,e.kctitle="当前库存"}}},[e._v("添加当前库存")]),a("el-table",{attrs:{data:e.kcdata,border:""}},[a("el-table-column",{attrs:{label:"仓库名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ckname))])]}}])}),a("el-table-column",{attrs:{label:"当前库存",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"text",placeholder:"库存量",disabled:t.row.dis2},model:{value:t.row.num,callback:function(a){e.$set(t.row,"num",a)},expression:"scope.row.num"}})]}}])}),a("el-table-column",{attrs:{label:"当前库存",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.dis2,expression:"scope.row.dis2==true"}],staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary"},on:{click:function(a){return e.peizhi2(t.row)}}},[e._v("配置当前库存数")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.dis2,expression:"scope.row.dis2==false"}],staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary"},on:{click:function(a){e.update2(t.row),t.row.dis2=!0}}},[e._v("保存")])]}}])})],1)],1),a("el-tab-pane",{attrs:{label:"安全库存",name:"1000156"}},[a("el-button",{staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary"},on:{click:function(t){e.addkc(3),e.WarehouseVisible=!0,e.kctitle="安全库存"}}},[e._v("添加安全库存")]),a("el-table",{attrs:{data:e.kcdata,border:""}},[a("el-table-column",{attrs:{label:"仓库名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.ckname))])]}}])}),a("el-table-column",{attrs:{label:"安全库存",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"text",placeholder:"库存量",disabled:t.row.dis3},model:{value:t.row.num,callback:function(a){e.$set(t.row,"num",a)},expression:"scope.row.num"}})]}}])}),a("el-table-column",{attrs:{label:"安全库存",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.row.dis3,expression:"scope.row.dis3==true"}],staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary"},on:{click:function(a){return e.peizhi3(t.row)}}},[e._v("配置安全库存数")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.row.dis3,expression:"scope.row.dis3==false"}],staticStyle:{margin:"0 0 10px 0"},attrs:{type:"primary"},on:{click:function(a){e.update(t.row),t.row.dis3=!0}}},[e._v("保存")])]}}])})],1)],1)],1)],1)],1)},r=[],i=a("5530"),s=(a("d3b7"),a("159b"),a("b64b"),a("25f0"),a("b0c0"),a("a9e3"),a("e9c4"),a("7db0"),a("a434"),a("fb6a"),a("2f62")),n=a("8c14"),l=a("062d"),c=a("373f"),u=a("2a02"),d=a("82d2"),m=a("2f88"),p=a("11ae"),h={components:{FhpzDemo:p["a"],AppPaging:m["a"]},data:function(){var e=this;return{scrollTop:0,scrollLeft:0,loadingTab:!1,paramData:{page:1,pageSize:24,nodeType:"100301"},rules:{productName:[{required:!0,message:"请填写包材名称",trigger:"change"}],unit:[{required:!0,message:"请设置最小标准单位",trigger:"change"}]},rd1:!1,skuCode:"",gysData:[],isGys:!1,kctitle:"最低库存",title:"",dis1:!0,dis2:!0,dis3:!0,ggcid:"",kctype:"1000110",kcname:"最低库存",kcdata:[],gcid:"",iseditreturns:!1,activeName:"1000110",datanew1:[],productNameNew:"",projectAllList:[],casProps:{value:"id",label:"namecode",lazy:!0,lazyLoad:function(t,a){t.data&&e.getChildProject(t.data,a)}},threshold:d["b"],taxRateData:[{L:"0%",v:0},{L:"1%",v:.01},{L:"2%",v:.02},{L:"3%",v:.03},{L:"4%",v:.04},{L:"5%",v:.05},{L:"6%",v:.06},{L:"7%",v:.07},{L:"8%",v:.08},{L:"9%",v:.09},{L:"10%",v:.1},{L:"11%",v:.11},{L:"12%",v:.12},{L:"13%",v:.13},{L:"14%",v:.14},{L:"15%",v:.15},{L:"16%",v:.16},{L:"17%",v:.17},{L:"18%",v:.18},{L:"19%",v:.19},{L:"20%",v:.2}],classValue:"",GoodsValue:"",goodsOptions:[],GoodsData:[],tableDatas:[],obj:{},size:24,total:0,allTate:0,page:1,isShow:!0,isTrue:!1,ruleForm:{productName:"",specification:"",spec:"",nodetype:"100301",productClassId:"",price:"",taxRate:"",orderThreshold:1,unit:"",dutyofficer:"",lossRate:""},checked:!1,checkeds:!1,form:{data:"",namecode:"",iseditor:!1},dialogVisible:!1,unitData:[],WarehouseVisible:!1,stockData:[],WarehouseData:[],Warehouseform:{warehouseId:"",inventoryWarning:"",iseditor:!1,warehouseName:"",currentInventory:""},data1:"",option:"",classNamecode:"",isReturns:!1,supplierData:[],term:"0",YearValue:"",startTime:"",endTime:"",returnValue:0,feeValue:0,supplierValue:"",Cumulative:0,returnForm:{data:0,num:0,objtype:1000116,optdate:"",rela:0,vdata:""},returnsForm:{data:0,num:0,objtype:1000117,optdate:"",rela:0,vdata:""},feeForm:{data:0,num:0,objtype:1000018,optdate:"",rela:0,vdata:""},specifform:{title:"",conent:"",iseditor:!1},Visible:!1,specifData:[],rads:!1,isAble:!1,array:[],editShow:!1,isSupplier:!1,PageNum:1,findUserList:[],isShowDutyofficer:!0,currentInventoryParam:{},TaxRateRadio:1,productNames:"",messages:""}},computed:Object(i["a"])({},Object(s["c"])({userId:"user/userId",name:"user/name"})),created:function(){},mounted:function(){var e=this;this.getProjectList(),this.findList(),Object(u["c"])().then((function(t){200===t.code&&(e.findUserList=t.data)}))},methods:Object(i["a"])(Object(i["a"])({findList:function(){this.obj={nodeType:"100301",productName:this.productNameNew,productClassId:this.classValue,skuCode:this.skuCode,pageSize:this.paramData.pageSize,page:1};var e=this.obj;Object.keys(e).forEach((function(t){var a=e[t];""===a&&delete e[t]})),this.paramData=e,this.getTable(this.paramData)},handleSizeChange:function(e){this.paramData.pageSize=e,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.PageNum=e,this.paramData.page=e,this.getTable(this.paramData)},getTable:function(e){var t=this;this.loadingTab=!0,Object(l["z"])(e).then((function(e){t.loadingTab=!1,200===e.code&&(t.tableDatas=e.data.list,t.total=e.data.total,t.allTate=e.data.total,t.page=e.data.pageNum,t.tableDatas.forEach((function(e){e.orderThreshold=e.orderThreshold||0,e.orderThreshold=1*e.orderThreshold})))}))},adds:function(e){e&&(this.isShowDutyofficer=!1),this.isShow=!0,this.isTrue=!0,this.$refs["ruleForm_form"].resetFields(),this.ruleForm.orderThreshold=1,this.ruleForm={productName:"",specification:"",spec:"",nodetype:"100301",productClassId:"",price:"",taxRate:"",orderThreshold:1,unit:"",dutyofficer:"",lossRate:""}},editList:function(e){this.get_selectProductInfo({productId:e.id})},get_selectProductInfo:function(e){var t=this;Object(l["G"])(e).then((function(e){200===e.code&&t.editList2(e.data)}))},editList2:function(e){var t=this;for(var a in this.currentInventoryParam=e,null==e.currentInventory&&(e.currentInventory="0"),this.isShow=!1,this.isTrue=!0,this.ruleForm)e[a]&&(this.ruleForm[a]=e[a]);""!==this.ruleForm.dutyofficer&&null!==this.ruleForm.dutyofficer&&void 0!==this.ruleForm.dutyofficer&&873!==this.userId||(this.isShowDutyofficer=!1),this.ruleForm.taxRate>0?this.TaxRateRadio=1:this.TaxRateRadio=2,this.ruleForm.productClassName=e.productClassName,this.ruleForm.skuCode=e.skuCode,this.ruleForm.nodetype=e.nodeType,this.ruleForm.productId=e.id,null!=this.ruleForm.productClassName&&Object(n["d"])({namecode:this.ruleForm.productClassName}).then((function(e){t.goodsOptions=e.data.records,t.ruleForm.productClassId=e.data.records[0].id})),e.units.forEach((function(e){for(var a in e)e.data<0&&(t.$set(e,"state",2),e.data=-e.data,e.option="2"),t.$set(e,"iseditor",!1);t.unitData.push(e)})),e.productMaterialWdataDTOS.forEach((function(e){for(var a in e)e.inventoryWarning=e.num,e.warehouseId=e.data,e.currentInventory=e.numOne,t.$set(e,"iseditor",!1),t.$set(e,"iseditor1",!1);t.stockData.push(e)})),e.specif.forEach((function(e){for(var a in e)t.$set(e,"iseditor",!1)})),this.specifData=e.specif},enterUnit:function(){var e="";""===this.form.namecode&&(e="单位不可为空！"),""===this.option&&(e="配比量不可为空！"),"1"===this.option&&""===this.form.data&&(e="配比量不可为空！"),"2"===this.option&&""===this.data1&&(e="配比量不可为空！"),""!==e?this.$message({type:"warning",message:e}):("2"===this.option&&(this.form.data=this.data1,this.form.state=2),this.form.id="",this.form.nodetype=null,this.form.rela="",this.form.vdata="",this.form.option=this.option,this.unitData.push(this.form),this.CloseUnit())},CloseUnit:function(){this.dialogVisible=!1,this.data1="",this.form={data:"",namecode:"",iseditor:!1}},inputclick:function(e){this.option=e.toString()},lossRateNmu:function(){this.ruleForm.lossRate>1&&(this.$message.warning("请输入请输入小于1之内的值"),this.ruleForm.lossRate=0)},editgys:function(e){var t=this;this.isGys=!0;var a={getColumns:[{nameCode:"id"},{rela:"m2_material_supplier",nodeType:"rela",nameCode:"id",vdata:{DISPNAME:"gid"}},{rela:"m2_material_supplier",nodeType:"rela",nameCode:"namecode",vdata:{DISPNAME:"name"}},{rela:"m2_material_supplier",nodeType:"rela",nameCode:"vdata",vdata:{DISPNAME:"region"}},{nameCode:"unit"},{nameCode:"price"},{rela:"m2_packmaterial_data",objType:"minimum",nameCode:"data",vdata:{DISPNAME:"minQuantity"}}],Condition:[{nameCode:"data",data:e.id}]};Object(l["b"])(a).then((function(e){e.data.forEach((function(e){e.region=JSON.parse(e.region).regionname,e.minQuantity=e.minQuantity||0})),t.gysData=e.data}))},peizhi1:function(e){var t=this;Object(l["A"])({num:e.num,warehouseId:e.ckid,productId:this.gcid}).then((function(a){200===a.code&&("可以修改"===a.data.message?e.dis1=!1:t.$message({type:"warning",message:"该库存不可修改！"}))}))},peizhi2:function(e){var t=this;Object(l["A"])({num:e.num,warehouseId:e.ckid,productId:this.gcid}).then((function(a){200===a.code&&("可以修改"===a.data.message?e.dis2=!1:t.$message({type:"warning",message:"该库存不可修改！"}))}))},peizhi3:function(e){var t=this;Object(l["A"])({num:e.num,warehouseId:e.ckid,productId:this.gcid}).then((function(a){200===a.code&&("可以修改"===a.data.message?e.dis3=!1:t.$message({type:"warning",message:"该库存不可修改！"}))}))},beforeclo:function(){this.dis1=!0,this.dis2=!0,this.dis3=!0},addkc:function(e){1===e?this.title="添加最低库存":2===e?this.title="添加当前库存":3===e&&(this.title="添加安全库存")},insert:function(){var e=this;if("添加当前库存"===this.title){var t={I_goodId:this.gcid,I_Warehouse:this.ggcid,I_curnum:parseInt(this.Warehouseform.num),I_opt:2};Object(l["H"])(t).then((function(t){200===t.code&&(e.$message({type:"success",message:"添加成功"}),e.getkc(e.kctype),e.WarehouseVisible=!1,e.kcdata=t.data)}))}else{var a={rela:this.gcid,objtype:this.kctype,namecode:this.kcname,num:this.Warehouseform.num,data:this.ggcid};Object(l["e"])(a).then((function(t){200===t.code&&(e.$message({type:"success",message:"添加成功"}),e.getkc(e.kctype),e.WarehouseVisible=!1,e.kcdata=t.data)}))}},update:function(e){var t=this,a={num:parseInt(e.num)};Object(l["f"])(a,e.id).then((function(e){200===e.code&&t.$message({type:"success",message:"修改成功"})}))},update2:function(e){var t=this;Object(l["A"])({num:e.num,warehouseId:e.ckid,productId:this.gcid}).then((function(a){200===a.code&&("可以修改"===a.data.message?Object(l["J"])({num:e.num,warehouseId:e.ckid,productId:t.gcid}).then((function(e){200===e.code&&t.$message({type:"success",message:"修改成功"})})):(e.num=0,t.$message({type:"warning",message:"该库存不可修改！"})))}))},getkc:function(e){var t=this,a={getColumns:[{nameCode:"id"},{nameCode:"namecode",vdata:{DISPNAME:"name"}},{nameCode:"num"},{nameCode:"data",vdata:{DISPNAME:"ckid"}},{rela:"m2_shopper_warehouse",nodeType:"data",nameCode:"namecode",vdata:{DISPNAME:"ckname"}}],Condition:[{nameCode:"rela",data:this.gcid},{nameCode:"objtype",data:e}]};Object(l["d"])(a).then((function(a){if(200===a.code){switch(e){case"1000110":a.data.forEach((function(e){e.dis1=!0}));break;case"1000016":a.data.forEach((function(e){e.dis2=!0}));break;case"1000156":a.data.forEach((function(e){e.dis3=!0}));break;case"1000118":a.data.forEach((function(e){e.dis4=!0}));break}t.kcdata=a.data}}))},editreturns:function(e){var t=this;this.iseditreturns=!0,this.gcid=e.id,this.getkc(this.kctype),Object(l["g"])({objType:"1000110",productId:this.gcid}).then((function(e){t.WarehouseData=e.data}))},handleClick:function(e){var t=this;this.kctype=e.name,"1000110"===e.name?(this.kcname="最低库存",Object(l["g"])({objType:"1000110",productId:this.gcid}).then((function(e){t.WarehouseData=e.data}))):"1000156"===e.name?(this.kcname="安全库存",Object(l["g"])({objType:"1000156",productId:this.gcid}).then((function(e){t.WarehouseData=e.data}))):"1000016"===e.name?(this.kcname="当前库存",Object(l["g"])({objType:"1000016",productId:this.gcid}).then((function(e){t.WarehouseData=e.data}))):"1000118"===e.name&&(this.kcname="库存待补数"),this.getkc(e.name)}},Object(s["b"])({})),{},{warehouseNamesss:function(e){},ModifyInventory:function(e){var t=this,a={warehouseId:e.warehouseId,productId:this.currentInventoryParam.id};Object(l["B"])(a).then((function(o){if(200===o.code){if(!o.data.flag)return t.$message("不能修改");if(e.iseditor1=!0,a.num=e.numOne,""===a.num||null==a.num)return;t.updateMaterialInventory(a)}}))},updateMaterialInventory:function(e){var t=this;Object(l["J"])(e).then((function(e){200===e.code&&t.$message.success(e.message)}))},getProjectList:function(){var e=this;Object(n["d"])({nodeType:"100101",listByAsc:1,pageSize:1e3}).then((function(t){e.projectAllList=t.data.records}))},getChildProject:function(e,t){var a={rela:e.id},o=[];Object(n["d"])(a).then((function(e){o=e.data.records,t(o)}))},handleChanges:function(e){var t=this;e.length>0&&(this.classValue=e[e.length-1],this.GoodsValue="",""===this.classValue?(this.GoodsValue="",this.GoodsData=[],this.goodsOptions=[]):Object(l["z"])({nodeType:"100301",productClassId:this.classValue}).then((function(e){t.GoodsData=e.data.list,t.GoodsValue=e.data.list[0].productName})))},otherFilter:function(e){var t=this;e.length<=1?this.goodsOptions=[]:e.length>1&&Object(n["d"])({namecode:e}).then((function(e){t.goodsOptions=e.data.records}))},selectCalssValue:function(){var e=this;this.GoodsValue="",""===this.classValue?(this.GoodsValue="",this.GoodsData=[],this.goodsOptions=[]):Object(l["z"])({nodeType:"100301",productClassId:this.classValue}).then((function(t){e.GoodsData=t.data.list,e.GoodsValue=t.data.list[0].productName}))},GoodsFilter:function(e){var t=this;e.length<=1?this.GoodsData=[]:e.length>1&&Object(l["z"])({nodeType:"100301",productName:e}).then((function(e){t.GoodsData=e.data.list}))},changeGoods:function(e){""!==this.classValue||e||(this.GoodsData=[])},obtain:function(){""===this.GoodsValue&&(this.GoodsData=JSON.parse(sessionStorage.getItem("historys")))},hide:function(){this.ruleForm={productName:"",specification:"",productClassId:"",price:"",orderThreshold:"",unit:"",dutyofficer:""},this.unitData=[],this.stockData=[],this.specifData=[],this.form={data:"",namecode:"",iseditor:!1},this.specifform={title:"",conent:"",iseditor:!1},this.isTrue=!1,this.checked=!1,this.checkeds=!1,this.isShowDutyofficer=!0},AddList:function(){var e=this,t=!1;if(this.$refs["ruleForm_form"].validate((function(e){if(!e)return t=!0,!1})),!t){this.stockData.forEach((function(e){delete e.iseditor,delete e.warehouseName,e.id=""})),this.ruleForm.factoryId=0,this.ruleForm.orderThreshold=Number(this.ruleForm.orderThreshold),this.ruleForm.inventoryWarnings=this.stockData,this.unitData.forEach((function(e){delete e.iseditor,2===e.state&&(e.data=-e.data),delete e.state})),this.ruleForm.units=this.unitData,this.specifData.forEach((function(e){delete e.iseditor}));var a={specif:this.specifData};this.ruleForm.vdata=JSON.stringify(a),Object(l["x"])(this.ruleForm).then((function(t){200===t.code?(Object(c["a"])(t.message),e.hide(),e.findList()):Object(c["b"])(t.message)}))}},preservation:function(){var e=this,t=!1;if(this.$refs["ruleForm_form"].validate((function(e){if(!e)return t=!0,!1})),!t){""!==this.classNamecode?this.ruleForm.productExteDTO={goodsClassId:this.ruleForm.productClassId,goodsClassName:this.classNamecode}:this.ruleForm.productExteDTO={goodsClassId:this.ruleForm.productClassId,goodsClassName:this.ruleForm.productClassName},this.ruleForm.productPartInfoDTO={factoryId:0,price:Number(this.ruleForm.price),specification:this.ruleForm.specification,productName:this.ruleForm.productName,unit:this.ruleForm.unit,nodetype:this.ruleForm.nodetype,dutyofficer:this.ruleForm.dutyofficer},this.ruleForm.taxRate=Number(this.ruleForm.taxRate),this.ruleForm.orderThreshold=Number(this.ruleForm.orderThreshold),0===this.unitData.length||this.unitData.forEach((function(t){delete t.iseditor,t.rela=e.ruleForm.productId,2===t.state&&(t.data=-t.data),delete t.state})),this.ruleForm.units=this.unitData,this.stockData.forEach((function(e){for(var t in e)"inventoryWarning"!==t&&"id"!==t&&"warehouseId"!==t&&delete e[t],"***"===e[t]&&delete e[t]})),this.specifData.forEach((function(e){delete e.iseditor}));var a={specif:this.specifData};this.ruleForm.vdata=JSON.stringify(a),this.ruleForm.inventoryWarnings=this.stockData,delete this.ruleForm.price,delete this.ruleForm.productClassId,delete this.ruleForm.productName,delete this.ruleForm.productClassName,delete this.ruleForm.specification,delete this.ruleForm.unit,delete this.ruleForm.nodetype,delete this.ruleForm.skuCode,2===this.TaxRateRadio&&(this.ruleForm.taxRate=0),Object(l["y"])(this.ruleForm).then((function(t){200===t.code?(Object(c["a"])(t.message),e.hide(),e.findList()):Object(c["b"])(t.message)}))}},handleClose:function(){this.WarehouseVisible=!1,this.Warehouseform={warehouseId:"",inventoryWarning:"",iseditor:!1,warehouseName:""}},enter:function(){this.stockData.push(this.Warehouseform);var e={};this.stockData=this.stockData.reduce((function(t,a){return!e[a.warehouseId]&&(e[a.warehouseId]=t.push(a)),t}),[]),this.handleClose()},selectWarehouse:function(e){var t=this;this.ggcid=e,this.obj=this.WarehouseData.find((function(e){return e.id===t.Warehouseform.warehouseId})),this.Warehouseform.warehouseName=this.obj.namecode},Edit:function(e){e.iseditor=!0},save:function(e){e.iseditor=!1},del1:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["l"])({dataId:e.id}).then((function(a){200===a.code&&t.stockData.splice(t.stockData.indexOf(e),1)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},edit1:function(e,t){this.unitData.forEach((function(e){e.iseditor=!1})),2!==t&&(e.iseditor=!0)},save1:function(e){e.iseditor=!1},del:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["k"])({unitId:e.id}).then((function(a){200===a.code&&t.unitData.splice(t.unitData.indexOf(e),1)}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},changeClass:function(e){var t=this;e.length>0&&(this.ruleForm.productClassId=e[e.length-1]),!1===this.isShow&&Object(n["d"])({pageSize:1e4}).then((function(e){var a=e.data.records;t.arr=a.find((function(e){return e.id===t.ruleForm.productClassId})),t.classNamecode=t.arr.namecode}))},rewrite:function(e){e&&(this.specifData=[],this.ruleForm.specification="")},addName:function(e){this.rads=e,e?this.ruleForm.productName+=this.ruleForm.specification:this.ruleForm.productName=this.ruleForm.productName.slice(0,-this.ruleForm.specification.length)},returns2:function(e,t){this.$refs.FhpzDemo.init(t)},Close:function(){this.Visible=!1,this.specifform={title:"",conent:"",iseditor:!1}},save2:function(e){var t=this;e.iseditor=!1,this.ruleForm.specification="",this.specifData.forEach((function(e){-1===t.ruleForm.specification.indexOf(e.conent)&&(t.ruleForm.specification+=e.conent+" ")}))},edit2:function(e){e.iseditor=!0},enters:function(){var e=this;this.specifData.push(this.specifform),this.specifData.forEach((function(t){-1===e.ruleForm.specification.indexOf(t.conent)&&(e.ruleForm.specification+=" "+t.conent)})),this.rads&&this.specifData.forEach((function(t){-1===e.ruleForm.productName.indexOf(t.conent)&&(e.ruleForm.productName+=t.conent)})),this.Close()},delSpecif:function(e){this.specifData.splice(this.specifData.indexOf(e),1)}}),name:"Ucmanagement-Packingmaterial-homepage",activated:function(){var e=this;setTimeout((function(){e.$refs.TableData.bodyWrapper.scrollTop=e.scrollTop,e.$refs.TableData.bodyWrapper.scrollLeft=e.scrollLeft}),60)},beforeRouteLeave:function(e,t,a){this.scrollTop=this.$refs.TableData.bodyWrapper.scrollTop,this.scrollLeft=this.$refs.TableData.bodyWrapper.scrollLeft,a()}},f=h,b=(a("5577"),a("2877")),v=Object(b["a"])(f,o,r,!1,null,"0ec21a3c",null);t["default"]=v.exports},5577:function(e,t,a){"use strict";a("35d4")},"7db0":function(e,t,a){"use strict";var o=a("23e7"),r=a("b727").find,i=a("44d2"),s="find",n=!0;s in[]&&Array(1)[s]((function(){n=!1})),o({target:"Array",proto:!0,forced:n},{find:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),i(s)}}]);